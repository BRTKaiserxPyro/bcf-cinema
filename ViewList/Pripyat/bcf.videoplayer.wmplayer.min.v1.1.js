(function(jt,bt){typeof exports=="object"&&typeof module!="undefined"?module.exports=bt():typeof define=="function"&&define.amd?define(bt):(jt=typeof globalThis!="undefined"?globalThis:jt||self,jt.WMPlayer=bt())})(this,function(){"use strict";const jt=/\s+/;function bt(n,t,e,i){if(!e)return!0;if(typeof e=="object"){for(let s in e)Object.prototype.hasOwnProperty.call(e,s)&&n[t].apply(n,[s,e[s]].concat(i));return!1}if(jt.test(e)){const s=e.split(jt);for(let r=0,o=s.length;r<o;r++)n[t].apply(n,[s[r]].concat(i));return!1}return!0}function ve(n,t,e,i){let s=-1;const r=n.length;for(;++s<r;){const o=n[s];if(i)try{o.callback.apply(o.context||e,t)}catch(u){console.log('Error in "'+i+'" event handler:',u)}else o.callback.apply(o.context||e,t)}}class Tt{constructor(){}on(t,e,i){if(!bt(this,"on",t,[e,i])||!e)return this;const s=this._events||(this._events={});return(s[t]||(s[t]=[])).push({callback:e,context:i}),this}once(t,e,i){if(!bt(this,"once",t,[e,i])||!e)return this;let s=0;const r=this,o=function(){s++||(r.off(t,o),e.apply(this,arguments))};return o._callback=e,this.on(t,o,i)}off(t,e,i){if(!this._events||!bt(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return delete this._events,this;const s=t?[t]:Object.keys(this._events);for(let r=0,o=s.length;r<o;r++){t=s[r];const u=this._events[t];if(u){const l=this._events[t]=[];if(e||i)for(let b=0,y=u.length;b<y;b++){const T=u[b];(e&&e!==T.callback&&e!==T.callback._callback||i&&i!==T.context)&&l.push(T)}l.length||delete this._events[t]}}return this}trigger(t){if(!this._events)return this;const e=[].slice.call(arguments,1);if(!bt(this,"trigger",t,e))return this;const i=this._events[t],s=this._events.all;return i&&ve(i,e,this),s&&ve(s,arguments,this),this}triggerSafe(t){if(!this._events)return this;const e=[].slice.call(arguments,1);if(!bt(this,"trigger",t,e))return this;const i=this._events[t],s=this._events.all;return i&&ve(i,e,this,t),s&&ve(s,arguments,this,t),this}}const Ni="userActive",Jt="userInactive",ps="complete",qt="drag",He="dragStart",We="dragEnd",J="click",Mi="doubleClick",te="tap",Bi="doubleTap",Ct="over",Vt="blur",ye="focus",Pt="move",Ui="enter",kt="out",Vi=ps,ze="play",fs="abort",gs="emptied",Di="volumechange",je="pause",qe="waiting",ms="stalled",Fi="bufferFull",be="mediaError",vs="seeked",Qe="time",_i="ratechange",$i="meta",Hi="loadeddata",ys="resize",Wi="userAction",zi="clickthrough",ji={canplay(n){this.trigger(Fi,n)},play(n){this.trigger(ze,n)},pause(n){console.log("e","MEDIA_WAITING"),this.trigger(je,n)},emptied(n){this.trigger(gs,n)},volumechange(n){this.trigger(Di,n)},ratechange(n){this.trigger(_i,n)},loadedmetadata(n){this.trigger($i,n)},loadeddata(n){this.trigger(Hi,n)},seeked(n){this.trigger(vs,n)},timeupdate(n){this.trigger(Qe,n)},click(n){this.trigger(J,n)},ended(n){this.trigger(Vi,n)},error(n){this.trigger(be,n)},abort(n){this.trigger(fs,n)},stalled(n){this.trigger(ms,n)},waiting(n){this.trigger(qe,n)}};let Ye=null;function bs(n){const t={left:0,right:0,width:0,height:0,top:0,bottom:0};if(!n||!document.body.contains(n))return t;const e=n.getBoundingClientRect(),i=window.pageYOffset,s=window.pageXOffset;return!e.width&&!e.height&&!e.left&&!e.top||(t.left=e.left+s,t.right=e.right+s,t.top=e.top+i,t.bottom=e.bottom+i,t.width=e.right-e.left,t.height=e.bottom-e.top),t}function Ts(n){if(n.getBoundingClientRect){let t=n.getBoundingClientRect();return{width:t.width,height:t.height}}return{width:n.offsetWidth,height:n.offsetHeight}}function lt(n,t){Object.entries(t).filter(([,e])=>!(e===null||typeof e=="undefined")).forEach(([e,i])=>n.setAttribute(e,i))}function S(n,t,e){const i=document.createElement(n);return t&&lt(i,t),e&&(i.innerText=e),i}function ks(n,t=!1){return ws(n,t).firstChild}function ws(n,t=!1){Ye||(Ye=new DOMParser);const e=Ye.parseFromString(n,"text/html").body;if(t){Es(e);const i=e.querySelectorAll("img,svg");for(let s=i.length;s--;){const r=i[s];Ss(r)}}return e}function Es(n){const t=n.querySelectorAll("script,object,iframe");for(let e=t.length;e--;){const i=t[e];i.parentNode.removeChild(i)}return n}function Ss(n){const t=n.attributes;for(let e=t.length;e--;){const i=t[e].name;/^on/.test(i)&&n.removeAttribute(i)}return n}function Te(n,t){n.style.visibility=t?"visible":"hidden"}function A(n,t){const e=["left","right","top","bottom","borderRadius","width","height","fontSize","maxHeight"];Object.entries(t).filter(([i,s])=>typeof s!="undefined").forEach(([i,s])=>{if(s!==null&&e.indexOf(i)!==-1&&isFinite(s)){n.style[i]=s+"px";return}n.style[i]=s})}function w(n,t){!n instanceof Element||!t instanceof Element||n.appendChild(t)}function Z(n){if(n instanceof NodeList||Array.isArray(n)){Array.from(n).forEach(Z);return}!n instanceof Element||!n.parentNode instanceof Element||n.parentNode.removeChild(n)}function qi(n){if(!n instanceof Element)return;let{length:t}=n.childNodes;for(;t>0;)n.removeChild(n.lastChild),t-=1}function Qi(n,t){return n instanceof Element&&n.classList.contains(t)}function Qt(n,t){(Array.isArray(t)?t:t.split(" ")).forEach(i=>{n.classList.contains(i)||n.classList.add(i)})}function Yt(n,t,e){const i=Qi(n,t);e=typeof e=="boolean"?e:!i,e!==i&&(e?Qt(n,t):ee(n,t))}function ee(n,t){(Array.isArray(t)?t:t.split(" ")).forEach(i=>{n.classList.contains(i)&&n.classList.remove(i)})}function As(n,t){const e={Element};function i(){return Array.from(document.querySelectorAll(t)).includes(this)}return(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||i).call(n,t)}function Is(n,t,e,i=!1){let s=document.querySelector("#"+t);i&&s&&(Z(s),s=null),s||(s=S("style"),s.type="text/css",s.id=t),s.styleSheet?s.styleSheet.cssText+=e:s.appendChild(document.createTextNode(e)),w(n,s)}const Cs="stage--muted",Ps="stage--waiting",xs="stage--playing",Os="stage--paused",Ls="stage--stopped",ke="native",Ge="hls",Ke="dash",Xe="youtube",Ze="vimeo",Yi="flv",Rs="ws",Gi="webtorrent",Ki="facebook",Ns=n=>{},Xi=/maybe|probably/i,Zi=document.createElement("video"),Ms=(()=>Xi.test(Zi.canPlayType("application/dash+xml")))(),Bs=(()=>["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return Xi.test(Zi.canPlayType(t))}))(),Je=n=>/\.m3u8(#|\?|$)/i.exec(n)&&!Bs?Ge:/\.mpd(#|\?|$)/i.exec(n)&&!Ms?Ke:n.indexOf("ws://")!==-1?Rs:/you(tube|tu)\.(com|be)\//i.exec(n)?Xe:n.indexOf("vimeo.com/")!==-1?Ze:/\.flv(#|\?|$)/i.exec(n)?Yi:/facebook\.com/i.exec(n)?Ki:/\.torrent(#|\?|$)/i.exec(n)?Gi:ke,Us=n=>{let e=Ns().exec(n);return e&&e.length?e[1]:null};function wt(n,t,e){return Math.max(Math.min(n,e),t)}function Vs(n,t){for(var e=[],i=0,s,r="",o=0;o<256;o++)e[o]=o;for(o=0;o<256;o++)i=(i+e[o]+t.charCodeAt(o%t.length))%256,s=e[o],e[o]=e[i],e[i]=s;o=0,i=0;for(var u=0;u<n.length;u++)o=(o+1)%256,i=(i+e[o])%256,s=e[o],e[o]=e[i],e[i]=s,r+=String.fromCharCode(n.charCodeAt(u)^e[(e[o]+e[i])%256]);return r}function Ds(n,t){return n&&n.indexOf("#")===0?Vs(atob(n.substr(1)),t):n}const Fs=n=>n===""||n===0||n==="0"||n===null||n===!1||n instanceof Array&&n.length===0,_s=n=>typeof n!="undefined";function $s(n,t,e){return Fs(n)?e:_s(n[t])?n[t]:e}function x(n,t,e){if(typeof t=="number"&&(t=[t]),!t||t.length===0)return n;if(n===null)return e;if(typeof t=="string")return x(n,t.split("."),e);let i=Hs(t[0]),s=$s(n,i,void 0);return s===void 0?e:t.length===1?s:x(n[i],t.slice(1),e)}function Hs(n){let t=parseInt(n);return t.toString()===n?t:n}const Ws=(()=>{let n=!1;try{const t=Object.defineProperty({},"passive",{get(){return n=!0,null}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return n})();function ti(n,t,e,i=!1,s=!0,r=!1){if(!n||!("addEventListener"in n)||!e instanceof Function)return;this.eventListeners||(this.eventListeners=[]);const o=t.split(" ");let u=r;Ws&&(u={passive:s,capture:r}),o.forEach(l=>{this&&this.eventListeners&&i&&this.eventListeners.push({element:n,type:l,callback:e,options:u}),n[i?"addEventListener":"removeEventListener"](l,e,u)})}function G(n,t="",e,i=!0,s=!1){ti.call(this,n,t,e,!0,i,s)}function gt(n,t="",e,i=!0,s=!1){ti.call(this,n,t,e,!1,i,s)}function zs(n,t="",e,i=!0,s=!1){const r=(...o)=>{gt(n,t,r,i,s),e.apply(this,o)};ti.call(this,n,t,r,!0,i,s)}function ei(n,t="",e=!1,i={}){if(!n instanceof Element||t==="")return;const s=new CustomEvent(t,{bubbles:e,detail:Object.assign({},i)});n.dispatchEvent(s)}function Ji(){this&&this.eventListeners&&(this.eventListeners.forEach(n=>{const{element:t,type:e,callback:i,options:s}=n;t.removeEventListener(e,i,s)}),this.eventListeners=[])}function ie(n,t){return new Promise((e,i)=>{let s=document.createElement("script");s.type="text/javascript",s.src=t,s.addEventListener("load",()=>e(!0),!1),s.addEventListener("error",()=>e(!1),!1),n.appendChild(s)})}function ii(n){return n&&Array.from(document.getElementsByTagName("script")).some(t=>t.src===n)}const ne="unstarted",we="ended",se="pause",re="play",Ee="waiting",tn="cued",en={"-1":ne,0:we,1:re,2:se,3:Ee,5:tn},js=[se,Ee,we],qs=[ne,re,tn],Qs=[re,se],nn="https://www.youtube.com/iframe_api",ae=[];class Ys extends Tt{constructor(t,e,i){super(),this.type="youtube",this.url=e,this.containerId=t,this.api=null,this.player=null,this.videoId=this.getYoutubeIdByUrl(e),this.queue=[],this.qualities=[],this.ready=!1,this.interval=null,this.seeking=!1,this.stageFirst=!1,this.options=i,this.on(re,this.onTimeUpdateStartInterval.bind(this)),this.on(ne,this.onTimeUpdateStopInterval.bind(this)),this.on(we,this.onTimeUpdateStopInterval.bind(this)),this.on(se,this.onTimeUpdateStopInterval.bind(this)),this.on(Ee,this.onTimeUpdateStopInterval.bind(this)),this.loadIframeAPI((s,r)=>{this.api=r,this.load()})}get currentSrc(){return this.ready?this.player.getVideoUrl():this.url}get ended(){return this.ready?this.currentTime===this.duration:!1}get loop(){return!1}set loop(t){}get paused(){if(this.ready){let t=this.player.getPlayerState();return t<1||t===2}return!0}get buffered(){return this.ready&&this.player.getVideoLoadedFraction()||0}get duration(){return this.ready&&this.player.getDuration()||0}get muted(){return this.isMuted()}set muted(t){this.ready&&(t?this.player.mute():this.player.unMute(),this.trigger("volumechange"))}set currentTime(t){this.seek(t)}get currentTime(){return this.ready&&this.player.getCurrentTime()||0}set volume(t){this.ready?this.player.setVolume(Math.ceil(t*100))&&this.trigger("volumechange"):this.queueCommand("setVolume",t)}get playbackRate(){return this.ready?this.player.getPlaybackRate():1}set playbackRate(t){return this.ready?this.player.setPlaybackRate(t):this.queueCommand("setSpeed",t)}get videoWidth(){let t=this.getFrame();return t&&t.tagName==="IFRAME"?parseInt(t.getAttribute("width")):0}get videoHeight(){let t=this.getFrame();return t&&t.tagName==="IFRAME"?parseInt(t.getAttribute("height")):0}get volume(){return this.ready?this.player.getVolume()/100:0}setQuality(t){if(this.ready){let e=this.getQuality(),i=t.originName;e!==i&&this.player.setPlaybackQuality(i)}else this.queueCommand("setQuality",t)}getQuality(){return this.ready?this.player.getPlaybackQuality():"auto"}setSpeed(t){this.playbackRate=t}setVolume(t){this.volume=t}getHost(){if(this.options.noCookie)return"https://www.youtube-nocookie.com";if(window.location.protocol==="http:")return"http://www.youtube.com"}seek(t){this.ready?(this.player.seekTo(t,!0),this.seeking=!0,this.trigger("seeking")):this.queueCommand("seek",t)}isMuted(){return this.ready&&this.player.isMuted()||!1}pause(){this.ready?this.player.pauseVideo():this.queueCommand("pause")}stop(){this.ready?this.player.stopVideo():this.queueCommand("stop")}play(){return new Promise((t,e)=>{if(this.ready)return this.player.playVideo(),this.setVolume(this.player.getVolume()),t()})}loadIframeAPI(t){if(window.YT&&typeof window.YT.Player=="function")return t(null,window.YT);ae.push(t),ii(nn)||ie(document.body,nn).catch(i=>{for(;ae.length;)ae.shift()(i)}),typeof window.onYouTubeIframeAPIReady!="function"&&(window.onYouTubeIframeAPIReady=()=>{for(;ae.length;)ae.shift()(null,window.YT)})}queueCommand(t,...e){this.queue.push([t,e])}flushQueue(){for(;this.queue.length;){const t=this.queue.shift();this[t[0]].apply(this,t[1])}}getYoutubeIdByUrl(t){const e=/^.*(youtu\.be\/|vi?\/|u\/\w\/|embed\/|\?vi?=|\&vi?=)([^#\&\?]*).*/,i=t.match(e);return i&&i[2]?i[2]:null}load(){if(!!this.api){if(!this.player){this.create();return}this.player.loadVideoById(this.videoId,0),this.stageFirst&&setTimeout(()=>{this.pause(),this.stop()},100)}}create(){if(this.player)return;let t={videoId:this.videoId,host:this.getHost(),playerVars:{html5:1,color:"while",showinfo:0,autoplay:0,controls:0,playsInline:1,enablejsapi:1,rel:1,fs:0,modestbranding:1,disablekb:1,widget_referrer:window?window.location.href:null}};t=Object.assign(t,this.options),t.events={onReady:this.onReady.bind(this),onStateChange:this.onStateChange.bind(this),onPlaybackQualityChange:this.onPlaybackQualityChange.bind(this),onPlaybackRateChange:this.onPlaybackRateChange.bind(this),onError:this.onError.bind(this)},this.player=new this.api.Player(this.containerId,t)}destroy(){this.player&&(this.player.stopVideo&&this.player.stopVideo(),this.player.destroy(),this.player=null),this.isUpdateQuality=!1,this.ready=!1,this.videoId=null,this.onTimeUpdateStopInterval(),this.off(re,this.onTimeUpdateStartInterval),this.off(ne,this.onTimeUpdateStopInterval),this.off(we,this.onTimeUpdateStopInterval),this.off(se,this.onTimeUpdateStopInterval),this.off(Ee,this.onTimeUpdateStopInterval);let t=this.getFrame();t&&Z(t)}getState(){return this.ready&&en[this.player.getPlayerState()]||ne}getFrame(){return document.getElementById(this.containerId)}updateSize(t,e){this.ready?this.player.setSize(t,e):this.queueCommand("updateSize",t,e)}setPlayerSize(){this.getFrame()}onError(t){console.log("onError",t)}onPlaybackQualityChange(t){this.trigger("playbackQualityChange",t.data)}onPlaybackRateChange(t){this.trigger("playbackRateChange",t.data)}onUpdateQualities(){if(this.isUpdateQuality)return!0;let t=this.player.getAvailableQualityLevels();t.length&&(t.reverse(),this.qualities=t,this.isUpdateQuality=!0,this.trigger("update-qualities"))}onStateChange(t){let e=t.data,i=en[e];this.onUpdateQualities(),Qs.includes(i)&&(this.seeking=!1,this.trigger("seeked")),js.includes(i)&&this.onTimeUpdate(),this.trigger(i),qs.includes(i)&&this.onTimeUpdate()}onReady(){this.ready=!0,this.load(),this.flushQueue()}onTimeUpdate(){this.trigger("timeupdate")}onTimeUpdateStartInterval(){this.interval=setInterval(()=>this.onTimeUpdate(),1e3)}onTimeUpdateStopInterval(t){this.buffered===1&&this.trigger("canplaythrough"),clearInterval(this.interval),this.interval=null}}const sn="https://player.vimeo.com/api/player.js";class Gs extends Tt{constructor(t,e,i){super(),this.type="vimeo",this.url=e,this.containerId=t,this.container=document.getElementById(t),this.api=null,this.player=null,this.queue=[],this.ready=!1,this.paused=!1,this.interval=null,this.seeking=!1,this.stageProgress=0,this.stageVolume=.7,this.stagePlaybackRate=1,this.stageMuted=!1,this.stageFirst=!1,this.duration=0,this.options=i,this.loadIframeAPI((s,r)=>{this.api=r,this.load()})}get loop(){return!1}set loop(t){}get playbackRate(){return this.stagePlaybackRate}set playbackRate(t){this.ready&&this.player.setPlaybackRate(t).then(()=>{this.currentPlaybackRate=t,this.trigger("ratechange")}).catch(e=>{})}get muted(){return this.stageMuted}set muted(t){if(this.ready){const e=typeof t=="boolean"?t:!1;this.player.setVolume(e?0:this.volume).then(()=>{this.currentMuted=e,this.trigger("volumechange")})}}get volume(){return this.stageVolume}set volume(t){this.ready&&this.player.setVolume(t).then(()=>{this.stageVolume=t,this.trigger("volumechange")})}get currentTime(){return this.stageProgress}set currentTime(t){this.seeking=!0,this.trigger("seeking");const e=this.paused,i=this.player,s=this.volume;Promise.resolve(e&&i.setVolume(0)).then(()=>i.setCurrentTime(t)).then(()=>e&&i.pause()).then(()=>e&&i.setVolume(s)).catch(()=>{})}get ended(){return this.duration>0&&this.currentTime===this.duration}get videoWidth(){let t=this.getFrame();return t&&t.tagName==="IFRAME"?parseInt(t.getAttribute("width")):0}get videoHeight(){let t=this.getFrame();return t&&t.tagName==="IFRAME"?parseInt(t.getAttribute("height")):0}setQuality(t){}getQuality(){return"auto"}loadIframeAPI(t){if(window.Vimeo&&typeof window.Vimeo.Player=="function")return t(null,window.Vimeo);ii(sn)||ie(document.body,sn).then(()=>{this.loadIframeAPI(t)}).catch(i=>{this.loadIframeAPI(t)})}load(){if(!!this.api&&!this.player){this.create();return}}play(){return this.player.play()}pause(){return this.player.pause()}stop(){this.pause(),this.currentTime=0}create(){this.player=new this.api.Player(this.containerId,{url:this.url,width:0,height:0,playsinline:!1,background:!0,byline:!1,autoplay:!1,autopause:!1,portrait:!1,speed:!1,loop:!1,title:!1,controls:!1}),this.player.ready().then(()=>{this.ready=!0}),this.player.on("loaded",this.onLoaded.bind(this)),this.player.on("play",this.onPlay.bind(this)),this.player.on("pause",this.onPause.bind(this)),this.player.on("seeked",this.onSeeked.bind(this)),this.player.on("ended",this.onEnded.bind(this)),this.player.on("timeupdate",this.onTimeupdate.bind(this))}destroy(){this.player&&(this.player.stop&&this.player.stop(),this.player.destroy(),this.player=null),this.ready=!1,this.container&&(Z(this.container),this.container=null)}getFrame(){let t=document.getElementById(this.containerId);return t&&t.tagName!=="IFRAME"?t.querySelector("iframe"):t}setPlayerSize(){}onTimeupdate(t){this.seeking=!1,this.stageProgress=t.seconds,this.trigger("timeupdate")}onSeeked(t){this.seeking=!1,this.trigger("seeked")}onEnded(t){this.trigger("ended")}onLoaded(t){let e=this.getFrame();e!==null&&A(e,{width:"100%",height:"100%"}),this.player.getCurrentTime().then(i=>{this.stageProgress=i,this.trigger("timeupdate")}),this.volume=this.stageVolume,this.player.getDuration().then(i=>{this.duration=i,this.trigger("durationchange")}),this.player.getPaused().then(i=>{this.paused=!i,i||this.trigger("playing")})}onPlay(t){this.paused=!1,this.trigger("play"),this.trigger("playing")}onPause(t){this.paused=!0,this.trigger("pause")}}const rn="https://connect.facebook.net/en_US/sdk.js";class Ks extends Tt{constructor(t,e,i){super(),this.type="facebook",this.url=e,this.containerId=t,this.container=document.getElementById(t),this.playerId="facebook-player-"+t,this.api=null,this.player=null,this.videoId=this.getFacebookIdByUrl(e),this.duration=0,this.paused=!0,this.stageFirst=!0,this.loadIframeAPI((s,r)=>{this.api=r,this.load()})}get loop(){return!1}set loop(t){}get playbackRate(){return 1}set playbackRate(t){}set volume(t){this.player&&this.player.setVolume(t),this.trigger("volumechange")}get volume(){return this.player&&this.player.getVolume()||1}set currentTime(t){this.player&&this.player.seek(t)}get currentTime(){return this.player&&this.player.getCurrentPosition()||0}set muted(t){this.player&&(t?this.player.mute():this.player.unmute(),this.trigger("volumechange"))}get muted(){return this.player&&this.player.isMuted()}get ended(){return this.duration>0&&this.currentTime===this.duration}get videoWidth(){let t=this.getFrame();return t&&t.tagName==="IFRAME"?parseInt(t.getAttribute("width")):0}get videoHeight(){let t=this.getFrame();return t&&t.tagName==="IFRAME"?parseInt(t.getAttribute("height")):0}getFrame(){let t=document.getElementById(this.containerId);return t&&t.tagName!=="IFRAME"?t.querySelector("iframe"):t}getFacebookIdByUrl(t){}loadIframeAPI(t){if(window.FB&&typeof window.FB!==void 0)return t(null,window.FB);ii(rn)||ie(document.body,rn).then(()=>{window.FB.init({appId:"",xfbml:!0,version:"v3.2"}),this.loadIframeAPI(t)}).catch(i=>{this.loadIframeAPI(t)})}load(){if(!!this.api&&!this.player){this.create();return}}create(){Qi(this.container,"fb-video")||(lt(this.container,{class:"fb-video","data-href":this.url,"data-autoplay":!1,"data-allowfullscreen":!1,"data-controls":!1}),A(this.container,{position:"absolute",height:"auto",top:"50%",left:0,transform:"translateY(-50%)"}),window.FB.XFBML.parse(),this.api.Event.subscribe("xfbml.ready",t=>{t.type==="video"&&t.id===this.containerId&&(this.player=t.instance,this.onReady())}))}destroy(){this.player&&(this.stop(),this.subscribeStartedPlaying.release("startedPlaying"),this.subscribeStartedPlaying=null,this.subscribePaused.release("paused"),this.subscribePaused=null,this.subscribeFinishedPlaying.release("finishedPlaying"),this.subscribeFinishedPlaying=null,this.subscribeFinishedBuffering.release("FinishedBuffering"),this.subscribeFinishedBuffering=null,this.subscribeStartedBuffering.release("startedBuffering"),this.subscribeStartedBuffering=null,this.subscribeError.release("error"),this.subscribeError=null,this.player=null),this.videoId=null,this.onTimeUpdateStopInterval(),this.ready=!1,this.container&&(Z(this.container),this.container=null)}play(){this.player&&this.player.play()}pause(){this.player&&this.player.pause()}stop(){this.currentTime=0,this.pause(),this.trigger("stop")}setPlayerSize(t){}onStartedPlaying(t){this.duration=this.player.getDuration(),this.paused=!1,this.onTimeUpdateStartInterval(),this.trigger("play")}onPause(t){this.paused=!0,this.onTimeUpdateStopInterval(),this.trigger("pause")}onEnded(t){this.paused=!1,this.onTimeUpdateStopInterval(),this.trigger("ended"),this.trigger("pause")}onBuffer(t){this.trigger("timeupdate"),this.trigger("progress")}onBufferEnd(t){this.trigger("timeupdate"),this.trigger("progress")}onError(t){console.log("onError",t),this.onTimeUpdateStopInterval()}onReady(){this.subscribeStartedPlaying=this.player.subscribe("startedPlaying",this.onStartedPlaying.bind(this)),this.subscribePaused=this.player.subscribe("paused",this.onPause.bind(this)),this.subscribeFinishedPlaying=this.player.subscribe("finishedPlaying",this.onEnded.bind(this)),this.subscribeStartedBuffering=this.player.subscribe("startedBuffering",this.onBuffer.bind(this)),this.subscribeFinishedBuffering=this.player.subscribe("finishedBuffering",this.onBufferEnd.bind(this)),this.subscribeError=this.player.subscribe("error",this.onError.bind(this)),this.duration=this.player.getDuration()}onTimeUpdate(){this.trigger("timeupdate"),this.trigger("durationchange")}onTimeUpdateStartInterval(){this.interval=setInterval(()=>this.onTimeUpdate(),250)}onTimeUpdateStopInterval(){clearInterval(this.interval),this.interval=null}}const Gt=navigator.userAgent,Xs=!!document.documentMode,Zs=Gt.includes("Edge"),Js="WebkitAppearance"in document.documentElement.style&&!/Edge/.test(Gt),an=/iP(hone|od)/gi,on=/iP(hone|od|ad)/gi,tr=an.test(Gt)||!!navigator.platform&&an.test(navigator.platform),ln=on.test(Gt)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1&&!window.MSStream||!!navigator.platform&&on.test(navigator.platform),hn=/android/i.test(Gt),er=/safari/i.test(Gt),et={isIE:Xs,isEdge:Zs,isWebkit:Js,isIPhone:tr,isIos:ln,isAndroid:hn,isMobile:ln||hn,isSafari:er};function ir(n,t=!1){const{height:e,width:i,bitrate:s}=n;let r=e;if(e<=120?r="120":e<180?r="160":e<200?r="180":e>=200&&e<=300?r="240":e>300&&e<=400?r="360":e>400&&e<=500?r="480":e>500&&e<=600?r="540":e>600&&e<=900?r="720":e>900&&e<=1200?r="1080":e>1200&&e<=1800?r="1440":e>1800&&(r="2160"),i===320&&e<=180?r="180":i===426&&e<=240?r="240":i===640&&e<=360?r="360":i===854&&e<=480?r="480":i===1280&&e<=720?r="720":i===1920&&e<=1080?r="1080":i===2560&&e<=1440?r="1440":i===3840&&e<=2160&&(r="2160"),r=r+"p",t&&s){let o=Math.floor(s/1e3);r=`${r} ${o}`}return r}function nr(n){let e={tiny:"160",small:"240",medium:"360",large:"480",hd720:"720",hd1080:"1080",hd1440:"1440"}[n];return e?e+"p":n}const ni={ACTIVE:"picture-in-picture",INACTIVE:"inline"},sr={lowBattery:!1,blobLoader:!1,blobLoaderCache:!1,preload:"auto",crossorigin:!1,playsinline:!0,controls:!1,muted:!1,autoplay:!1,seekTime:10,volume:.5,poster:"",loop:!1,dashOptions:{}};class rr extends Tt{constructor(t,e={}){super(),this.app=t,this.hls=null,this.isHLS=!1,this.flvjs=null,this.dash=null,this.isDASH=!1,this.embed=null,this.torrentId=null,this.webtorrent=null,this.fileType=null,this.src=null,this.nativeSrc=null,this.el=null,this.qualityIndex=0,this.lock=!1,this.ready=!1,this.qualities=[],this.mediaEvents={},this.customQuality=!1,this.websocket=null,this.observer=null,this.mediaSource=null,this.options=Object.assign({},sr,e)}set pip(t){if(!this.isPipSupported())return;const e=typeof t=="boolean"?t:!this.pip;this.tech.webkitSetPresentationMode instanceof Function&&this.tech.webkitSetPresentationMode(e?ni.ACTIVE:ni.INACTIVE),this.tech.requestPictureInPicture instanceof Function&&(!this.pip&&e?this.tech.requestPictureInPicture().catch(()=>{}):this.pip&&!e&&document.exitPictureInPicture().catch(()=>{}))}get pip(){return this.isPipSupported()?this.tech.webkitPresentationMode?this.tech.webkitPresentationMode===ni.ACTIVE:this.tech===document.pictureInPictureElement:null}get currentPercent(){return 100*this.currentTime/this.duration}set currentTime(t){if(!this.duration)return;const e=typeof t=="number"&&t>0;this.tech.currentTime=e?Math.min(t,this.duration):0}get tech(){return this.embed?this.embed:this.el}get currentTime(){return Number(this.tech.currentTime)}get waiting(){return Boolean(this.isWait)}set waiting(t){this.isWait=t}get buffered(){const{buffered:t}=this.tech;return typeof t=="number"?t:t&&t.length&&this.duration>0?t.end(0)/this.duration:0}get seeking(){return Boolean(this.tech.seeking)}get duration(){const t=parseFloat(this.options.duration),e=(this.tech||{}).duration,s=t||(typeof e!="number"||e===1/0?0:e);return isFinite(s)?s:0}set volume(t){if(!isFinite(t))return;let e=t;typeof e=="string"&&(e=Number(e)),typeof e!="number"&&(e=this.options.value),e=wt(e,0,1),this.options.volume=e,this.tech.volume=e,this.muted&&e>0&&(this.muted=!1)}get volume(){return Number(this.tech.volume)}set muted(t){let e=t;typeof e!="boolean"&&(e=this.options.muted),this.options.muted=e,this.tech.muted=e}get muted(){return Boolean(this.tech.muted)}get playing(){return Boolean(!this.paused&&!this.ended)}get paused(){return Boolean(this.tech.paused)}get stopped(){return Boolean(this.paused&&this.currentTime===0)}get ended(){return Boolean(this.tech.ended)}get loop(){return Boolean(this.tech.loop)}set loop(t){this.tech.loop=typeof t=="boolean"?t:this.loop}set speed(t){!t||(t=wt(t,.1,2),this.tech.playbackRate=t)}get speed(){return this.tech.playbackRate}get ratio(){}set ratio(t){}init(){this.el=S("video",{}),this.updateMediaOptions(),this.volume=this.options.volume,this.muted=this.options.muted,w(this.app.getElContainerWrapper(),this.el)}updateMediaOptions(){this.options.crossorigin&&this.el.setAttribute("crossorigin",""),this.options.autoplay&&this.el.setAttribute("autoplay",""),this.options.loop&&this.el.setAttribute("loop",""),this.options.preload&&this.el.setAttribute("preload",this.options.preload),this.options.muted&&this.el.setAttribute("muted",""),this.options.playsinline&&(this.el.setAttribute("playsinline",""),this.el.setAttribute("webkit-playsinline","")),this.options.controls!==void 0&&(this.el.controls=this.options.controls)}initEvents(){this.mediaEvents={},Object.keys(ji).forEach(t=>{const e=ji[t];this.mediaEvents[t]=i=>{e.call(this,i)}}),Object.keys(this.mediaEvents).forEach(t=>{this.embed||(this.el.removeEventListener(t,this.mediaEvents[t]),this.el.addEventListener(t,this.mediaEvents[t])),this.embed&&(this.embed.off(t,this.mediaEvents[t]),this.embed.on(t,this.mediaEvents[t]))}),this.embed&&this.embed.on("update-qualities",this.onEmbedUpdateQualities.bind(this))}removeEvents(){Object.keys(this.mediaEvents).forEach(t=>{this.el.removeEventListener(t,this.mediaEvents[t]),this.embed&&this.embed.off(t,this.mediaEvents[t])}),this.embed&&this.embed.off("update-qualities",this.onEmbedUpdateQualities.bind(this))}swapPreload(){lt(this.el,{preload:"metadata"})}reset(){this.el&&this.removeEvents(),this.qualities=[],this.isDASH&&this.dash&&(this.dash.reset(),this.isDASH=!1,this.dash=null),this.isHLS&&this.hls&&(this.hls.destroy(),this.isHLS=!1,this.hls=null),this.webtorrent&&(this.webtorrent.destroy(),this.webtorrent=null,this.torrentId=null),this.flvjs&&(this.flvjs.unload(),this.flvjs.detachMediaElement(),this.flvjs.destroy(),this.flvjs=null),this.embed&&(this.embed.destroy(),this.embed=null),this.el&&Z(this.el),this.init()}initObserver(){}parseQualitiesByUrl(t){this.qualities=[],t.split(",").forEach((e,i)=>{let s=e.indexOf("["),r=e.indexOf("]");if(s!==-1&&r!==-1&&s===0){let o=e.substr(s+1,r-1),u=e.substr(r+1);this.qualities.push({name:o,link:u,index:i})}else{let o="auto";this.qualities.push({name:o,link:e,index:i})}})}getQualityByIndex(t){return t>this.qualities.length-1&&(t=this.qualities.length-1),this.qualities[t]}getQualities(){return this.qualities}changeQualityByIndex(t){let e=this.getQualityByIndex(t);!e||(this.customQuality?this.changeQualityNative(e):this.isDASH?this.changeQualityDash(e):this.isHLS?this.changeQualityHls(e):this.embed&&(this.qualityIndex=e.index,this.embed.setQuality(e)),this.app.setStorageValue("quality",e.index))}changeQualityNative(t){if(this.qualityIndex=t.index,t.link){const e=this.currentTime,i=this.speed,s=this.playing;return this.fileType=Je(t.link),this.fileType===ke?this.nativeSrc=t.link:this.src=t.link,this.initFileTypes(),this.initEvents(),(e>0||s)&&zs.call(this,this.el,"loadedmetadata",()=>{this.currentTime=e,this.speed=i,s&&this.play()}),!0}return!1}changeQualityHls(t){if(this.isHLS){let e=t.index;return e===this.hls.levels.length?(e=-1,this.hls.autoLevelCapping=-1):this.hls.nextLevel=e,e===-1&&(this.qualityIndex=this.hls.loadLevel),!0}return!1}changeQualityDash(t){if(this.isDASH){let e=t.index;return this.dash.setQualityFor("video",e),this.dash.setQualityFor("audio",e),!0}return!1}initFileTypes(){if(this.fileType===ke)return this.initNative();if(this.fileType===Ke)return this.initDASH();if(this.fileType===Ge)return this.initHLS();if(this.fileType===Xe)return this.initYoutube();if(this.fileType===Ki)return this.initFacebook();if(this.fileType===Ze)return this.initVimeo();if(this.fileType===Yi)return this.initFLV();if(this.fileType===Gi)return this.initWebTorrent()}setSrc(t){let e=x(this.app.options,"modules.security",{});e.enable&&(t=Ds(t,x(e,"key",""))),this.src!==t&&t&&(this.src=t,this.nativeSrc=t,this.reset(),this.customQuality=t.split(",").length>1,this.customQuality?(this.parseQualitiesByUrl(t),this.changeQualityByIndex(0)):(this.fileType=Je(t),this.initFileTypes(),this.initEvents(),this.changeQualityByIndex(0)),this.trigger("update-menu-quality"))}setPoster(t){this.el&&t&&t.length&&lt(this.el,{poster:t})}isMediaSourceSupported(){const t='video/mp4; codecs="avc1.42E01E, mp4a.40.2"';let e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,i=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,s=e&&typeof e.isTypeSupported=="function"&&e.isTypeSupported(t),r=!i||i.prototype&&typeof i.prototype.appendBuffer=="function"&&typeof i.prototype.remove=="function";return s&&r}isPipSupported(){return et.isIPhone?!1:this.tech.webkitSupportsPresentationMode&&typeof this.tech.webkitSetPresentationMode=="function"?!0:!!(document.pictureInPictureEnabled&&!this.tech.disablePictureInPicture)}isDASHSupported(){return window.dashjs!==void 0&&window.MediaSource}isFlvSupported(){return window.flvjs!==void 0&&window.flvjs.isSupported()}isHLSSupported(){return window.Hls!==void 0}isWebTorrentSupported(){return window.WebTorrent!==void 0&&window.WebTorrent.WEBRTC_SUPPORT}initNative(){return this.el.src=this.nativeSrc,Promise.resolve()}async initWebTorrent(){if(!window.WebTorrent){let s="https://cdnjs.cloudflare.com/ajax/libs/webtorrent/0.107.17/webtorrent.min.js";if(!await this.installJs(s)){const o="webtorrent.js not installed";this.createError(o);return}}if(!this.isWebTorrentSupported()){const s="protocol WebTorrent not supported by your device or browser";this.createError(s);return}const t=this.src,e={},i=new window.WebTorrent(e);this.el.src="",this.el.preload="metadata",this.torrentId=t,i.add(t,s=>{s.files.find(o=>String(o.name).endsWith(".mp4")).renderTo(this.el,{autoplay:Boolean(this.options.autoplay),controls:!1})}),this.webtorrent=i}createError(t){this.trigger(be,new CustomEvent(be,{detail:t}))}async installJs(t){try{if(await ie(document.body,t))return!0}catch(e){console.error(e)}return console.warn(`install js script error ${t}`),!1}async initDASH(){if(!window.dashjs){let i="https://cdnjs.cloudflare.com/ajax/libs/dashjs/3.0.0/dash.all.min.js";if(!await this.installJs(i)){console.warn("dash.js not installed");return}}this.dash||(this.dash=window.dashjs.MediaPlayer().create()),this.dash.initialize(this.el,this.src,!1);let e=Object.assign({streaming:{stableBufferTime:60,fastSwitchEnabled:!1,lastBitrateCachingInfo:{enable:!1},lastMediaSettingsCachingInfo:{enable:!1},jumpGaps:!0,abr:{autoSwitchBitrate:{audio:!1,video:!1}}}},this.options.dashOptions);this.dash.updateSettings(e),this.dash.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED,this.onDashStreamInitialized.bind(this)),this.dash.on(dashjs.MediaPlayer.events.TEXT_TRACKS_ADDED,this.onDashTextTracksAdded.bind(this)),this.dash.on(dashjs.MediaPlayer.events.ERROR,this.onDashError.bind(this))}changeAspect(){}async initFLV(){if(!window.flvjs){let e="https://cdnjs.cloudflare.com/ajax/libs/flv.js/1.5.0/flv.min.js";if(!await this.installJs(e)){console.warn("flv.js not installed");return}}if(!this.isFlvSupported()){console.warn("protocol FLV not supported");return}const t={type:"flv",url:this.src};this.flvjs=window.flvjs.createPlayer(t),this.flvjs.attachMediaElement(this.el),this.flvjs.load()}initFacebook(){if(this.embed)return;let t=this.initEmbedContainer("fbplayer");this.embed=new Ks(t,this.src,{}),this.syncEmbedStageFirst()}initYoutube(){if(this.embed)return;let t=this.initEmbedContainer("ytplayer");this.embed=new Ys(t,this.src,{}),this.syncEmbedStageFirst()}initEmbedContainer(t){let e=t+new Date().getTime().toString(16).slice(2,8),s=S("div",{id:e,style:"position: relative; width:100%;height: 100%;"});return w(this.app.getElContainerWrapper(),s),A(this.el,{display:"none"}),e}initVimeo(){if(this.embed)return;let t=this.initEmbedContainer("vmplayer");const e=this.app.getElContainerWrapper().getBoundingClientRect();this.embed=new Gs(t,this.src,{width:e.width,height:e.height}),this.syncEmbedStageFirst()}syncEmbedStageFirst(){this.embed&&(this.embed.stageFirst=Boolean(this.app.stageFirst))}async initHLS(){if(!window.Hls){let e="https://cdnjs.cloudflare.com/ajax/libs/hls.js/0.12.4/hls.min.js";if(!await this.installJs(e)){console.warn("hls.js not installed");return}}let t={ebug:!0,autoStartLoad:!0,maxBufferLength:60,maxMaxBufferLength:60,manifestLoadingMaxRetry:3,manifestLoadingTimeOut:6e4,fragLoadingTimeOut:6e4,enableWorker:!1};this.hls=new window.Hls(t),this.hls.loadSource(this.src),this.hls.attachMedia(this.el),this.hls.on(Hls.Events.MANIFEST_PARSED,this.onHlsManifestParsed.bind(this)),this.hls.on(Hls.Events.LEVEL_SWITCHED,this.onHlsLevelSwitched.bind(this))}parseQuality(t){t&&t.length&&t.forEach((e,i)=>{let s=t.filter(r=>e.width===r.width&&e.height===r.height);this.qualities.push({name:ir(e,s.length>1),link:null,index:e.qualityIndex!==void 0?e.qualityIndex:i})})}changeStoredQuality(){let t=this.app.getStorageValue("quality");isFinite(t)&&t>=this.qualities.length&&this.changeQualityByIndex(t)}destroy(){this.off(),this.removeEvents(),this.embed&&(this.embed.destroy(),this.embed=null),Z(this.el),this.el=null}load(){this.tech.load()}toggleMute(){this.muted=!this.muted}increaseVolume(t){const e=this.tech.muted?0:this.volume;this.volume=e+(typeof t=="number"?t:0)}decreaseVolume(t){this.increaseVolume(-t)}airplay(){window.WebKitPlaybackTargetAvailabilityEvent instanceof Function&&this.tech.webkitShowPlaybackTargetPicker&&this.tech.webkitShowPlaybackTargetPicker()}togglePlay(t){(typeof t=="boolean"?t:!this.playing)?this.play():this.pause()}pause(){if(!this.playing||!this.tech.play instanceof Function)return null;this.tech.pause(),this.trigger("pause")}play(){let t=this.tech.play();return t!==void 0&&t.then(()=>(this.trigger("play"),Promise.resolve(null))).catch(e=>Promise.resolve(e)),Promise.resolve(null)}stop(){typeof this.tech.stop=="function"?this.tech.stop():(this.pause(),this.restart()),this.trigger("stop")}restart(){this.currentTime=0,this.trigger("restart")}rewind(t){this.currentTime=this.currentTime-(typeof t=="number"?t:this.options.seekTime)}forward(t){this.currentTime=this.currentTime+(typeof t=="number"?t:this.options.seekTime)}updateUiStage(){let t=this.app.getElContainerWrapper();Yt(t,Cs,this.muted),Yt(t,xs,this.playing),Yt(t,Os,this.paused),Yt(t,Ls,this.stopped),Yt(t,Ps,this.waiting)}videoWidth(){return this.tech.videoWidth||0}videoHeight(){return this.tech.videoHeight||0}updateEmbedSize(){if(this.embed){const t=this.app.getElContainerWrapper().getBoundingClientRect();this.embed.setPlayerSize({width:t.width,height:t.height})}}onHlsLevelSwitched(t,e){this.qualityIndex=this.hls.loadLevel,this.trigger("update-menu-quality-value")}onHlsManifestParsed(){if(this.isHLS=!0,this.customQuality)return;this.qualities=[];let t=this.hls.levels;t&&t.length&&(this.parseQuality(t),this.qualityIndex=this.hls.loadLevel),this.trigger("update-menu-quality"),this.changeStoredQuality()}onDashTextTracksAdded(t){this.dash.setTextTrack(-1)}onDashError(t){let e="DASH "+t.error+": "+t.event.message+", "+t.event.event;this.createError(e)}onDashStreamInitialized(t){if(this.isDASH=!0,this.customQuality)return;this.qualities=[];let e=this.dash.getBitrateInfoListFor("video");if(e&&e.length){this.parseQuality(e),this.qualityIndex=0;let i=this.dash.getQualityFor("video");isFinite(i)&&(this.qualityIndex=i)}this.trigger("update-menu-quality"),this.changeStoredQuality()}onEmbedUpdateQualities(t){if(!!this.embed&&!this.customQuality){if(this.qualities=[],this.embed.type==="youtube"){let e=this.embed.qualities,i=this.embed.getQuality(),s=e.indexOf(i);isFinite(s)&&s>-1&&(this.qualityIndex=s);for(let r=0,o=e.length;r<o;r++){let u=e[r];this.qualities.push({name:nr(u),originName:u,link:null,index:r})}}this.trigger("update-menu-quality")}}}const ht={PANEL:"panel",PANEL_LEFT:"panel-left",PANEL_RIGHT:"panel-right",LEFT:"left",RIGHT:"right",CENTER:"center",BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LINE:"top-line",TOP:"top",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},un=n=>n.reduce((t,e)=>t+e,0);class ar{constructor(t){this.app=t,this.composition={},this.controlsPosition={}}registerControl(t,e){!e||(this.controlsPosition[e]===void 0&&(this.controlsPosition[e]=[]),this.controlsPosition[e].includes(t)||this.controlsPosition[e].push(t))}getControl(t){return this.app.controls[t]}getControlWidth(t){return this.getControl(t).getOffsetWidth()}getControlHeight(t){return this.getControl(t).getOffsetHeight()}getControlIndent(t){return this.getControl(t).getIndent()}getControlLeftRightPadding(t){let{left:e,right:i}=this.getControlIndent(t);return parseFloat(e)+parseFloat(i)}getComposeControlWidth(t,e,i){let s=this.getControl(e);if(!s||!s.isEnable())return 0;if(s.isPercentSize()){let r=this.getControlsChildWidth(i),o=this.getControlsPercentPadding(i),u=s.getWidthPercent(),l=this.getControlsPercents(i);return(t-r-o)*u/l}return this.getControlLeftRightPadding(e)+this.getControlWidth(e)}getControlNamesByPosition(t){return this.controlsPosition[t]}compose(t){let e=[],i=this.app.getElContainerWrapper().offsetWidth,s=this.getControlNamesByPosition(t),r=0;for(let o=0,u=s.length;o<u;o++){let l=s[o],b=this.getControl(l);if(!b||!b.isEnable())continue;let y=0,T=0;b.options.positionInlineEnable?(T=this.getComposeControlWidth(i,l,s),y=r,r+=T,e.push({controlName:l,offset:y,controlWidth:T})):(T=this.getComposeControlWidth(i,l,[l]),e.push({controlName:l,offset:y,controlWidth:T}))}return e}getControlsPercentPadding(t){let e=[];return t.forEach(i=>{let s=this.getControl(i);s.isPercentSize()&&s.isEnable()&&e.push(this.getControlLeftRightPadding(i))}),un(e)}getControlsPercents(t){let e=[];return t.forEach(i=>{let s=this.getControl(i);s.isPercentSize()&&s.isEnable()&&e.push(s.getWidthPercent())}),un(e)}getControlsChildWidth(t){let e=0;return t.forEach(i=>{let s=this.getControl(i);!s.isPercentSize()&&s.isEnable()&&(e+=this.getControlLeftRightPadding(i)+this.getControlWidth(i))}),e}updateComposingPosition(){let t=this.getControl("panel"),e=this.app.getElContainerWrapper(),i=e.offsetWidth,s=e.offsetHeight,r=i/2,o=s/2;for(let u in this.controlsPosition){let l=this.compose(u);for(let b of l){let{controlName:y,offset:T,controlWidth:k}=b,R=this.getControl(y),E=R.getOffsetHeight();if(!R||!R.isEnable())continue;let I=this.getControlIndent(y),V={position:"absolute"};V.width=k,V.height=E,R.updateContainer(V),["seek","volume"].includes(y)&&R.updateBackgroundSize();let _=this.getControlWidth(y),M=this.getControlHeight(y),N=I.top-I.bottom,z=I.left-I.right;V.left=null,V.right=null,V.top=null,V.bottom=null,[ht.CENTER,ht.TOP,ht.BOTTOM].indexOf(u)!==-1&&(V.left=r+z-_/2),u.indexOf(ht.LEFT)!==-1&&(V.left=T+I.left),[ht.LEFT,ht.RIGHT,ht.CENTER].indexOf(u)!==-1&&(V.top=o+N-M/2),u.indexOf(ht.RIGHT)!==-1&&(V.right=T-I.left),u.indexOf(ht.TOP)!==-1&&(V.top=M/2+N),u.indexOf(ht.BOTTOM)!==-1&&(V.top=s-M/2+N),u===ht.PANEL&&(V.left=T+I.left),u.indexOf(ht.PANEL)!==-1&&(V.top=s-t.getHeight()/2-M/2+N),V.top===void 0&&(V.top=N),R.updateContainer(V)}}}clearComposition(){this.composition={},this.controlsPosition={}}initComposition(){let t=this.app.options.elements;for(let e in t){let{position:i,index:s}=t[e];!i||(this.composition[i]||(this.composition[i]={},this.composition[i].controls=[]),this.composition[i].controls.push({name:e,index:s}))}this.sortComposition()}sortComposition(){for(let t in this.composition)this.composition[t].controls.length&&this.composition[t].controls.sort((e,i)=>e.index-i.index)}}const or=function(n,t,e){let i;const s=()=>{clearTimeout(i),i=null},r=function(){const o=this,u=arguments;let l=function(){i=null,l=null,e||n.apply(o,u)};!i&&e&&n.apply(o,u),clearTimeout(i),i=setTimeout(l,t)};return r.cancel=s,r};class lr{constructor(t){this.app=t,this.resizeObserver=null,this.eventListeners=[],this.debouncedHandler=or(()=>{this.resizeHandler()},100,!1),this.init()}getTarget(){return this.app.getElContainerWrapper()}init(){this.iframe=S("iframe",{style:"position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; z-index: -1000;",tabIndex:-1,"aria-hidden":"true"}),w(this.getTarget(),this.iframe),this.initResizeFrame()}initResizeFrame(){G.call(this,this.iframe.contentWindow,"resize",t=>{this.resizeHandler()})}destroy(){Ji.call(this)}resizeHandler(){this.app.trigger("resize")}}function hr(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}function ur(){if(document.exitFullscreen instanceof Function)return"";let n="";return["webkit","moz","ms"].some(t=>Boolean(document[`${t}ExitFullscreen`]instanceof Function||document[`${t}CancelFullScreen`]instanceof Function)?(n=t,!0):!1),n}class cr{constructor(t){this.isNative=hr(),this.prefix=ur(),this.app=t,this.forceFallback=!1}getMethodName(){return this.prefix==="moz"?"FullScreen":"Fullscreen"}isEnabled(){return!0}getActive(){return this.isEnabled()?(this.prefix?document[`${this.prefix}${this.getMethodName()}Element`]:document.fullscreenElement)===this.getTarget():!1}getTarget(){return this.app.getElContainerWrapper()}getTargetVideo(){return this.app.controls.media.el}enter(){if(!this.isEnabled())return;let t=this.getTarget();et.isIos?(t=this.getTargetVideo(),t.webkitSupportsFullscreen?(console.log("webkitSupportsFullscreen support"),t.webkitEnterFullscreen()):console.log("webkitSupportsFullscreen not support")):this.prefix===""?t.requestFullscreen():this.prefix!==""&&t[`${this.prefix}Request${this.getMethodName()}`]()}exit(){if(!!this.isEnabled()){if(!this.prefix){(document.cancelFullScreen||document.exitFullscreen).call(document);return}if(this.prefix!==""){const t=this.prefix==="moz"?"Cancel":"Exit";document[`${this.prefix}${t}${this.getMethodName()}`]();return}}}toggle(){this.getActive()?this.exit():this.enter()}}const cn="WMPlayer";class dr{constructor(t){this.app=t,this.metrikaId=null}push(t){this.pushGA(t),this.pushYA(t)}pushYA(t){if(window["yaCounter"+this.metrikaId])try{window["yaCounter"+this.metrikaId].reachGoal(cn+" "+t)}catch(e){console.error("YandexMetrika error",e)}}pushGA(t){if(window.ga)try{window.ga("user.send","event",{eventCategory:cn,eventAction:t})}catch(e){console.error("GoogleAnalytics error",e)}}}const pr=n=>{let t=window.location.protocol;return t==="about:"&&(document.referrer?t=document.referrer.split("://")[0]+":":t="https:"),t==="https:"&&n.search(/^http:\/\//i)===0&&(n=n.replace(/^http:\/\//i,"https://")),n},fr=(n,t)=>{let e=new window.XMLHttpRequest;return e.open(n,t,!0),e},oe=(n,t,e,i,s)=>(e===void 0&&(e=!0),i===void 0&&(i=1e4),new Promise((r,o)=>{let u=fr("GET",e?pr(n):n);u.timeout=i,u.withCredentials=!1,Array.isArray(s)&&s.forEach(l=>{let{name:b,value:y}=l;u.setRequestHeader(b,y)}),u.overrideMimeType&&u.overrideMimeType("text/"+t),u.onreadystatechange=function(){if(u.readyState===4)return u.status===200?r(t==="xml"?u.responseXML:t==="json"?JSON.parse(u.responseText):u.responseText):o(new Error("XHRURLHandler: "+u.statusText))},u.send()}));function gr(n){var t=String(n).replace(/^&/,"").replace(/&$/,"").split("&"),e=t.length,i,s,r,o,u,l,b,y,T,k,R,E,I,V,_={},M=function(z){return decodeURIComponent(z.replace(/\+/g,"%20"))};for(i=0;i<e;i++){for(T=t[i].split("="),k=M(T[0]),R=T.length<2?"":M(T[1]);k.charAt(0)===" ";)k=k.slice(1);if(k.indexOf("\0")>-1&&(k=k.slice(0,k.indexOf("\0"))),k&&k.charAt(0)!=="["){for(I=[],E=0,s=0;s<k.length;s++)if(k.charAt(s)==="["&&!E)E=s+1;else if(k.charAt(s)==="]"&&E&&(I.length||I.push(k.slice(0,E-1)),I.push(k.substr(E,s-E)),E=0,k.charAt(s+1)!=="["))break;for(I.length||(I=[k]),s=0;s<I[0].length&&(y=I[0].charAt(s),(y===" "||y==="."||y==="[")&&(I[0]=I[0].substr(0,s)+"_"+I[0].substr(s+1)),y!=="[");s++);for(l=_,s=0,V=I.length;s<V;s++)if(k=I[s].replace(/^['"]/,"").replace(/['"]$/,""),u=l,k!==""&&k!==" "||s===0)l[k]===b&&(l[k]={}),l=l[k];else{r=-1;for(o in l)l.hasOwnProperty(o)&&+o>r&&o.match(/^\d+$/g)&&(r=+o);k=r+1}u[k]=R}}return _}function dn(n){return encodeURIComponent(n).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)}function pn(n,t=null,e="&",i=null){if(n===null)return"";let s=Object.keys(n).map(r=>{let o,u=r;if(i&&(u=i+"["+u+"]"),typeof n[r]=="object")o=pn(n[r],null,e,u);else if(t&&(u=!isNaN(parseFloat(u))&&isFinite(u)?t+Number(u):u),n[r]!==""){let l=n[r];l===!0?l="1":l===!1&&(l="0"),o=dn(u)+"="+dn(l)}return o});return s=s.filter(r=>r!==void 0),s.join(e).replace(/[!'()*]/g,"")}function si(n,t={}){/(https?:\/\/|:\/\/)/i.test(n)===!1&&(n="http://"+n);let e;try{e=new URL(n)}catch{return n}let i={};e.search&&e.search.length>0&&(i=gr(e.search.split("?")[1])),i=Object.assign({},t,i);let s=pn(i);return e.protocol+"//"+e.host+e.pathname+(String(s).length>0?"?"+s:"")}var mr=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},le={exports:{}};(function(n,t){(function(e,i){i(t)})(mr,function(e){function i(c,h){var d=Object.keys(c);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(c);h&&(a=a.filter(function(p){return Object.getOwnPropertyDescriptor(c,p).enumerable})),d.push.apply(d,a)}return d}function s(c){for(var h=1;h<arguments.length;h++){var d=arguments[h]!=null?arguments[h]:{};h%2?i(Object(d),!0).forEach(function(a){b(c,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(d)):i(Object(d)).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(d,a))})}return c}function r(c){return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},r(c)}function o(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function u(c,h){for(var d=0;d<h.length;d++){var a=h[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(c,a.key,a)}}function l(c,h,d){return h&&u(c.prototype,h),d&&u(c,d),Object.defineProperty(c,"prototype",{writable:!1}),c}function b(c,h,d){return h in c?Object.defineProperty(c,h,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[h]=d,c}function y(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Object.defineProperty(c,"prototype",{writable:!1}),h&&k(c,h)}function T(c){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(h){return h.__proto__||Object.getPrototypeOf(h)},T(c)}function k(c,h){return k=Object.setPrototypeOf||function(d,a){return d.__proto__=a,d},k(c,h)}function R(c,h){if(h&&(typeof h=="object"||typeof h=="function"))return h;if(h!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}(c)}function E(c){var h=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var d,a=T(c);if(h){var p=T(this).constructor;d=Reflect.construct(a,arguments,p)}else d=a.apply(this,arguments);return R(this,d)}}function I(c){return function(h){if(Array.isArray(h))return V(h)}(c)||function(h){if(typeof Symbol!="undefined"&&h[Symbol.iterator]!=null||h["@@iterator"]!=null)return Array.from(h)}(c)||function(h,d){if(!!h){if(typeof h=="string")return V(h,d);var a=Object.prototype.toString.call(h).slice(8,-1);if(a==="Object"&&h.constructor&&(a=h.constructor.name),a==="Map"||a==="Set")return Array.from(h);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return V(h,d)}}(c)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function V(c,h){(h==null||h>c.length)&&(h=c.length);for(var d=0,a=new Array(h);d<h;d++)a[d]=c[d];return a}function _(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{id:c.id||null,adId:c.adId||null,sequence:c.sequence||null,apiFramework:c.apiFramework||null,universalAdIds:[],creativeExtensions:[]}}var M=["ADCATEGORIES","ADCOUNT","ADPLAYHEAD","ADSERVINGID","ADTYPE","APIFRAMEWORKS","APPBUNDLE","ASSETURI","BLOCKEDADCATEGORIES","BREAKMAXADLENGTH","BREAKMAXADS","BREAKMAXDURATION","BREAKMINADLENGTH","BREAKMINDURATION","BREAKPOSITION","CLICKPOS","CLICKTYPE","CLIENTUA","CONTENTID","CONTENTPLAYHEAD","CONTENTURI","DEVICEIP","DEVICEUA","DOMAIN","EXTENSIONS","GDPRCONSENT","IFA","IFATYPE","INVENTORYSTATE","LATLONG","LIMITADTRACKING","MEDIAMIME","MEDIAPLAYHEAD","OMIDPARTNER","PAGEURL","PLACEMENTTYPE","PLAYERCAPABILITIES","PLAYERSIZE","PLAYERSTATE","PODSEQUENCE","REGULATIONS","SERVERSIDE","SERVERUA","TRANSACTIONID","UNIVERSALADID","VASTVERSIONS","VERIFICATIONVENDORS"];function N(c){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=[],p=j(c);for(var g in!h.ERRORCODE||d.isCustomCode||/^[0-9]{3}$/.test(h.ERRORCODE)||(h.ERRORCODE=900),h.CACHEBUSTING=K(Math.round(1e8*Math.random()).toString()),h.TIMESTAMP=new Date().toISOString(),h.RANDOM=h.random=h.CACHEBUSTING,h)h[g]=At(h[g]);for(var f in p){var v=p[f];typeof v=="string"&&a.push(z(v,h))}return a}function z(c,h){var d=(c=pt(c,h)).match(/[^[\]]+(?=])/g);if(!d)return c;var a=d.filter(function(p){return M.indexOf(p)>-1});return a.length===0?c:pt(c,a=a.reduce(function(p,g){return p[g]=-1,p},{}))}function pt(c,h){var d=c;for(var a in h){var p=h[a];d=d.replace(new RegExp("(?:\\[|%%)(".concat(a,")(?:\\]|%%)"),"g"),p)}return d}function j(c){return Array.isArray(c)?c.map(function(h){return h&&h.hasOwnProperty("url")?h.url:h}):c}function vt(c,h){for(var d=0;d<h.length;d++)if(Nt(h[d],c))return!0;return!1}function Nt(c,h){if(c&&h){var d=Object.getOwnPropertyNames(c),a=Object.getOwnPropertyNames(h);return d.length===a.length&&c.id===h.id&&c.url===h.url}return!1}function At(c){return encodeURIComponent(c).replace(/[!'()*]/g,function(h){return"%".concat(h.charCodeAt(0).toString(16))})}function K(c){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,d=String(c);return d.length<h?It(0,h-d.length,!1).map(function(){return"0"}).join("")+d:d}function It(c,h,d){for(var a=[],p=c<h,g=d?p?h+1:h-1:h,f=c;p?f<g:f>g;p?f++:f--)a.push(f);return a}var tt={track:function(c,h,d){N(c,h,d).forEach(function(a){typeof window!="undefined"&&window!==null&&(new Image().src=a)})},resolveURLTemplates:N,extractURLsFromTemplates:j,containsTemplateObject:vt,isTemplateObjectEqual:Nt,encodeURIComponentRFC3986:At,replaceUrlMacros:z,leftpad:K,range:It,isNumeric:function(c){return!isNaN(parseFloat(c))&&isFinite(c)},flatten:function c(h){return h.reduce(function(d,a){return d.concat(Array.isArray(a)?c(a):a)},[])},joinArrayOfUniqueTemplateObjs:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],d=Array.isArray(c)?c:[],a=Array.isArray(h)?h:[],p=d.concat(a);return p.reduce(function(g,f){return vt(f,g)||g.push(f),g},[])}};function at(c){return["true","TRUE","True","1"].indexOf(c)!==-1}var m={childByName:function(c,h){var d=c.childNodes;for(var a in d){var p=d[a];if(p.nodeName===h)return p}},childrenByName:function(c,h){var d=[],a=c.childNodes;for(var p in a){var g=a[p];g.nodeName===h&&d.push(g)}return d},resolveVastAdTagURI:function(c,h){if(!h)return c;if(c.indexOf("//")===0){var d=location.protocol;return"".concat(d).concat(c)}if(c.indexOf("://")===-1){var a=h.slice(0,h.lastIndexOf("/"));return"".concat(a,"/").concat(c)}return c},parseBoolean:at,parseNodeText:function(c){return c&&(c.textContent||c.text||"").trim()},copyNodeAttribute:function(c,h,d){var a=h.getAttribute(c);a&&d.setAttribute(c,a)},parseAttributes:function(c){for(var h=c.attributes,d={},a=0;a<h.length;a++)d[h[a].nodeName]=h[a].nodeValue;return d},parseDuration:function(c){if(c==null)return-1;if(tt.isNumeric(c))return parseInt(c);var h=c.split(":");if(h.length!==3)return-1;var d=h[2].split("."),a=parseInt(d[0]);d.length===2&&(a+=parseFloat("0.".concat(d[1])));var p=parseInt(60*h[1]),g=parseInt(60*h[0]*60);return isNaN(g)||isNaN(p)||isNaN(a)||p>3600||a>60?-1:g+p+a},splitVAST:function(c){var h=[],d=null;return c.forEach(function(a,p){if(a.sequence&&(a.sequence=parseInt(a.sequence,10)),a.sequence>1){var g=c[p-1];if(g&&g.sequence===a.sequence-1)return void(d&&d.push(a));delete a.sequence}d=[a],h.push(d)}),h},assignAttributes:function(c,h){if(c)for(var d in c){var a=c[d];if(a.nodeName&&a.nodeValue&&h.hasOwnProperty(a.nodeName)){var p=a.nodeValue;typeof h[a.nodeName]=="boolean"&&(p=at(p)),h[a.nodeName]=p}}},mergeWrapperAdData:function(c,h){c.errorURLTemplates=h.errorURLTemplates.concat(c.errorURLTemplates),c.impressionURLTemplates=h.impressionURLTemplates.concat(c.impressionURLTemplates),c.extensions=h.extensions.concat(c.extensions),h.viewableImpression.length>0&&(c.viewableImpression=[].concat(I(c.viewableImpression),I(h.viewableImpression))),c.followAdditionalWrappers=h.followAdditionalWrappers,c.allowMultipleAds=h.allowMultipleAds,c.fallbackOnNoAd=h.fallbackOnNoAd;var d=(h.creatives||[]).filter(function(f){return f&&f.type==="companion"}),a=d.reduce(function(f,v){return(v.variations||[]).forEach(function(C){(C.companionClickTrackingURLTemplates||[]).forEach(function(P){tt.containsTemplateObject(P,f)||f.push(P)})}),f},[]);c.creatives=d.concat(c.creatives);var p=h.videoClickTrackingURLTemplates&&h.videoClickTrackingURLTemplates.length,g=h.videoCustomClickURLTemplates&&h.videoCustomClickURLTemplates.length;c.creatives.forEach(function(f){if(h.trackingEvents&&h.trackingEvents[f.type])for(var v in h.trackingEvents[f.type]){var C=h.trackingEvents[f.type][v];Array.isArray(f.trackingEvents[v])||(f.trackingEvents[v]=[]),f.trackingEvents[v]=f.trackingEvents[v].concat(C)}f.type==="linear"&&(p&&(f.videoClickTrackingURLTemplates=f.videoClickTrackingURLTemplates.concat(h.videoClickTrackingURLTemplates)),g&&(f.videoCustomClickURLTemplates=f.videoCustomClickURLTemplates.concat(h.videoCustomClickURLTemplates)),!h.videoClickThroughURLTemplate||f.videoClickThroughURLTemplate!==null&&f.videoClickThroughURLTemplate!==void 0||(f.videoClickThroughURLTemplate=h.videoClickThroughURLTemplate)),f.type==="companion"&&a.length&&(f.variations||[]).forEach(function(P){P.companionClickTrackingURLTemplates=tt.joinArrayOfUniqueTemplateObjs(P.companionClickTrackingURLTemplates,a)})}),h.adVerifications&&(c.adVerifications=c.adVerifications.concat(h.adVerifications)),h.blockedAdCategories&&(c.blockedAdCategories=c.blockedAdCategories.concat(h.blockedAdCategories))}};function pe(c,h){var d=function(){var a=_(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),p=a.id,g=a.adId,f=a.sequence,v=a.apiFramework;return{id:p,adId:g,sequence:f,apiFramework:v,type:"companion",required:null,variations:[]}}(h);return d.required=c.getAttribute("required")||null,d.variations=m.childrenByName(c,"Companion").map(function(a){var p=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{id:v.id||null,adType:"companionAd",width:v.width||0,height:v.height||0,assetWidth:v.assetWidth||null,assetHeight:v.assetHeight||null,expandedWidth:v.expandedWidth||null,expandedHeight:v.expandedHeight||null,apiFramework:v.apiFramework||null,adSlotID:v.adSlotID||null,pxratio:v.pxratio||"1",renderingMode:v.renderingMode||"default",staticResources:[],htmlResources:[],iframeResources:[],adParameters:null,xmlEncoded:null,altText:null,companionClickThroughURLTemplate:null,companionClickTrackingURLTemplates:[],trackingEvents:{}}}(m.parseAttributes(a));p.htmlResources=m.childrenByName(a,"HTMLResource").reduce(function(v,C){var P=m.parseNodeText(C);return P?v.concat(P):v},[]),p.iframeResources=m.childrenByName(a,"IFrameResource").reduce(function(v,C){var P=m.parseNodeText(C);return P?v.concat(P):v},[]),p.staticResources=m.childrenByName(a,"StaticResource").reduce(function(v,C){var P=m.parseNodeText(C);return P?v.concat({url:P,creativeType:C.getAttribute("creativeType")||null}):v},[]),p.altText=m.parseNodeText(m.childByName(a,"AltText"))||null;var g=m.childByName(a,"TrackingEvents");g&&m.childrenByName(g,"Tracking").forEach(function(v){var C=v.getAttribute("event"),P=m.parseNodeText(v);C&&P&&(Array.isArray(p.trackingEvents[C])||(p.trackingEvents[C]=[]),p.trackingEvents[C].push(P))}),p.companionClickTrackingURLTemplates=m.childrenByName(a,"CompanionClickTracking").map(function(v){return{id:v.getAttribute("id")||null,url:m.parseNodeText(v)}}),p.companionClickThroughURLTemplate=m.parseNodeText(m.childByName(a,"CompanionClickThrough"))||null;var f=m.childByName(a,"AdParameters");return f&&(p.adParameters=m.parseNodeText(f),p.xmlEncoded=f.getAttribute("xmlEncoded")||null),p}),d}function xi(c){return c.type==="linear"}function Mt(c,h){var d,a=function(){var L=_(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),B=L.id,D=L.adId,H=L.sequence,F=L.apiFramework;return{id:B,adId:D,sequence:H,apiFramework:F,type:"linear",duration:0,skipDelay:null,mediaFiles:[],mezzanine:null,interactiveCreativeFile:null,closedCaptionFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,icons:[],trackingEvents:{}}}(h);a.duration=m.parseDuration(m.parseNodeText(m.childByName(c,"Duration")));var p=c.getAttribute("skipoffset");if(p==null)a.skipDelay=null;else if(p.charAt(p.length-1)==="%"&&a.duration!==-1){var g=parseInt(p,10);a.skipDelay=a.duration*(g/100)}else a.skipDelay=m.parseDuration(p);var f=m.childByName(c,"VideoClicks");if(f){var v=m.childByName(f,"ClickThrough");a.videoClickThroughURLTemplate=v?{id:v.getAttribute("id")||null,url:m.parseNodeText(v)}:null,m.childrenByName(f,"ClickTracking").forEach(function(L){a.videoClickTrackingURLTemplates.push({id:L.getAttribute("id")||null,url:m.parseNodeText(L)})}),m.childrenByName(f,"CustomClick").forEach(function(L){a.videoCustomClickURLTemplates.push({id:L.getAttribute("id")||null,url:m.parseNodeText(L)})})}var C=m.childByName(c,"AdParameters");C&&(a.adParameters=m.parseNodeText(C)),m.childrenByName(c,"TrackingEvents").forEach(function(L){m.childrenByName(L,"Tracking").forEach(function(B){var D=B.getAttribute("event"),H=m.parseNodeText(B);if(D&&H){if(D==="progress"){if(!(d=B.getAttribute("offset")))return;D=d.charAt(d.length-1)==="%"?"progress-".concat(d):"progress-".concat(Math.round(m.parseDuration(d)))}Array.isArray(a.trackingEvents[D])||(a.trackingEvents[D]=[]),a.trackingEvents[D].push(H)}})}),m.childrenByName(c,"MediaFiles").forEach(function(L){m.childrenByName(L,"MediaFile").forEach(function(X){a.mediaFiles.push(function(Q){var Y={id:null,fileURL:null,fileSize:0,deliveryType:"progressive",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null};Y.id=Q.getAttribute("id"),Y.fileURL=m.parseNodeText(Q),Y.deliveryType=Q.getAttribute("delivery"),Y.codec=Q.getAttribute("codec"),Y.mimeType=Q.getAttribute("type"),Y.mediaType=Q.getAttribute("mediaType")||"2D",Y.apiFramework=Q.getAttribute("apiFramework"),Y.fileSize=parseInt(Q.getAttribute("fileSize")||0),Y.bitrate=parseInt(Q.getAttribute("bitrate")||0),Y.minBitrate=parseInt(Q.getAttribute("minBitrate")||0),Y.maxBitrate=parseInt(Q.getAttribute("maxBitrate")||0),Y.width=parseInt(Q.getAttribute("width")||0),Y.height=parseInt(Q.getAttribute("height")||0);var Li=Q.getAttribute("scalable");Li&&typeof Li=="string"&&(Y.scalable=m.parseBoolean(Li));var Ri=Q.getAttribute("maintainAspectRatio");return Ri&&typeof Ri=="string"&&(Y.maintainAspectRatio=m.parseBoolean(Ri)),Y}(X))});var B=m.childByName(L,"InteractiveCreativeFile");B&&(a.interactiveCreativeFile=function(X){var Q=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{type:Y.type||null,apiFramework:Y.apiFramework||null,variableDuration:m.parseBoolean(Y.variableDuration),fileURL:null}}(m.parseAttributes(X));return Q.fileURL=m.parseNodeText(X),Q}(B));var D=m.childByName(L,"ClosedCaptionFiles");D&&m.childrenByName(D,"ClosedCaptionFile").forEach(function(X){var Q=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{type:Y.type||null,language:Y.language||null,fileURL:null}}(m.parseAttributes(X));Q.fileURL=m.parseNodeText(X),a.closedCaptionFiles.push(Q)});var H,F,ct,ft=m.childByName(L,"Mezzanine"),dt=(H=ft,F={},ct=!1,["delivery","type","width","height"].forEach(function(X){H&&H.getAttribute(X)?F[X]=H.getAttribute(X):ct=!0}),ct?null:F);if(dt){var nt={id:null,fileURL:null,delivery:null,codec:null,type:null,width:0,height:0,fileSize:0,mediaType:"2D"};nt.id=ft.getAttribute("id"),nt.fileURL=m.parseNodeText(ft),nt.delivery=dt.delivery,nt.codec=ft.getAttribute("codec"),nt.type=dt.type,nt.width=parseInt(dt.width,10),nt.height=parseInt(dt.height,10),nt.fileSize=parseInt(ft.getAttribute("fileSize"),10),nt.mediaType=ft.getAttribute("mediaType")||"2D",a.mezzanine=nt}});var P=m.childByName(c,"Icons");return P&&m.childrenByName(P,"Icon").forEach(function(L){a.icons.push(function(B){var D={program:null,height:0,width:0,xPosition:0,yPosition:0,apiFramework:null,offset:null,duration:0,type:null,staticResource:null,htmlResource:null,iframeResource:null,pxratio:"1",iconClickThroughURLTemplate:null,iconClickTrackingURLTemplates:[],iconViewTrackingURLTemplate:null};D.program=B.getAttribute("program"),D.height=parseInt(B.getAttribute("height")||0),D.width=parseInt(B.getAttribute("width")||0),D.xPosition=function(F){return["left","right"].indexOf(F)!==-1?F:parseInt(F||0)}(B.getAttribute("xPosition")),D.yPosition=function(F){return["top","bottom"].indexOf(F)!==-1?F:parseInt(F||0)}(B.getAttribute("yPosition")),D.apiFramework=B.getAttribute("apiFramework"),D.pxratio=B.getAttribute("pxratio")||"1",D.offset=m.parseDuration(B.getAttribute("offset")),D.duration=m.parseDuration(B.getAttribute("duration")),m.childrenByName(B,"HTMLResource").forEach(function(F){D.type=F.getAttribute("creativeType")||"text/html",D.htmlResource=m.parseNodeText(F)}),m.childrenByName(B,"IFrameResource").forEach(function(F){D.type=F.getAttribute("creativeType")||0,D.iframeResource=m.parseNodeText(F)}),m.childrenByName(B,"StaticResource").forEach(function(F){D.type=F.getAttribute("creativeType")||0,D.staticResource=m.parseNodeText(F)});var H=m.childByName(B,"IconClicks");return H&&(D.iconClickThroughURLTemplate=m.parseNodeText(m.childByName(H,"IconClickThrough")),m.childrenByName(H,"IconClickTracking").forEach(function(F){D.iconClickTrackingURLTemplates.push({id:F.getAttribute("id")||null,url:m.parseNodeText(F)})})),D.iconViewTrackingURLTemplate=m.parseNodeText(m.childByName(B,"IconViewTracking")),D}(L))}),a}function zt(c,h){var d=function(){var a=_(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),p=a.id,g=a.adId,f=a.sequence,v=a.apiFramework;return{id:p,adId:g,sequence:f,apiFramework:v,type:"nonlinear",variations:[],trackingEvents:{}}}(h);return m.childrenByName(c,"TrackingEvents").forEach(function(a){var p,g;m.childrenByName(a,"Tracking").forEach(function(f){p=f.getAttribute("event"),g=m.parseNodeText(f),p&&g&&(Array.isArray(d.trackingEvents[p])||(d.trackingEvents[p]=[]),d.trackingEvents[p].push(g))})}),m.childrenByName(c,"NonLinear").forEach(function(a){var p={id:null,width:0,height:0,expandedWidth:0,expandedHeight:0,scalable:!0,maintainAspectRatio:!0,minSuggestedDuration:0,apiFramework:"static",adType:"nonLinearAd",type:null,staticResource:null,htmlResource:null,iframeResource:null,nonlinearClickThroughURLTemplate:null,nonlinearClickTrackingURLTemplates:[],adParameters:null};p.id=a.getAttribute("id")||null,p.width=a.getAttribute("width"),p.height=a.getAttribute("height"),p.expandedWidth=a.getAttribute("expandedWidth"),p.expandedHeight=a.getAttribute("expandedHeight"),p.scalable=m.parseBoolean(a.getAttribute("scalable")),p.maintainAspectRatio=m.parseBoolean(a.getAttribute("maintainAspectRatio")),p.minSuggestedDuration=m.parseDuration(a.getAttribute("minSuggestedDuration")),p.apiFramework=a.getAttribute("apiFramework"),m.childrenByName(a,"HTMLResource").forEach(function(f){p.type=f.getAttribute("creativeType")||"text/html",p.htmlResource=m.parseNodeText(f)}),m.childrenByName(a,"IFrameResource").forEach(function(f){p.type=f.getAttribute("creativeType")||0,p.iframeResource=m.parseNodeText(f)}),m.childrenByName(a,"StaticResource").forEach(function(f){p.type=f.getAttribute("creativeType")||0,p.staticResource=m.parseNodeText(f)});var g=m.childByName(a,"AdParameters");g&&(p.adParameters=m.parseNodeText(g)),p.nonlinearClickThroughURLTemplate=m.parseNodeText(m.childByName(a,"NonLinearClickThrough")),m.childrenByName(a,"NonLinearClickTracking").forEach(function(f){p.nonlinearClickTrackingURLTemplates.push({id:f.getAttribute("id")||null,url:m.parseNodeText(f)})}),d.variations.push(p)}),d}function Bt(c){var h=[];return c.forEach(function(d){var a=fe(d);a&&h.push(a)}),h}function fe(c){if(c.nodeName==="#comment")return null;var h,d={name:null,value:null,attributes:{},children:[]},a=c.attributes,p=c.childNodes;if(d.name=c.nodeName,c.attributes){for(var g in a)if(a.hasOwnProperty(g)){var f=a[g];f.nodeName&&f.nodeValue&&(d.attributes[f.nodeName]=f.nodeValue)}}for(var v in p)if(p.hasOwnProperty(v)){var C=fe(p[v]);C&&d.children.push(C)}if(d.children.length===0||d.children.length===1&&["#cdata-section","#text"].indexOf(d.children[0].name)>=0){var P=m.parseNodeText(c);P!==""&&(d.value=P),d.children=[]}return(h=d).value===null&&Object.keys(h.attributes).length===0&&h.children.length===0?null:d}function De(c){var h=[];return c.forEach(function(d){var a,p={id:d.getAttribute("id")||null,adId:Fe(d),sequence:d.getAttribute("sequence")||null,apiFramework:d.getAttribute("apiFramework")||null},g=[];m.childrenByName(d,"UniversalAdId").forEach(function(L){var B={idRegistry:L.getAttribute("idRegistry")||"unknown",value:m.parseNodeText(L)};g.push(B)});var f=m.childByName(d,"CreativeExtensions");for(var v in f&&(a=Bt(m.childrenByName(f,"CreativeExtension"))),d.childNodes){var C=d.childNodes[v],P=void 0;switch(C.nodeName){case"Linear":P=Mt(C,p);break;case"NonLinearAds":P=zt(C,p);break;case"CompanionAds":P=pe(C,p)}P&&(g&&(P.universalAdIds=g),a&&(P.creativeExtensions=a),h.push(P))}}),h}function Fe(c){return c.getAttribute("AdID")||c.getAttribute("adID")||c.getAttribute("adId")||null}var yt={Wrapper:{subElements:["VASTAdTagURI","Impression"]},BlockedAdCategories:{attributes:["authority"]},InLine:{subElements:["AdSystem","AdTitle","Impression","AdServingId","Creatives"]},Category:{attributes:["authority"]},Pricing:{attributes:["model","currency"]},Verification:{oneOfinLineResources:["JavaScriptResource","ExecutableResource"],attributes:["vendor"]},UniversalAdId:{attributes:["idRegistry"]},JavaScriptResource:{attributes:["apiFramework","browserOptional"]},ExecutableResource:{attributes:["apiFramework","type"]},Tracking:{attributes:["event"]},Creatives:{subElements:["Creative"]},Creative:{subElements:["UniversalAdId"]},Linear:{subElements:["MediaFiles","Duration"]},MediaFiles:{subElements:["MediaFile"]},MediaFile:{attributes:["delivery","type","width","height"]},Mezzanine:{attributes:["delivery","type","width","height"]},NonLinear:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},Companion:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},StaticResource:{attributes:["creativeType"]},Icons:{subElements:["Icon"]},Icon:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"]}};function ge(c,h){if(yt[c.nodeName]&&yt[c.nodeName].attributes){var d=yt[c.nodeName].attributes.filter(function(a){return!c.getAttribute(a)});d.length>0&&me({name:c.nodeName,parentName:c.parentNode.nodeName,attributes:d},h)}}function Zt(c,h,d){var a=yt[c.nodeName],p=!d&&c.nodeName!=="Wrapper";if(a&&!p){if(a.subElements){var g=a.subElements.filter(function(f){return!m.childByName(c,f)});g.length>0&&me({name:c.nodeName,parentName:c.parentNode.nodeName,subElements:g},h)}d&&a.oneOfinLineResources&&(a.oneOfinLineResources.some(function(f){return m.childByName(c,f)})||me({name:c.nodeName,parentName:c.parentNode.nodeName,oneOfResources:a.oneOfinLineResources},h))}}function _e(c){return c.children&&c.children.length!==0}function me(c,h){var d=c.name,a=c.parentName,p=c.attributes,g=c.subElements,f=c.oneOfResources,v="Element '".concat(d,"'");h("VAST-warning",{message:v+=p?" missing required attribute(s) '".concat(p.join(", "),"' "):g?" missing required sub element(s) '".concat(g.join(", "),"' "):f?" must provide one of the following '".concat(f.join(", "),"' "):" is empty",parentElement:a,specVersion:4.1})}var $o={verifyRequiredValues:function c(h,d,a){if(h&&h.nodeName)if(h.nodeName==="InLine"&&(a=!0),ge(h,d),_e(h)){Zt(h,d,a);for(var p=0;p<h.children.length;p++)c(h.children[p],d,a)}else m.parseNodeText(h).length===0&&me({name:h.nodeName,parentName:h.parentNode.nodeName},d)},hasSubElements:_e,emitMissingValueWarning:me,verifyRequiredAttributes:ge,verifyRequiredSubElements:Zt};function Ho(c,h){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=d.allowMultipleAds,p=d.followAdditionalWrappers,g=c.childNodes;for(var f in g){var v=g[f];if(["Wrapper","InLine"].indexOf(v.nodeName)!==-1&&(v.nodeName!=="Wrapper"||p!==!1)){if(m.copyNodeAttribute("id",c,v),m.copyNodeAttribute("sequence",c,v),m.copyNodeAttribute("adType",c,v),v.nodeName==="Wrapper")return{ad:zo(v,h),type:"WRAPPER"};if(v.nodeName==="InLine")return{ad:Wo(v,h,{allowMultipleAds:a}),type:"INLINE"}}}}function Wo(c,h){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=d.allowMultipleAds;return a===!1&&c.getAttribute("sequence")?null:ss(c,h)}function ss(c,h){var d=[];h&&$o.verifyRequiredValues(c,h);var a=c.childNodes,p=function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{id:C.id||null,sequence:C.sequence||null,adType:C.adType||null,adServingId:null,categories:[],expires:null,viewableImpression:[],system:null,title:null,description:null,advertiser:null,pricing:null,survey:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:[],extensions:[],adVerifications:[],blockedAdCategories:[],followAdditionalWrappers:!0,allowMultipleAds:!1,fallbackOnNoAd:null}}(m.parseAttributes(c));for(var g in a){var f=a[g];switch(f.nodeName){case"Error":p.errorURLTemplates.push(m.parseNodeText(f));break;case"Impression":p.impressionURLTemplates.push({id:f.getAttribute("id")||null,url:m.parseNodeText(f)});break;case"Creatives":p.creatives=De(m.childrenByName(f,"Creative"));break;case"Extensions":var v=m.childrenByName(f,"Extension");p.extensions=Bt(v),p.adVerifications.length||(d=jo(v));break;case"AdVerifications":p.adVerifications=rs(m.childrenByName(f,"Verification"));break;case"AdSystem":p.system={value:m.parseNodeText(f),version:f.getAttribute("version")||null};break;case"AdTitle":p.title=m.parseNodeText(f);break;case"AdServingId":p.adServingId=m.parseNodeText(f);break;case"Category":p.categories.push({authority:f.getAttribute("authority")||null,value:m.parseNodeText(f)});break;case"Expires":p.expires=parseInt(m.parseNodeText(f),10);break;case"ViewableImpression":p.viewableImpression.push(qo(f));break;case"Description":p.description=m.parseNodeText(f);break;case"Advertiser":p.advertiser={id:f.getAttribute("id")||null,value:m.parseNodeText(f)};break;case"Pricing":p.pricing={value:m.parseNodeText(f),model:f.getAttribute("model")||null,currency:f.getAttribute("currency")||null};break;case"Survey":p.survey=m.parseNodeText(f);break;case"BlockedAdCategories":p.blockedAdCategories.push({authority:f.getAttribute("authority")||null,value:m.parseNodeText(f)})}}return d.length&&(p.adVerifications=p.adVerifications.concat(d)),p}function zo(c,h){var d=ss(c,h),a=c.getAttribute("followAdditionalWrappers"),p=c.getAttribute("allowMultipleAds"),g=c.getAttribute("fallbackOnNoAd");d.followAdditionalWrappers=!a||m.parseBoolean(a),d.allowMultipleAds=!!p&&m.parseBoolean(p),d.fallbackOnNoAd=g?m.parseBoolean(g):null;var f=m.childByName(c,"VASTAdTagURI");if(f?d.nextWrapperURL=m.parseNodeText(f):(f=m.childByName(c,"VASTAdTagURL"))&&(d.nextWrapperURL=m.parseNodeText(m.childByName(f,"URL"))),d.creatives.forEach(function(v){if(["linear","nonlinear"].indexOf(v.type)!==-1){if(v.trackingEvents){d.trackingEvents||(d.trackingEvents={}),d.trackingEvents[v.type]||(d.trackingEvents[v.type]={});var C=function(L){var B=v.trackingEvents[L];Array.isArray(d.trackingEvents[v.type][L])||(d.trackingEvents[v.type][L]=[]),B.forEach(function(D){d.trackingEvents[v.type][L].push(D)})};for(var P in v.trackingEvents)C(P)}v.videoClickTrackingURLTemplates&&(Array.isArray(d.videoClickTrackingURLTemplates)||(d.videoClickTrackingURLTemplates=[]),v.videoClickTrackingURLTemplates.forEach(function(L){d.videoClickTrackingURLTemplates.push(L)})),v.videoClickThroughURLTemplate&&(d.videoClickThroughURLTemplate=v.videoClickThroughURLTemplate),v.videoCustomClickURLTemplates&&(Array.isArray(d.videoCustomClickURLTemplates)||(d.videoCustomClickURLTemplates=[]),v.videoCustomClickURLTemplates.forEach(function(L){d.videoCustomClickURLTemplates.push(L)}))}}),d.nextWrapperURL)return d}function rs(c){var h=[];return c.forEach(function(d){var a={resource:null,vendor:null,browserOptional:!1,apiFramework:null,type:null,parameters:null,trackingEvents:{}},p=d.childNodes;for(var g in m.assignAttributes(d.attributes,a),p){var f=p[g];switch(f.nodeName){case"JavaScriptResource":case"ExecutableResource":a.resource=m.parseNodeText(f),m.assignAttributes(f.attributes,a);break;case"VerificationParameters":a.parameters=m.parseNodeText(f)}}var v=m.childByName(d,"TrackingEvents");v&&m.childrenByName(v,"Tracking").forEach(function(C){var P=C.getAttribute("event"),L=m.parseNodeText(C);P&&L&&(Array.isArray(a.trackingEvents[P])||(a.trackingEvents[P]=[]),a.trackingEvents[P].push(L))}),h.push(a)}),h}function jo(c){var h=null,d=[];return c.some(function(a){return h=m.childByName(a,"AdVerifications")}),h&&(d=rs(m.childrenByName(h,"Verification"))),d}function qo(c){var h={};h.id=c.getAttribute("id")||null;var d=c.childNodes;for(var a in d){var p=d[a],g=p.nodeName,f=m.parseNodeText(p);if((g==="Viewable"||g==="NotViewable"||g==="ViewUndetermined")&&f){var v=g.toLowerCase();Array.isArray(h[v])||(h[v]=[]),h[v].push(f)}}return h}var as=function(){function c(){o(this,c),this._handlers=[]}return l(c,[{key:"on",value:function(h,d){if(typeof d!="function")throw new TypeError("The handler argument must be of type Function. Received type ".concat(r(d)));if(!h)throw new TypeError("The event argument must be of type String. Received type ".concat(r(h)));return this._handlers.push({event:h,handler:d}),this}},{key:"once",value:function(h,d){return this.on(h,function(a,p,g){var f={fired:!1,wrapFn:void 0};function v(){f.fired||(a.off(p,f.wrapFn),f.fired=!0,g.bind(a).apply(void 0,arguments))}return f.wrapFn=v,v}(this,h,d))}},{key:"off",value:function(h,d){return this._handlers=this._handlers.filter(function(a){return a.event!==h||a.handler!==d}),this}},{key:"emit",value:function(h){for(var d=arguments.length,a=new Array(d>1?d-1:0),p=1;p<d;p++)a[p-1]=arguments[p];var g=!1;return this._handlers.forEach(function(f){f.event==="*"&&(g=!0,f.handler.apply(f,[h].concat(a))),f.event===h&&(g=!0,f.handler.apply(f,a))}),g}},{key:"removeAllListeners",value:function(h){return h?(this._handlers=this._handlers.filter(function(d){return d.event!==h}),this):(this._handlers=[],this)}},{key:"listenerCount",value:function(h){return this._handlers.filter(function(d){return d.event===h}).length}},{key:"listeners",value:function(h){return this._handlers.reduce(function(d,a){return a.event===h&&d.push(a.handler),d},[])}},{key:"eventNames",value:function(){return this._handlers.map(function(h){return h.event})}}]),c}(),Qo={get:function(c,h,d){d(new Error("Please bundle the library for node to use the node urlHandler"))}},os=12e4;function ls(){try{var c=new window.XMLHttpRequest;return"withCredentials"in c?c:null}catch{return null}}function $e(c,h,d){var a=d?408:c.status,p=d?"XHRURLHandler: Request timed out after ".concat(c.timeout," ms (").concat(a,")"):"XHRURLHandler: ".concat(c.statusText," (").concat(a,")");h(new Error(p),null,{statusCode:a})}var hs={get:function(c,h,d){if(window.location.protocol==="https:"&&c.indexOf("http://")===0)return d(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{var a=ls();a.open("GET",c),a.timeout=h.timeout||os,a.withCredentials=h.withCredentials||!1,a.overrideMimeType&&a.overrideMimeType("text/xml"),a.onload=function(){return function(p,g){p.status===200?g(null,p.responseXML,{byteLength:p.response.length,statusCode:p.status}):$e(p,g,!1)}(a,d)},a.onerror=function(){return $e(a,d,!1)},a.onabort=function(){return $e(a,d,!1)},a.ontimeout=function(){return $e(a,d,!0)},a.send()}catch{d(new Error("XHRURLHandler: Unexpected error"))}},supported:function(){return!!ls()}},Yo={get:function(c,h,d){return d||(typeof h=="function"&&(d=h),h={}),typeof window=="undefined"||window===null?Qo.get(c,h,d):hs.supported()?hs.get(c,h,d):d(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))}},us=0,Oi=0,cs=function(c,h){!c||!h||c<=0||h<=0||(Oi=(Oi*us+8*c/h)/++us)},Go={ERRORCODE:900,extensions:[]},ds=function(c){y(d,c);var h=E(d);function d(){var a;return o(this,d),(a=h.call(this)).remainingAds=[],a.parentURLs=[],a.errorURLTemplates=[],a.rootErrorURLTemplates=[],a.maxWrapperDepth=null,a.URLTemplateFilters=[],a.fetchingOptions={},a.parsingOptions={},a}return l(d,[{key:"addURLTemplateFilter",value:function(a){typeof a=="function"&&this.URLTemplateFilters.push(a)}},{key:"removeURLTemplateFilter",value:function(){this.URLTemplateFilters.pop()}},{key:"countURLTemplateFilters",value:function(){return this.URLTemplateFilters.length}},{key:"clearURLTemplateFilters",value:function(){this.URLTemplateFilters=[]}},{key:"trackVastError",value:function(a,p){for(var g=arguments.length,f=new Array(g>2?g-2:0),v=2;v<g;v++)f[v-2]=arguments[v];this.emit("VAST-error",Object.assign.apply(Object,[{},Go,p].concat(f))),tt.track(a,p)}},{key:"getErrorURLTemplates",value:function(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}},{key:"getEstimatedBitrate",value:function(){return Oi}},{key:"fetchVAST",value:function(a){var p=this,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return new Promise(function(C,P){p.URLTemplateFilters.forEach(function(B){a=B(a)}),p.parentURLs.push(a);var L=Date.now();p.emit("VAST-resolving",{url:a,previousUrl:f,wrapperDepth:g,maxWrapperDepth:p.maxWrapperDepth,timeout:p.fetchingOptions.timeout,wrapperAd:v}),p.urlHandler.get(a,p.fetchingOptions,function(B,D){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},F=Math.round(Date.now()-L),ct=Object.assign({url:a,previousUrl:f,wrapperDepth:g,error:B,duration:F},H);p.emit("VAST-resolved",ct),cs(H.byteLength,F),B?P(B):C(D)})})}},{key:"initParsingStatus",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.errorURLTemplates=[],this.fetchingOptions={timeout:a.timeout||os,withCredentials:a.withCredentials},this.maxWrapperDepth=a.wrapperLimit||10,this.parentURLs=[],this.parsingOptions={allowMultipleAds:a.allowMultipleAds},this.remainingAds=[],this.rootErrorURLTemplates=[],this.rootURL="",this.urlHandler=a.urlHandler||a.urlhandler||Yo,this.vastVersion=null,cs(a.byteLength,a.requestDuration)}},{key:"getRemainingAds",value:function(a){var p=this;if(this.remainingAds.length===0)return Promise.reject(new Error("No more ads are available for the given VAST"));var g=a?tt.flatten(this.remainingAds):this.remainingAds.shift();return this.errorURLTemplates=[],this.parentURLs=[],this.resolveAds(g,{wrapperDepth:0,url:this.rootURL}).then(function(f){return p.buildVASTResponse(f)})}},{key:"getAndParseVAST",value:function(a){var p=this,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.initParsingStatus(g),this.URLTemplateFilters.forEach(function(f){a=f(a)}),this.rootURL=a,this.fetchVAST(a).then(function(f){return g.previousUrl=a,g.isRootVAST=!0,g.url=a,p.parse(f,g).then(function(v){return p.buildVASTResponse(v)})})}},{key:"parseVAST",value:function(a){var p=this,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.initParsingStatus(g),g.isRootVAST=!0,this.parse(a,g).then(function(f){return p.buildVASTResponse(f)})}},{key:"buildVASTResponse",value:function(a){var p,g={ads:(p={ads:a,errorURLTemplates:this.getErrorURLTemplates(),version:this.vastVersion}).ads||[],errorURLTemplates:p.errorURLTemplates||[],version:p.version||null};return this.completeWrapperResolving(g),g}},{key:"parseVastXml",value:function(a,p){var g=p.isRootVAST,f=g!==void 0&&g,v=p.url,C=v===void 0?null:v,P=p.wrapperDepth,L=P===void 0?0:P,B=p.allowMultipleAds,D=p.followAdditionalWrappers;if(!a||!a.documentElement||a.documentElement.nodeName!=="VAST")throw this.emit("VAST-ad-parsed",{type:"ERROR",url:C,wrapperDepth:L}),new Error("Invalid VAST XMLDocument");var H=[],F=a.documentElement.childNodes,ct=a.documentElement.getAttribute("version");for(var ft in f&&ct&&(this.vastVersion=ct),F){var dt=F[ft];if(dt.nodeName==="Error"){var nt=m.parseNodeText(dt);f?this.rootErrorURLTemplates.push(nt):this.errorURLTemplates.push(nt)}else if(dt.nodeName==="Ad"){if(this.vastVersion&&parseFloat(this.vastVersion)<3)B=!0;else if(B===!1&&H.length>1)break;var X=Ho(dt,this.emit.bind(this),{allowMultipleAds:B,followAdditionalWrappers:D});X.ad?(H.push(X.ad),this.emit("VAST-ad-parsed",{type:X.type,url:C,wrapperDepth:L,adIndex:H.length-1,vastVersion:ct})):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}return H}},{key:"parse",value:function(a){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=p.url,f=g===void 0?null:g,v=p.resolveAll,C=v===void 0||v,P=p.wrapperSequence,L=P===void 0?null:P,B=p.previousUrl,D=B===void 0?null:B,H=p.wrapperDepth,F=H===void 0?0:H,ct=p.isRootVAST,ft=ct!==void 0&&ct,dt=p.followAdditionalWrappers,nt=p.allowMultipleAds,X=[];this.vastVersion&&parseFloat(this.vastVersion)<3&&ft&&(nt=!0);try{X=this.parseVastXml(a,{isRootVAST:ft,url:f,wrapperDepth:F,allowMultipleAds:nt,followAdditionalWrappers:dt})}catch(Q){return Promise.reject(Q)}return X.length===1&&L!=null&&(X[0].sequence=L),C===!1&&(this.remainingAds=m.splitVAST(X),X=this.remainingAds.shift()),this.resolveAds(X,{wrapperDepth:F,previousUrl:D,url:f})}},{key:"resolveAds",value:function(){var a=this,p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],g=arguments.length>1?arguments[1]:void 0,f=g.wrapperDepth,v=g.previousUrl,C=g.url,P=[];return v=C,p.forEach(function(L){var B=a.resolveWrappers(L,f,v);P.push(B)}),Promise.all(P).then(function(L){var B=tt.flatten(L);if(!B&&a.remainingAds.length>0){var D=a.remainingAds.shift();return a.resolveAds(D,{wrapperDepth:f,previousUrl:v,url:C})}return B})}},{key:"resolveWrappers",value:function(a,p,g){var f=this;return new Promise(function(v){var C;if(p++,!a.nextWrapperURL)return delete a.nextWrapperURL,v(a);if(p>=f.maxWrapperDepth||f.parentURLs.indexOf(a.nextWrapperURL)!==-1)return a.errorCode=302,delete a.nextWrapperURL,v(a);a.nextWrapperURL=m.resolveVastAdTagURI(a.nextWrapperURL,g),f.URLTemplateFilters.forEach(function(B){a.nextWrapperURL=B(a.nextWrapperURL)});var P=(C=f.parsingOptions.allowMultipleAds)!==null&&C!==void 0?C:a.allowMultipleAds,L=a.sequence;f.fetchVAST(a.nextWrapperURL,p,g,a).then(function(B){return f.parse(B,{url:a.nextWrapperURL,previousUrl:g,wrapperSequence:L,wrapperDepth:p,followAdditionalWrappers:a.followAdditionalWrappers,allowMultipleAds:P}).then(function(D){if(delete a.nextWrapperURL,D.length===0)return a.creatives=[],v(a);D.forEach(function(H){H&&m.mergeWrapperAdData(H,a)}),v(D)})}).catch(function(B){a.errorCode=301,a.errorMessage=B.message,v(a)})})}},{key:"completeWrapperResolving",value:function(a){if(a.ads.length===0)this.trackVastError(a.errorURLTemplates,{ERRORCODE:303});else for(var p=a.ads.length-1;p>=0;p--){var g=a.ads[p];(g.errorCode||g.creatives.length===0)&&(this.trackVastError(g.errorURLTemplates.concat(a.errorURLTemplates),{ERRORCODE:g.errorCode||303},{ERRORMESSAGE:g.errorMessage||""},{extensions:g.extensions},{system:g.system}),a.ads.splice(p,1))}}}]),d}(as),Ut=null,Ko={data:{},length:0,getItem:function(c){return this.data[c]},setItem:function(c,h){this.data[c]=h,this.length=Object.keys(this.data).length},removeItem:function(c){delete this.data[c],this.length=Object.keys(this.data).length},clear:function(){this.data={},this.length=0}},Xo=function(){function c(){o(this,c),this.storage=this.initStorage()}return l(c,[{key:"initStorage",value:function(){if(Ut)return Ut;try{Ut=typeof window!="undefined"&&window!==null?window.localStorage||window.sessionStorage:null}catch{Ut=null}return Ut&&!this.isStorageDisabled(Ut)||(Ut=Ko).clear(),Ut}},{key:"isStorageDisabled",value:function(h){var d="__VASTStorage__";try{if(h.setItem(d,d),h.getItem(d)!==d)return h.removeItem(d),!0}catch{return!0}return h.removeItem(d),!1}},{key:"getItem",value:function(h){return this.storage.getItem(h)}},{key:"setItem",value:function(h,d){return this.storage.setItem(h,d)}},{key:"removeItem",value:function(h){return this.storage.removeItem(h)}},{key:"clear",value:function(){return this.storage.clear()}}]),c}(),Zo=function(){function c(h,d,a){o(this,c),this.cappingFreeLunch=h||0,this.cappingMinimumTimeInterval=d||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new ds,this.storage=a||new Xo,this.lastSuccessfulAd===void 0&&(this.lastSuccessfulAd=0),this.totalCalls===void 0&&(this.totalCalls=0),this.totalCallsTimeout===void 0&&(this.totalCallsTimeout=0)}return l(c,[{key:"getParser",value:function(){return this.vastParser}},{key:"lastSuccessfulAd",get:function(){return this.storage.getItem("vast-client-last-successful-ad")},set:function(h){this.storage.setItem("vast-client-last-successful-ad",h)}},{key:"totalCalls",get:function(){return this.storage.getItem("vast-client-total-calls")},set:function(h){this.storage.setItem("vast-client-total-calls",h)}},{key:"totalCallsTimeout",get:function(){return this.storage.getItem("vast-client-total-calls-timeout")},set:function(h){this.storage.setItem("vast-client-total-calls-timeout",h)}},{key:"hasRemainingAds",value:function(){return this.vastParser.remainingAds.length>0}},{key:"getNextAds",value:function(h){return this.vastParser.getRemainingAds(h)}},{key:"get",value:function(h){var d=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=Date.now();return(a=Object.assign({},this.defaultOptions,a)).hasOwnProperty("resolveAll")||(a.resolveAll=!1),this.totalCallsTimeout<p?(this.totalCalls=1,this.totalCallsTimeout=p+36e5):this.totalCalls++,new Promise(function(g,f){if(d.cappingFreeLunch>=d.totalCalls)return f(new Error("VAST call canceled \u2013 FreeLunch capping not reached yet ".concat(d.totalCalls,"/").concat(d.cappingFreeLunch)));var v=p-d.lastSuccessfulAd;if(v<0)d.lastSuccessfulAd=0;else if(v<d.cappingMinimumTimeInterval)return f(new Error("VAST call canceled \u2013 (".concat(d.cappingMinimumTimeInterval,")ms minimum interval reached")));d.vastParser.getAndParseVAST(h,a).then(function(C){return g(C)}).catch(function(C){return f(C)})})}}]),c}(),Jo=function(c){y(d,c);var h=E(d);function d(a,p,g){var f,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;for(var C in o(this,d),(f=h.call(this)).ad=p,f.creative=g,f.variation=v,f.muted=!1,f.impressed=!1,f.skippable=!1,f.trackingEvents={},f.lastPercentage=0,f._alreadyTriggeredQuartiles={},f.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],f.creative.trackingEvents){var P=f.creative.trackingEvents[C];f.trackingEvents[C]=P.slice(0)}return xi(f.creative)?f._initLinearTracking():f._initVariationTracking(),a&&f.on("start",function(){a.lastSuccessfulAd=Date.now()}),f}return l(d,[{key:"_initLinearTracking",value:function(){this.linear=!0,this.skipDelay=this.creative.skipDelay,this.setDuration(this.creative.duration),this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates}},{key:"_initVariationTracking",value:function(){if(this.linear=!1,this.skipDelay=-1,this.variation){for(var a in this.variation.trackingEvents){var p=this.variation.trackingEvents[a];this.trackingEvents[a]?this.trackingEvents[a]=this.trackingEvents[a].concat(p.slice(0)):this.trackingEvents[a]=p.slice(0)}this.variation.adType==="nonLinearAd"?(this.clickThroughURLTemplate=this.variation.nonlinearClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.nonlinearClickTrackingURLTemplates,this.setDuration(this.variation.minSuggestedDuration)):function(g){return g.adType==="companionAd"}(this.variation)&&(this.clickThroughURLTemplate=this.variation.companionClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.companionClickTrackingURLTemplates)}}},{key:"setDuration",value:function(a){this.assetDuration=a,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100}}},{key:"setProgress",value:function(a){var p=this,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=this.skipDelay||-1;if(f===-1||this.skippable||(f>a?this.emit("skip-countdown",f-a):(this.skippable=!0,this.emit("skip-countdown",0))),this.assetDuration>0){var v=Math.round(a/this.assetDuration*100),C=[];if(a>0){C.push("start");for(var P=this.lastPercentage;P<v;P++)C.push("progress-".concat(P+1,"%"));for(var L in C.push("progress-".concat(Math.round(a))),this.quartiles)this.isQuartileReached(L,this.quartiles[L],a)&&(C.push(L),this._alreadyTriggeredQuartiles[L]=!0);this.lastPercentage=v}C.forEach(function(B){p.track(B,{macros:g,once:!0})}),a<this.progress&&this.track("rewind",{macros:g})}this.progress=a}},{key:"isQuartileReached",value:function(a,p,g){var f=!1;return p<=g&&!this._alreadyTriggeredQuartiles[a]&&(f=!0),f}},{key:"setMuted",value:function(a){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.muted!==a&&this.track(a?"mute":"unmute",{macros:p}),this.muted=a}},{key:"setPaused",value:function(a){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.paused!==a&&this.track(a?"pause":"resume",{macros:p}),this.paused=a}},{key:"setFullscreen",value:function(a){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.fullscreen!==a&&this.track(a?"fullscreen":"exitFullscreen",{macros:p}),this.fullscreen=a}},{key:"setExpand",value:function(a){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.expanded!==a&&(this.track(a?"expand":"collapse",{macros:p}),this.track(a?"playerExpand":"playerCollapse",{macros:p})),this.expanded=a}},{key:"setSkipDelay",value:function(a){typeof a=="number"&&(this.skipDelay=a)}},{key:"trackImpression",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.impressed||(this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates,a),this.track("creativeView",{macros:a}))}},{key:"error",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.trackURLs(this.ad.errorURLTemplates,a,{isCustomCode:p})}},{key:"errorWithCode",value:function(a){var p=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.error({ERRORCODE:a},p),console.log("The method errorWithCode is deprecated, please use vast tracker error method instead")}},{key:"complete",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.track("complete",{macros:a})}},{key:"notUsed",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.track("notUsed",{macros:a}),this.trackingEvents=[]}},{key:"otherAdInteraction",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.track("otherAdInteraction",{macros:a})}},{key:"acceptInvitation",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.track("acceptInvitation",{macros:a})}},{key:"adExpand",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.track("adExpand",{macros:a})}},{key:"adCollapse",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.track("adCollapse",{macros:a})}},{key:"minimize",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.track("minimize",{macros:a})}},{key:"verificationNotExecuted",value:function(a){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.ad||!this.ad.adVerifications||!this.ad.adVerifications.length)throw new Error("No adVerifications provided");if(!a)throw new Error("No vendor provided, unable to find associated verificationNotExecuted");var g=this.ad.adVerifications.find(function(C){return C.vendor===a});if(!g)throw new Error("No associated verification element found for vendor: ".concat(a));var f=g.trackingEvents;if(f&&f.verificationNotExecuted){var v=f.verificationNotExecuted;this.trackURLs(v,p),this.emit("verificationNotExecuted",{trackingURLTemplates:v})}}},{key:"overlayViewDuration",value:function(a){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};p.ADPLAYHEAD=a,this.track("overlayViewDuration",{macros:p})}},{key:"close",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.track(this.linear?"closeLinear":"close",{macros:a})}},{key:"skip",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.track("skip",{macros:a})}},{key:"load",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.track("loaded",{macros:a})}},{key:"click",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.clickTrackingURLTemplates&&this.clickTrackingURLTemplates.length&&this.trackURLs(this.clickTrackingURLTemplates,p);var g=this.clickThroughURLTemplate||a,f=s({},p);if(g){this.progress&&(f.ADPLAYHEAD=this.progressFormatted());var v=tt.resolveURLTemplates([g],f)[0];this.emit("clickthrough",v)}}},{key:"track",value:function(a){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=p.macros,f=g===void 0?{}:g,v=p.once,C=v!==void 0&&v;a==="closeLinear"&&!this.trackingEvents[a]&&this.trackingEvents.close&&(a="close");var P=this.trackingEvents[a],L=this.emitAlwaysEvents.indexOf(a)>-1;P?(this.emit(a,{trackingURLTemplates:P}),this.trackURLs(P,f)):L&&this.emit(a,null),C&&(delete this.trackingEvents[a],L&&this.emitAlwaysEvents.splice(this.emitAlwaysEvents.indexOf(a),1))}},{key:"trackURLs",value:function(a){var p,g,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},C=s({},f);this.linear&&(this.creative&&this.creative.mediaFiles&&this.creative.mediaFiles[0]&&this.creative.mediaFiles[0].fileURL&&(C.ASSETURI=this.creative.mediaFiles[0].fileURL),this.progress&&(C.ADPLAYHEAD=this.progressFormatted())),(p=this.creative)!==null&&p!==void 0&&(g=p.universalAdIds)!==null&&g!==void 0&&g.length&&(C.UNIVERSALADID=this.creative.universalAdIds.map(function(P){return P.idRegistry.concat(" ",P.value)}).join(",")),this.ad&&(this.ad.sequence&&(C.PODSEQUENCE=this.ad.sequence),this.ad.adType&&(C.ADTYPE=this.ad.adType),this.ad.adServingId&&(C.ADSERVINGID=this.ad.adServingId),this.ad.categories&&this.ad.categories.length&&(C.ADCATEGORIES=this.ad.categories.map(function(P){return P.value}).join(",")),this.ad.blockedAdCategories&&this.ad.blockedAdCategories.length&&(C.BLOCKEDADCATEGORIES=this.ad.blockedAdCategories)),tt.track(a,C,v)}},{key:"convertToTimecode",value:function(a){var p=1e3*a,g=Math.floor(p/36e5),f=Math.floor(p/6e4%60),v=Math.floor(p/1e3%60),C=Math.floor(p%1e3);return"".concat(tt.leftpad(g,2),":").concat(tt.leftpad(f,2),":").concat(tt.leftpad(v,2),".").concat(tt.leftpad(C,3))}},{key:"progressFormatted",value:function(){return this.convertToTimecode(this.progress)}}]),d}(as);e.VASTClient=Zo,e.VASTParser=ds,e.VASTTracker=Jo,Object.defineProperty(e,"__esModule",{value:!0})})})(le,le.exports);const O="wmplayer";function vr(n="",t="",e=""){return n.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),e.toString())}const Se={en:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",cancel:"Cancel",fastForward:"Next video",prev:"Prev video",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",skip:"Skip",adSkipThrough:"skip through",adWillEndIn:"Ad will end in",nextVideoSplash:"Next video will start in a {timeleft} sec"},ru:{restart:"\u041F\u0435\u0440\u0435\u0437\u0430\u043F\u0443\u0441\u043A",rewind:"\u041F\u0435\u0440\u0435\u043C\u043E\u0442\u043A\u0430 {seektime}s",play:"\u0418\u0433\u0440\u0430\u0442\u044C",pause:"\u041F\u0430\u0443\u0437\u0430",cancel:"\u041E\u0442\u043C\u0435\u043D\u0430",fastForward:"\u0421\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435 \u0432\u0438\u0434\u0435\u043E",prev:"\u041F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0438\u0435 \u0432\u0438\u0434\u0435\u043E",seek:"Seek",seekLabel:"{currentTime} \u0438\u0437 {duration}",played:"Played",buffered:"Buffered",currentTime:"\u0422\u0435\u043A\u0443\u0449\u0435\u0435 \u0432\u0440\u0435\u043C\u044F",duration:"\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",volume:"\u0413\u0440\u043E\u043C\u043A\u043E\u0441\u0442\u044C",mute:"\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0437\u0432\u0443\u043A",unmute:"\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0437\u0432\u0443\u043A",enableCaptions:"\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0441\u0443\u0431\u0442\u0438\u0442\u0440\u044B",disableCaptions:"\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0441\u0443\u0431\u0442\u0438\u0442\u0440\u044B",download:"\u0421\u043A\u0430\u0447\u0430\u0442\u044C",enterFullscreen:"\u0412\u0445\u043E\u0434 \u0432 \u043F\u043E\u043B\u043D\u043E\u044D\u043A\u0440\u0430\u043D\u043D\u044B\u0439 \u0440\u0435\u0436\u0438\u043C",exitFullscreen:"\u0412\u044B\u0445\u043E\u0434 \u0438\u0437 \u043F\u043E\u043B\u043D\u043E\u044D\u043A\u0440\u0430\u043D\u043D\u043E\u0433\u043E \u0440\u0435\u0436\u0438\u043C\u0430",frameTitle:"\u0418\u0433\u0440\u0430\u0435\u0442 {title}",captions:"\u0421\u0443\u0431\u0442\u0438\u0442\u0440\u044B",settings:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",menuBack:"\u0412\u0435\u0440\u043D\u0443\u0442\u0441\u044F \u043A \u043F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0435\u043C\u0443 \u043C\u0435\u043D\u044E",speed:"\u0421\u043A\u043E\u0440\u043E\u0441\u0442\u044C",normal:"\u041E\u0431\u044B\u0447\u043D\u044B\u0439",quality:"\u041A\u0430\u0447\u0435\u0441\u0442\u0432\u043E",loop:"\u0417\u0430\u0446\u0438\u043A\u043B\u0438\u0442\u044C",start:"\u0421\u0442\u0430\u0440\u0442",end:"\u041A\u043E\u043D\u0435\u0446",all:"\u0412\u0441\u0435",reset:"\u0421\u0431\u0440\u043E\u0441",disabled:"\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C",enabled:"\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C",advertisement:"\u0420\u0435\u043A\u043B\u0430\u043C\u0430",skip:"\u041F\u0440\u043E\u043F\u0443\u0441\u0442\u0438\u0442\u044C",adSkipThrough:"\u041F\u0440\u043E\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u0447\u0435\u0440\u0435\u0437",adWillEndIn:"\u0420\u0435\u043A\u043B\u0430\u043C\u0430 \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u0441\u044F \u0447\u0435\u0440\u0435\u0437",nextVideoSplash:"\u0421\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435 \u0432\u0438\u0434\u0435\u043E \u043D\u0430\u0447\u043D\u0435\u0442\u0441\u044F \u0447\u0435\u0440\u0435\u0437 {timeleft} \u0441\u0435\u043A"}};let Ae="en";const xt={setLocale(n){Se[n]&&(Ae=n)},get(n="",t={}){let e=Se[Ae]&&Se[Ae][n]?Se[Ae][n]:"";return Object.entries(t).forEach(([i,s])=>{e=vr(e,i,s)}),e}},yr=[0,0,0,0],br="-control",Tr="-main-bg",kr="-self-bg",wr="-tooltip-wrap",Er="-tooltip";class Kt extends Tt{constructor(t,{isDefault:e=!0,componentName:i=null}={}){super(),this.componentName=i,this.options=t,this.tipLeft=0,this.tipTop=0,this.container=null,this.containerContent=null,this.containerMainBackground=null,this.containerBackground=null,e&&(this.initContainer(),this.initTooltip(),this.initBackground())}get prefix(){return this.getOption("prefix",O)}isEnable(){return Boolean(this.options.enable)}update(t){this.options=Object.assign(this.options,t)}initContainer(){this.container=S("div",{class:this.prefix+br})}initBackground(){this.containerMainBackground=S("div",{class:this.prefix+Tr}),w(this.container,this.containerMainBackground),this.containerBackground=S("div",{class:this.prefix+kr}),w(this.containerMainBackground,this.containerBackground)}initTooltip(){this.tooltip=S("div",{class:this.prefix+wr}),w(this.container,this.tooltip),this.tooltipContent=S("div",{class:this.prefix+Er}),w(this.tooltip,this.tooltipContent);let t=this.getOption("tipText");t||(t=xt.get(this.componentName)),this.updateTipText(t),this.updateTipPosition()}updateDefaultBackgroundStyles(){let t=this.getOffsetWidth(),e=this.getOffsetHeight(),i={top:0,left:0,width:t,height:e,borderRadius:this.getBackgroundBorderRadius(),opacity:this.getBackgroundOpacity(),display:this.isBackgroundEnable()?"inline":"none"},s=this.getOption("background.color");s&&(i.background=s),A(this.containerBackground,i)}getOption(t,e){return x(this.options,t,e)}updateContainer(t){A(this.container,t),this.resize()}resize(){}parseIndent(t){let e=t!==void 0?t.split(" "):yr;return{top:parseFloat(e[0]),right:parseFloat(e[1]),bottom:parseFloat(e[2]),left:parseFloat(e[3])}}getIndent(){return this.parseIndent(this.getOption("indent"))}getBackgroundOpacity(){return this.getOption("background.opacity",1)}getBackgroundBorderRadius(){return this.getOption("background.fillet",0)*this.getOffsetHeight()/2}getBackgroundIndent(){return this.parseIndent(this.getOption("background.indent"))}getBackgroundIndentHeight(){if(this.isBackgroundEnable()){let t=this.getBackgroundIndent();return t.top+t.bottom}return 0}getBackgroundIndentWidth(){if(this.isBackgroundEnable()){let t=this.getBackgroundIndent();return t.left+t.right}return 0}normalScale(){this.containerContent&&this.setScale(this.containerContent,this.getScale()),this.isBackgroundEnable()&&this.setScale(this.containerBackground,this.getScale())}hoverScale(){!this.isScaleHoverEnable()||(this.containerContent&&this.setScale(this.containerContent,this.getHoverScale()),this.isBackgroundEnable()&&this.setScale(this.containerBackground,this.getHoverScale()))}getScale(){let t=parseFloat(this.getOption("scale",1));return t<=0?1:t}getHoverScale(){let t=this.getScale(),e=parseFloat(this.getOption("scaleHover",1));return e<=0?1:t>e?t:e}normalOpacity(){if(this.containerContent){let t=this.getOption("opacity",1);this.setOpacity(this.containerContent,t)}}setScale(t,e){A(t,{transform:"scale("+e+")"})}setOpacity(t,e){A(t,{opacity:e})}hoverOpacity(){if(this.isOpacityHoverEnable()&&this.containerContent){let t=this.getOption("opacityHover",1);this.setOpacity(this.containerContent,t)}}isPercentSize(){return Boolean(this.getOption("widthPercentEnable",!1))}isOpacityHoverEnable(){return Boolean(this.getOption("opacityHoverEnable",!1))}isBackgroundEnable(){return Boolean(this.getOption("background.enable",!1))}isScaleHoverEnable(){return Boolean(this.getOption("scaleHoverEnable",!1))}getWidthPercent(){let t=parseFloat(this.options.widthPercent);return t>1?1:t}getHeight(){return parseFloat(this.options.height)}getWidth(){return parseFloat(this.options.width)}getOffsetHeight(){return this.getHeight()+this.getBackgroundIndentHeight()}getOffsetWidth(){return this.getWidth()+this.getBackgroundIndentWidth()}canHide(){return!this.canShow()}canShow(){return this.container&&this.container.style.display!=="none"}show(){A(this.container,{display:"inline-block"})}hide(){A(this.container,{display:"none"})}toggleVisible(t){this.isEnable()&&(t?this.show():this.hide())}isTipEnable(){return Boolean(this.tooltip&&this.getOption("tipEnable",!1))}showTip(){!this.isTipEnable()||(A(this.tooltip,{opacity:1}),this.updateTipPosition())}hideTip(){!this.isTipEnable()||A(this.tooltip,{opacity:0})}updateTipText(t){this.tooltipContent.innerText=t}updateTipPosition(){if(!this.isTipEnable())return;let t=this.tooltipContent,e=this.container,i=6,s=0,r=0,o=0,u=0;if(e.parentElement===null)return;let l=e.offsetWidth,b=e.offsetHeight,y=t.offsetWidth,T=t.offsetHeight,k=this.getIndent();this.tipLeft>0&&(r=this.tipLeft),this.tipTop>0&&(s=this.tipTop);let R=(l-(k.right+k.left))/2,E=y/2,I=e.getBoundingClientRect(),V=e.parentElement.getBoundingClientRect(),_=I.left-V.left,M=I.right-V.right,N=I.top-V.top;N>-1&&N<T?(o=s+b+i,this.setTipBottom()):(this.setTipTop(),o=-1*(s+T+i)),A(t,{top:o}),_>-1&&_<E&&r===0||r>0&&r<y?(this.setTipPipLeft(),u=(r>0,r)):M>-1&&M<E&&r===0||r>0&&r+y>l?(this.setTipPipRight(),u=r>0?r-y:-1*(R+y/2)-k.right):(this.setTipPipCenter(),u=r>0?r-y/2:R-y/2),A(t,{left:u})}setTipTop(){lt(this.tooltipContent,{"role-pos":"top"})}setTipBottom(){lt(this.tooltipContent,{"role-pos":"bottom"})}setTipPipCenter(){lt(this.tooltipContent,{"role-pip":"center"})}setTipPipRight(){lt(this.tooltipContent,{"role-pip":"right"})}setTipPipLeft(){lt(this.tooltipContent,{"role-pip":"left"})}}class Sr extends Tt{constructor(){super(),this.options={},this.controls={}}initTemplate(){this.options.template&&(this.el=ks(this.options.template))}}const fn="ontouchstart"in window,Ot="PointerEvent"in window&&!et.isAndroid,Ie=!Ot&&!(fn&&et.isMobile),Ar=fn?5e3:4e3,ri=(()=>{let n=!1;try{const t=Object.defineProperty({},"passive",{get(){return n=!0,null}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return n})(),ut="window",Dt="keydown",ai="tab__focus",gn=6,Ir=300,mn=500,Cr=ri?{passive:!0}:!1;let oi,Ce;function vn(n){return n&&!(/\s+/.test(n)||typeof n=="object")}class Lt extends Sr{constructor(t,e={}){super(),this.el=t,this.directSelect=!!e.directSelect,this.dragged=!1,this.enableDoubleTap=!1,this.lastClick=0,this.lastStart=0,this.passive=!e.passive,this.pointerId=null,this.startX=0,this.startY=0,this.handlers={},this.options={},this.controls={},this.event=null,this.activeTimeout=-1,this.activeStage=!1,this.inactiveTime=0,this.enableActive=!!e.enableActive}resetActiveTimeout(){clearTimeout(this.activeTimeout),this.activeTimeout=-1,this.inactiveTime=0}userInactiveTimeout(){const t=this.inactiveTime-Xt();if(this.inactiveTime&&t>16){clearTimeout(this.activeTimeout),this.activeTimeout=setTimeout(this.userInactiveTimeout.bind(this),t);return}this.userInactive()}isUserActive(){return this.activeStage}userActive(t){!this.enableActive||(t===void 0&&(t=Ar),t&&t>0?(this.inactiveTime=Xt()+t,clearTimeout(this.activeTimeout),this.activeTimeout=setTimeout(this.userInactiveTimeout.bind(this),t)):this.resetActiveTimeout(),this.activeStage=!0,this.trigger(Ni))}userInactive(){!this.enableActive||(this.activeStage=!1,this.resetActiveTimeout(),this.trigger(Jt))}on(t,e,i){return vn(t)&&!this.handlers[t]&&yn[t]&&yn[t](this),super.on(t,e,i)}off(t,e,i){if(vn(t))Pe(this,t);else if(!t){const{handlers:s}=this;Object.keys(s).forEach(r=>{Pe(this,r)})}return super.off(t,e,i)}destroy(){this.off(),Ot&&Tn(this)}}function Ft(n){const t="init";if(n.handlers[t])return;const{el:e,passive:i}=n,s=ri?{passive:i}:!1,r=l=>{if(ee(e,ai),Lr(l))return;const{target:b,type:y}=l;if(n.directSelect&&b!==e)return;const{pageX:T,pageY:k}=kn(l);if(n.dragged=!1,n.lastStart=Xt(),n.startX=T,n.startY=k,Pe(n,ut),y==="pointerdown"&&l.isPrimary){if(!i){const{pointerId:R}=l;n.pointerId=R,e.setPointerCapture(R)}$(n,ut,"pointermove",o,s),$(n,ut,"pointercancel",u),$(n,ut,"pointerup",u)}else y==="mousedown"?($(n,ut,"mousemove",o,s),$(n,ut,"mouseup",u)):y==="touchstart"&&($(n,ut,"touchmove",o,s),$(n,ut,"touchcancel",u),$(n,ut,"touchend",u),i||li(l))},o=l=>{if(n.dragged)st(n,qt,l);else{const{pageX:b,pageY:y}=kn(l),T=b-n.startX,k=y-n.startY;T*T+k*k>gn*gn&&(st(n,He,l),n.dragged=!0,st(n,qt,l))}!i&&l.type==="touchmove"&&li(l)},u=l=>{if(clearTimeout(oi),!!n.el){if(Tn(n),Pe(n,ut),n.dragged)n.dragged=!1,st(n,We,l);else if(l.type.indexOf("cancel")===-1&&e.contains(l.target)){if(Xt()-n.lastStart>mn)return;const b=l.type==="pointerup"||l.type==="pointercancel",y=l.type==="mouseup"||b&&l.pointerType==="mouse";if(xr(n,l,y))return;y?st(n,J,l):(st(n,te,l),l.type==="touchend"&&!ri&&li(l))}}};Ot?$(n,t,"pointerdown",r,s):(Ie&&$(n,t,"mousedown",r,s),$(n,t,"touchstart",r,s)),Pr(),$(n,t,Vt,()=>{ee(e,ai)}),$(n,t,ye,()=>{Ce.event&&Ce.event.type===Dt&&Qt(e,ai)})}function Xt(){return new Date().getTime()}function Pr(){Ce||(Ce=new Lt(document).on("interaction"))}function xr(n,t,e){return n.enableDoubleTap?Xt()-n.lastClick<Ir?(st(n,e?Mi:Bi,t),n.lastClick=0,!0):(n.lastClick=Xt(),!1):!1}const yn={drag(n){Ft(n)},dragStart(n){Ft(n)},dragEnd(n){Ft(n)},click(n){Ft(n)},tap(n){Ft(n)},doubleTap(n){n.enableDoubleTap=!0,Ft(n)},doubleClick(n){n.enableDoubleTap=!0,Ft(n)},longPress(n){const t="longPress";if(et.isMobile||et.isIos){const e=()=>{clearTimeout(oi)};$(n,t,"touchstart",i=>{e(),oi=setTimeout(()=>{st(n,t,i)},mn)}),$(n,t,"touchmove",e),$(n,t,"touchcancel",e),$(n,t,"touchend",e)}else n.el.oncontextmenu=e=>(st(n,t,e),!1)},focus(n){$(n,ye,ye,t=>{xe(n,ye,t)})},blur(n){$(n,Vt,Vt,t=>{xe(n,Vt,t)})},over(n){(Ot||Ie)&&$(n,Ct,Ot?"pointerover":"mouseover",t=>{t.pointerType!=="touch"&&st(n,Ct,t)})},out(n){if(Ot){const{el:t}=n;$(n,kt,"pointerout",e=>{if(e.pointerType!=="touch"&&"x"in e){const i=document.elementFromPoint(e.x,e.y);t.contains(i)||st(n,kt,e)}})}else Ie&&$(n,kt,"mouseout",t=>{st(n,kt,t)})},move(n){(Ot||Ie)&&$(n,Pt,Ot?"pointermove":"mousemove",t=>{t.pointerType!=="touch"&&st(n,Pt,t)})},enter(n){$(n,Ui,Dt,t=>{(t.key==="Enter"||t.keyCode===13)&&(t.stopPropagation(),xe(n,Ui,t))})},keydown(n){$(n,Dt,Dt,t=>{xe(n,Dt,t)},!1)},gesture(n){const t="gesture",e=i=>st(n,t,i);$(n,t,"click",e),$(n,t,Dt,e)},interaction(n){const t="interaction",e=i=>{n.event=i};$(n,t,"mousedown",e,!0),$(n,t,Dt,e,!0)}};function bn(n){const t=n.ownerDocument||n;return t.defaultView||t.parentWindow||window}function $(n,t,e,i,s=Cr){let r=n.handlers[t],o=n.options[t];if(r||(r=n.handlers[t]={},o=n.options[t]={}),r[e])throw new Error(`${t} ${e} already registered`);r[e]=i,o[e]=s;const{el:u}=n;(t===ut?bn(u):u).addEventListener(e,i,s)}function Pe(n,t){const{el:e,handlers:i,options:s}=n,r=t===ut?bn(e):e,o=i[t],u=s[t];o&&(Object.keys(o).forEach(l=>{const b=u[l];typeof b=="boolean"?r.removeEventListener(l,o[l],b):r.removeEventListener(l,o[l])}),i[t]=null,s[t]=null)}function Tn(n){const{el:t}=n;n.pointerId!==null&&(t.releasePointerCapture(n.pointerId),n.pointerId=null)}function xe(n,t,e){const{el:i}=n,{target:s}=e;n.trigger(t,{type:t,sourceEvent:e,currentTarget:i,target:s})}function st(n,t,e){const{el:i}=n,s=Or(t,e,i);n.trigger(t,s)}function Or(n,t,e){const{target:i,touches:s,changedTouches:r}=t;let{pointerType:o}=t,u;s||r?(u=s&&s.length?s[0]:r[0],o=o||"touch"):(u=t,o=o||"mouse");const{pageX:l,pageY:b}=u;return{type:n,pointerType:o,pageX:l,pageY:b,sourceEvent:t,currentTarget:e,target:i}}function kn(n){return n.type.indexOf("touch")===0?(n.originalEvent||n).changedTouches[0]:n}function Lr(n){return"which"in n?n.which===3:"button"in n?n.button===2:!1}function li(n){n.preventDefault&&n.preventDefault()}class hi extends Kt{constructor(t,e={}){t.width=25,t.height=25,super(t,e),this.timerResize,this.textLength=0,this.init()}init(){this.initText(),this.initStyles(),this.updateText(this.getOption("text",""))}destroy(){Z(this.container),clearTimeout(this.timerResize)}update(t){t.width=25,t.height=25,super.update(t),this.init()}initText(){this.textContainer||(this.textContainer=S("div",{style:"position: absolute; white-space: nowrap;"}),this.text=S("div",{},this.options.text),w(this.textContainer,this.text),w(this.container,this.textContainer),this.containerContent=this.textContainer,this.ui=new Lt(this.textContainer).on("over",this.over,this).on("out",this.out,this))}initStyles(){let t="opacity 0.1s linear 0s, transform 0.1s linear 0s";A(this.container,{pointerEvents:"none"}),A(this.containerContent,{transition:t}),A(this.containerBackground,{transition:t});let e={position:"absolute",color:this.getOption("color","#fff"),width:"100%",whiteSpace:"nowrap",fontSize:this.getOption("fontSize",14)};A(this.text,e),this.updateBackgroundStyles()}updateBackgroundStyles(){if(!this.isBackgroundEnable()){this.containerBackground.style.display="none";return}this.updateDefaultBackgroundStyles();let t=this.getBackgroundIndent();A(this.text,{top:t.top/2+t.bottom/2,left:t.left/2+t.right/2})}isPercentSize(){return!1}over(t){this.hoverScale(),this.hoverOpacity()}out(t){this.normalScale(),this.normalOpacity()}updateText(t){!this.text||(this.text.innerText=t,this.textLength=t.length,this.updateResizeText())}isTextEmpty(){return this.text&&this.text.innerText.length===0}updateResizeText(){let t=Math.round(this.text.scrollWidth);if(this.options.width!==t&&t>0){this.options.width=Math.round(this.text.scrollWidth),this.options.height=Math.round(this.text.scrollHeight),A(this.text,{width:this.options.width}),clearTimeout(this.timerResize),this.updateDefaultBackgroundStyles(),this.trigger("resize-text");return}this.options.width===0&&(clearTimeout(this.timerResize),this.timerResize=setTimeout(()=>{this.updateResizeText(),this.trigger("resize-text")},100))}}const Rr=n=>/^#([A-Fa-f0-9]{3,4}){1,2}$/.test(n),Nr=(n,t)=>n.match(new RegExp(`.{${t}}`,"g")),Mr=n=>parseInt(n.repeat(2/n.length),16),Br=(n,t)=>{if(typeof n!="undefined")return n/256;if(typeof t!="undefined"){if(1<t&&t<=100)return t/100;if(0<=t&&t<=1)return t}return 1},Ur=(n,t)=>{const[e,i,s,r]=n;return`rgba(${e},${i},${s},${Br(r,t)})`},it=(n,t,e)=>{Rr(n)||(n="#000000");let i=Vr(n);return e&&i[3]!==void 0&&(i[3]=void 0),Ur(i,t)},Vr=n=>{const t=Math.floor((n.length-1)/3);return Nr(n.slice(1),t).map(Mr)};class Dr extends Kt{constructor(t){super(t),this.button=null,this.text=null,this.poster=null,this.stageSendClick=!1,this.stage=null,this.init()}init(){this.initButton(),this.initText(),this.isShowPoster()&&this.initPoster(),this.containerContent=this.button,this.ui=new Lt(this.button).on("click tap enter",this.click,this)}destroy(){this.ui.destroy(),this.ui=null,Z(this.container)}getSendClickStage(){return this.stageSendClick}setSendClickStage(t){this.stageSendClick=t}initText(){this.text=S("div",{});let t={display:"inline-block",whiteSpace:"initial",maxWidth:"initial",verticalAlign:"middle",padding:"10px"};this.isShowPoster()||(t.whiteSpace="pre"),A(this.text,t),w(this.button,this.text)}isShowPoster(){return Boolean(this.getOption("poster",!1))}initButton(){this.button=S("div",{});let t={display:"inline-block",fontSize:"14px",letterSpacing:".1px",minWidth:"85px",minHeight:"40px",textAlign:"center",width:"auto",whiteSpace:"pre",background:it(this.getOption("background.color")),color:it(this.getOption("color"))};this.isShowPoster()&&(t.paddingRight="95px"),A(this.button,t),w(this.container,this.button)}initPoster(){this.posterContainer=S("div");let t={display:"inline-block",verticalAlign:"middle"};A(this.posterContainer,t),w(this.button,this.posterContainer);let e={display:"block",width:"92px",height:"52px",verticalAlign:"middle"};this.poster=S("img"),A(this.poster,e),w(this.posterContainer,this.poster)}updateTextCountDown(t){let e=this.getOption("text");this.updateText(e+t)}updateText(t){this.text.innerHTML=t}click(t){this.getSendClickStage()&&(this.trigger(J,t),this.trigger(Wi,t))}}function ui(n,t){let e=["path","line","polygon","polyline","rect","circle","ellipse","g"],i=e.length;const s=o=>{for(let u=0,l=o.length;u<l;u++){let b=!o[u].hasAttribute("data-change-fill"),y=!o[u].hasAttribute("data-change-stroke"),T=o[u].getAttribute("fill"),k=o[u].getAttribute("stroke");T!=="none"&&b&&T&&(o[u].style.fill=t),k!=="none"&&y&&k&&(o[u].style.stroke=t);for(let R=0;R<i;R++){let E=o[u].querySelectorAll(e[R]);E.length&&s(E)}}},r=o=>{for(let u=0;u<i;u++){let l=o.querySelectorAll("svg "+e[u]);l.length&&s(l)}};for(let o=0,u=n.length;o<u;o++)r(n[o])}class wn extends Kt{constructor(t,e={}){t.width===void 0&&(t.width=20),t.height===void 0&&(t.height=20),super(t,e),this.uiOptions=e.uiOptions||{},this.icons={},this.stage=null,this.containerArea=null,this.init()}init(){this.initButton(),this.initIcons(),this.initStyle(),this.isEnable()&&this.out()}update(t){super.update(t),this.initIcons(),this.initStyle()}resize(){}destroy(){this.ui.destroy(),this.ui=null,Z(this.container)}initButton(){this.button=S("div"),w(this.container,this.button),this.containerContent=this.button,this.containerArea=S("div"),w(this.container,this.containerArea),this.ui=new Lt(this.containerArea,this.uiOptions).on("click tap enter",this.click,this).on("over",this.over,this).on("out",this.out,this)}updateButtonStyles(){let t=this.getIndentIcon();A(this.button,{position:"absolute",top:t.top/2+t.bottom/2,left:t.left/2+t.right/2})}updateAreaStyles(){let t=this.getOffsetWidth(),e=this.getOffsetHeight(),i=this.getScale();i<=1&&(i=1.4);let s=this.getIndentIcon();A(this.containerArea,{position:"absolute",opacity:0,top:s.top/2+s.bottom/2,left:s.left/2+s.right/2,width:t,height:e,transform:`scale(${i})`})}updateBackgroundStyles(){if(!this.isBackgroundEnable()){this.containerBackground.style.display="none";return}this.updateDefaultBackgroundStyles();let t=this.getBackgroundIndent(),e=this.getIndentIcon();A(this.button,{top:t.top/2+t.bottom/2+(e.top/2+e.bottom/2),left:t.left/2+t.right/2+(e.left/2+e.right/2)})}initStyle(){let t="opacity 0.1s linear 0s, transform 0.1s linear 0s";A(this.containerContent,{transition:t}),A(this.containerBackground,{transition:t}),this.updateIconsStyles(),this.updateButtonStyles(),this.updateBackgroundStyles(),this.updateAreaStyles()}updateIconsStyles(){let{icons:t,color:e}=this.options;for(let i in t)!t[i]||(this.icons[i].innerHTML=t[i]);this.changeColorIcons(e)}getIndentIcon(){return this.parseIndent(this.getOption("indentIcon"))}initIcons(){let{icons:t}=this.options;for(let e in t)if(!!t[e]&&!this.icons[e]){let i=S("div",{style:"display: none"});this.icons[e]=i,w(this.button,i)}}over(t){this.hoverColor(),this.hoverScale(),this.hoverOpacity(),this.showTip()}out(t){this.normalColor(),this.normalScale(),this.normalOpacity(),this.hideTip()}click(t){this.trigger(J,t),this.trigger(Wi,t)}isHoverColorEnable(){return Boolean(this.getOption("colorHoverEnable",!1))}isPercentSize(){return!1}normalColor(){if(!this.isHoverColorEnable())return;let t=this.getOption("color","#ffffff");this.changeColorIcons(t)}changeColorIcons(t){for(let e in this.icons){let i=this.icons[e];ui([i],t)}}hoverColor(){if(!this.isHoverColorEnable())return;let t=this.getOption("colorHover","#ffffff");this.changeColorIcons(t)}updateIconStageSprites(t,e,i){this.updateIconStage(t);let s=this.icons[t];if(!!s){if(i.length)for(let r=0,o=i.length;r<o;r++){let u=s.querySelector("#stage-"+i[r]);u&&Te(u,!1)}if(e.length)for(let r=0,o=e.length;r<o;r++){let u=s.querySelector("#stage-"+e[r]);u&&Te(u,!0)}}}updateIconStage(t){this.stage=t;for(let e in this.icons)!this.icons[e]||A(this.icons[e],{display:"none"});t&&this.icons[t]&&A(this.icons[t],{display:"inline-block"})}}const Fr=(n,t)=>Promise.race([n,new Promise((e,i)=>setTimeout(()=>i(),t))]),_r=n=>n?"isTrusted"in n&&n.isTrusted&&!et.isSafari&&et.isIE?!0:n.screenX!=0&&n.screenY!=0:!1;for(var En=[],_t=0;_t<64;)En[_t]=0|Math.sin(++_t%Math.PI)*4294967296;function ci(n){var t,e,i,s=[t=1732584193,e=4023233417,~t,~e],r=[],o=unescape(encodeURI(n))+"\x80",u=o.length;for(n=--u/4+2|15,r[--n]=u*8;~u;)r[u>>2]|=o.charCodeAt(u)<<8*u--;for(_t=o=0;_t<n;_t+=16){for(u=s;o<64;u=[i=u[3],t+((i=u[0]+[t&e|~t&i,i&t|~i&e,t^e^i,e^(t|~i)][u=o>>4]+En[o]+~~r[_t|[o,5*o+1,3*o+5,7*o][u]&15])<<(u=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*u+o++%4])|i>>>-u),t,e])t=u[1]|0,e=u[2];for(o=4;o;)s[--o]+=u[o]}for(n="";o<32;)n+=(s[o>>3]>>(1^o++)*4&15).toString(16);return n}const $r="https://wmplayer.biz/b",Hr="https://wmplayer.biz/t",Wr='<svg style="vertical-align: middle" width="20" height="20"><g fill-rule="nonzero" style="fill:#fff;" transform="translate(6.5, 3)"><polyline points="0.5 11.1296181 4.46599042 7.15862492 0.5 3.18760323 2.76676427 0.91821201 9 7.15862492 2.76676427 13.400974"></polyline></g></svg>',zr='<svg width="20" height="20"><g style="fill:#fff;"><path d="M3 6.375v6.25h3.1L10.741 17l.003-15-4.642 4.375H3zM13.442 5.622a.617.617 0 00-.964.001.885.885 0 00.001 1.12v-.001c.588.683.95 1.62.95 2.662 0 1.04-.361 1.975-.948 2.658a.88.88 0 00-.002 1.12.635.635 0 00.482.231c.175 0 .35-.077.482-.232.832-.965 1.348-2.305 1.348-3.777 0-1.475-.518-2.817-1.35-3.782z"/><path d="M14.994 3.863a.873.873 0 000 1.12c1.003 1.15 1.622 2.731 1.622 4.485 0 1.753-.619 3.333-1.62 4.484a.873.873 0 000 1.12.649.649 0 00.49.232.649.649 0 00.489-.232C17.225 13.64 18 11.653 18 9.468c0-2.186-.775-4.174-2.028-5.605a.63.63 0 00-.978 0z"/></g></svg>',jr='<svg width="20" height="20"><path style="fill:#fff;" d="M3 6.375v6.25h3.1L10.741 17l.003-15-4.642 4.375H3zM14.927 8.647L12.879 6.6 12 7.48l2.047 2.047L12 11.574l.88.88 2.047-2.048 2.047 2.048.88-.88-2.048-2.047 2.048-2.048-.88-.879-2.047 2.047z"/></svg>',qr=1,Qr=2,Yr=3,Gr=4,Kr=5,Xr=7,Zr=6,q={PREROLL:"preroll",MIDROLL:"midroll",PAUSEROLL:"pauseroll",POSTROLL:"postroll"},Sn={preroll:0,midroll:1,pauseroll:2,postroll:3},Jr="WMPLAYER_VPAID_LOADED",ta={LINEAR:"linear",NON_LINEAR:"non-linear",COMPANION:"companion"},ea={position:"absolute",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1001},An={position:"absolute",top:"0",left:"0",width:"100%",height:"100%",border:0,zIndex:0},ia={width:"100%",height:"100%",objectFit:"contain",minHeight:"auto",maxHeight:"none",minWidth:"auto",maxWidth:"none"},na={preload:"auto","x-webkit-airplay":"allow",airplay:"allow","webkit-playsinline":"playsinline",playsinline:"playsinline",cursor:"pointer"},sa=1e4,In=6e4,Cn=7,ra="||",aa="&&",oa=n=>n&&n.length>35,Pn=n=>!n||!n.documentElement?"":n.documentElement.localName,la=n=>{for(let t=0,e=n.length;t<e;t++){let i=n[t];if(String(i.apiFramework).toUpperCase()==="VPAID"||String(i.mimeType).indexOf("javascript")!==-1)return i.fileURL}return null},di=()=>new Date().getTime(),ha=(n,t)=>{n.sort((i,s)=>{let r=Math.abs(t-i.width),o=Math.abs(t-s.width);return r-o});const e=[Ke,Ge,ke,Ze,Xe];for(let i=0,s=n.length;i<s;i++){let r=n[i],o=Je(r.fileURL),u=String(r.mimeType).indexOf("javascript")!==-1;if(e.indexOf(o)!==-1&&!u)return r.fileURL}return null};class ua{constructor(t){this.vastTimeout=1e4,this.app=t,this.vastProviders=null,this.vastProvidersIgnore=[],this.vastProviderId=null,this.requestId=null,this.vast=null,this.vpaid=null,this.vmap=null,this.ab=!1,this.vastLastShowTime=0,this.vastVolume=.4,this.vastTracker=null,this.vastCreativeLinear=null,this.vastExtensions={},this.vastVPAIDUrl=null,this.vastMediaUrl=null,this.adIndex=0,this.vastUrls={},this.vastData={},this.vastType=null,this.currentProviderId=null,this.currentNetworkId=null,this.vastAnd=0,this.vastOr=0,this.vastCountPos=0,this.vastCount=0,this.vastUrls=[],this.cueActive=!1,this.prerollWorkOut=!1,this.pauserollWorkOut=!1,this.midrollWorkOut=!1,this.postrollWorkOut=!1,this.options={},this.vastContainer=null,this.vpaidFrame=null,this.vpaidSlot=null,this.videoSlot=null,this.slot=null,this.snapshot={},this.alwaysTracks=[],this.init(),this.initCheckBlock()}initOptions(){this.options=x(this.app.options,"modules.ads",{})}initContainer(){this.vastContainer||(this.vastContainer=S("div"),w(this.app.getElContainerWrapper(),this.vastContainer),this.vastContainer.style.zIndex=1001,A(this.vastContainer,ea))}initCheckBlock(){let t="position:absolute;height:1px;width:1px;background-color:transparent;",e=S("div",{style:t},"&nbsp;");const i="adv ads adsbox";e.setAttribute("style",t),e.setAttribute("class",i),document.body.appendChild(e),window.setTimeout(()=>{this.ab=e.offsetHeight===0,this.ab&&this.trackBlock(),document.body.removeChild(e)},60)}init(){this.initOptions(),this.initContainer(),this.hideContainer(),this.initNetworks()}initNetworks(){!this.isEnable()||(Object.keys(q).forEach(t=>{this.initVastUrlsByType(q[t])}),this.loadVastProviders().then(t=>{}).catch(t=>{}))}initVastUrlsByType(t){let e=[];for(let i=1;i<Cn;i++){let s=this.getOption(t+"Vast"+i),r=this.getOption(t+"VastQueue"+i);s!==""&&s&&e.push(i+":"+s+r)}this.vastUrls[t]=this.parseVastLogicalByPath(e.join(""))}parseVastLogicalByPath(t){let e=t.split(ra);for(let i=0;i<e.length;i++)e[i]=e[i].split(aa);return e=e.filter(i=>(i=i.filter(Boolean),i.length>0)),e}getOption(t,e){return x(this.options,t,e)}isEnable(){return Boolean(this.getOption("enable",!1))}isVastTypeEnable(t){return this.isEnable()&&Boolean(this.getOption(t+"Enable",!1))}isPrerollEnable(){return this.isVastTypeEnable(q.PREROLL)}isPauseRollEnable(){return this.isVastTypeEnable(q.PAUSEROLL)}isMidrollEnable(){return this.isVastTypeEnable(q.MIDROLL)}isPostrollEnable(){return this.isVastTypeEnable(q.POSTROLL)}isCanFormatEnable(t){return Boolean(t===q.PREROLL&&!this.isPrerollEnable()||t===q.MIDROLL&&!this.isMidrollEnable()||t===q.POSTROLL&&!this.isPostrollEnable()||t===q.PAUSEROLL&&!this.isPauseRollEnable())}isOpenType(t){return this.vastType===t?!1:!this.isCanFormatEnable(t)}isPauseForClick(){return Boolean(this.getOption("clickPauseEnable",!1))}isCloseForClick(){return Boolean(this.getOption("clickCloseEnable",!1))}isSkippable(){return!0}isVPAID(){return Boolean(this.vastVPAIDUrl!==null)}isVPAIDInit(){return Boolean(this.vpaid!==null&&typeof(this.vpaid.handshakeVersion==="function"))}canFormatEnable(t){return Boolean(t===q.PREROLL&&this.isPrerollEnable()||t===q.MIDROLL&&this.isMidrollEnable()||t===q.POSTROLL&&this.isPostrollEnable()||t===q.PAUSEROLL&&this.isPauseRollEnable())}get active(){return Boolean(this.cueActive&&this.isEnable())}set active(t){this.cueActive=Boolean(t)}async flushAlwaysTracks(){if(!this.lockAlwaysTracks){for(this.lockAlwaysTracks=!0;this.alwaysTracks.length>0;)this.sendTrack(this.alwaysTracks.splice(0,1)).then(()=>{}).catch(()=>{});this.lockAlwaysTracks=!1}}async sendTrack(t){t.requestId=this.requestId,t.playerId=this.app.getPlayerUID(),t.r=location.href,t.t=new Date().getTime();const e=new Image;e.src=si(Hr,t)}async track(t){if(this.requestId!==void 0){if(t.providerId=this.currentProviderId,t.type=Sn[this.vastType]!==void 0?Sn[this.vastType]:0,this.requestId===null){this.alwaysTracks.push(t);return}this.requestId&&(this.sendTrack(t),this.flushAlwaysTracks())}}getProviderIdAllowByType(t){let e=[];for(let i=1;i<Cn;i++){let s=this.getOption(t+"Vast"+i);oa(s)&&e.push(s)}return e=e.filter((i,s,r)=>this.vastProvidersIgnore.indexOf(i)===-1&&r.indexOf(i)===s),e.length?e[0]:null}getDocumentType(t){return!t||!t.documentElement?!1:t.documentElement.localName}getProviderById(t){return this.vastProviders&&this.vastProviders[t]?this.vastProviders[t]:null}async parseVMAP(t){try{return new VMAP(t)}catch{}return null}async parseVast(t){try{let i=await new le.exports.VASTParser().parseVAST(t);return!i||!i.ads.length?null:i}catch{}return null}getExtensionByName(t,e){return this.vastExtensions[t]?this.vastExtensions[t]:e}getExtensionClickThroughWait(){let t=parseInt(this.getExtensionByName("clickThroughWait",2));return isFinite(t)?t:0}parseExtensions(t){let e={};for(let i=0,s=t.extensions.length;i<s;i++){let r=t.extensions[i],o=r.attributes.type,u=null;r.children.length===1&&(u=r.children[0].value),e[o]=u}this.vastExtensions=e}parseCreative(){let t=this.vast,e=this.adIndex,i=t.ads[e];this.parseExtensions(i);for(let s=0,r=i.creatives.length;s<r;s++){let o=i.creatives[s],u=o.type;switch(o.apiFramework,o.adParameters,u){case ta.LINEAR:let l=o.mediaFiles;this.vastCreativeLinear=o,this.vastVPAIDUrl=la(l),this.vastMediaUrl=ha(l,300);break}}}createSnapshot(){let t=this.getCurrentPlayer();this.snapshot={played:!t.paused&&!t.ended},t.lock=!0}fakeActivities(){let t=this.getCurrentPlayer();t.muted=!0,setTimeout(()=>{t.muted=!1},1e3)}restoreSnapshot(){let t=this.getCurrentPlayer();this.snapshot&&(this.vastType===q.PREROLL&&(this.snapshot.played=!0),this.snapshot.played&&this.setCurrentPlayerPlay()),t.lock=!1}isLimitTimeBreak(t,e,i){let s=this.getStorageKeyTimeBreak(t,e,i),r=Number(this.getOption(t+"VastTimeBreak"+e,0)),o=Number(this.app.getStorageValue(s)),u=0;return r&&o&&(u=(di()-o)/In),u!==0&&u<=r}isFirstVisitBreak(t,e,i){let s=this.getStorageKeyFirstVisit(t,e,i),r=Number(this.getOption(t+"VastFirstVisitBreak"+e,!1)),o=Number(this.app.getStorageValue(s));return!!(r&&!o)}getStorageKeyFirstVisit(t,e,i){return"first_visit_break_"+t+"_"+e+"_"+i}getStorageKeyTimeBreak(t,e,i){return"time_break_"+t+"_"+e+"_"+i}storeLimitTimeBreak(t,e,i){let s=this.getStorageKeyTimeBreak(t,e,i);this.app.setStorageValue(s,di())}storeVastFirstVisitBreak(t,e,i){let s=this.getStorageKeyFirstVisit(t,e,i),r=Number(this.app.getStorageValue(s));this.app.setStorageValue(s,r++)}storeVastCurrentPosition(){let t="current_vast_";this.app.setStorageValue(t+"type",this.vastType),this.app.setStorageValue(t+"provider_id",this.currentProviderId),this.app.setStorageValue(t+"network_id",this.currentNetworkId)}getVastUrlsByType(t){return this.vastUrls[t]?this.vastUrls[t]:[]}async loadVast(t,e,i){let s=this.getProviderById(i);if(!s||!s.url)throw new Error("Empty url for provider");let r=s.url,o=[t,i,e,ci(r)].join(":"),u=this.vastData[o];return u||await oe(si(r,{playerProvider:"wmplayer"}),"xml",!1,sa,[])}async preloadVastFirst(t,e=0,i=0){let s=this.getVastUrlsByType(t);if(!s.length)return!1;let r=s[i]?s[i]:[];if(!r.length)return s[i+1]&&s[i+1][0]?await this.preloadVastFirst(t,0,i+1):!1;if(!r[e])return await this.preloadVastFirst(t,0,i+1);let o=r[e],{networkId:u,providerId:l}=this.parseVastId(o);if(this.isFirstVisitBreak(t,u,l))return await this.preloadVastFirst(t,e+1,i);if(this.isLimitTimeBreak(t,u,l))return await this.preloadVastFirst(t,e+1,i);let b=this.getProviderById(l);if(!b||!b.url)return await this.preloadVastFirst(t,e+1,i);let y=b.url,T=[t,l,u,ci(y)].join(":"),k;try{k=await this.loadVast(t,u,l)}catch{return await this.preloadVastFirst(t,e+1,i)}let R=Pn(k),E;if(R==="VAST"){try{E=await new le.exports.VASTParser().parseVAST(k)}catch(I){return this.app.debug.error("Parse error",I),await this.preloadVastFirst(t,e+1,i)}if(!E||!E.ads||!E.ads.length)return await this.preloadVastFirst(t,e+1,i);this.vastData[T]=k}return!0}parseVastId(t){let e=t.split(":"),i=e[0],s=e[1];return{networkId:i,providerId:s}}async load(){this.currentProviderId=null,this.currentNetworkId=null,this.resetStagesAd();let t=this.vastType,e=this.vastOr,i=this.vastAnd,s=this.getVastUrlsByType(t);if(!s.length)return this.app.debug.log("VNetwork vast urls empty"),!1;let r=s[e]?s[e]:[];if(!r.length)return!1;let o=r[i],{networkId:u,providerId:l}=this.parseVastId(o);if(this.currentProviderId=l,this.currentNetworkId=u,this.storeVastCurrentPosition(),this.vmap===null&&this.vast===null){let b;try{b=await this.loadVast(t,u,l)}catch(T){return this.app.debug.log("VNetwork error: ",T.message,{networkId:u,providerId:l}),!1}if(await this.parseAdData(b))return this.parseCreative(),!0}return!1}async parseAdData(t){let e=Pn(t),i=null;return e==="VMAP"&&(i=await this.parseVMAP(t)),e==="VAST"&&(i=await this.parseVast(t)),i!==null?(e==="VMAP"&&(this.vmap=i),e==="VAST"&&(this.vast=i),!0):!1}async runCue(){let t=this.getCurrentPlayer(),e=t.currentTime,i=t.duration;if(!e||!i)return null;t.playing;let s=t.currentPercent;return this.isOpenType(q.MIDROLL)&&s>=50?await this.open(q.MIDROLL):!this.isOpenType(q.POSTROLL)&&e>=i?await this.open(q.POSTROLL):null}checkDurationByType(t){if(this.getOption(t+"TimeLimitEnable",!1)){let i=this.getCurrentPlayer(),s=parseFloat(this.getOption(t+"TimeLimit",0))*In;if(s>0&&i.duration<s)return this.app.debug.log("VNetwork skip video is low duration"),!1}return!0}setCueStageByType(t,e){t===q.PREROLL&&(this.prerollWorkOut=e),t===q.PAUSEROLL&&(this.pauserollWorkOut=e),t===q.MIDROLL&&(this.midrollWorkOut=e),t===q.POSTROLL&&(this.postrollWorkOut=e),this.app.debug.log("set cue type",{type:t,stage:e})}async fetchOpenOr(t){let e=await this.load();return e&&(e=await this.play()),!e&&this.canNextOr()?(this.vast=null,this.vastOr=this.vastOr+1,this.vastAnd=0,await this.fetchOpenOr(t)):!!e}async fetchOpenAnd(t){let e=!1;if(this.vastCountPos===this.vastCount-1)return!1;let i=this.vast;if(i!==null&&i.ads&&i.ads.length>1){if(this.adIndex++,this.vastCountPos++,this.parseCreative(),e=await this.play(),!e)return await this.fetchOpenAnd(t)}else if(this.canNextAnd()&&(this.adIndex=0,this.vastCountPos++,this.vastAnd++,e=await this.load(),e&&(e=await this.play(),!e)))return await his.fetchOpenAnd(t);return!1}async open(t,e=!0){if(this.vastType===t)return!1;if(!this.canFormatEnable(t)||!this.checkDurationByType(t))return this.setCueStageByType(t,!0),!1;this.initVastCount(t),this.vastLastShowTime=di();let i=await this.fetchOpenOr(t);return this.setCueStageByType(t,!0),this.createSnapshot(),this.setCurrentPlayerPause(),this.app.debug.log("VNetwork open",{type:t,opened:i}),i||(await this.close(),this.restoreSnapshot(),!1)}canNextAnd(){let t=this.vastType,e=this.getVastUrlsByType(t);return e.length?!!(e[this.vastOr]&&e[this.vastOr][this.vastAnd+1]):!1}canNextOr(){let t=this.vastType,e=this.getVastUrlsByType(t);return e.length?!!(e[this.vastOr+1]&&e[this.vastOr+1][0]):!1}getCurrentPlayer(){return this.app.getMedia()}setCurrentPlayerPause(){this.getCurrentPlayer().pause()}setCurrentPlayerPlay(){this.getCurrentPlayer().play()}async close(){this.storeVastFirstVisitBreak(this.vastType,this.currentNetworkId,this.currentProviderId),this.storeLimitTimeBreak(this.vastType,this.currentNetworkId,this.currentProviderId),this.bindVPAID(!1),this.unBindEvents(),this.muteButton&&(this.muteButton.destroy(),this.muteButton=null),this.skipButton&&(this.skipButton.destroy(),this.skipButton=null),this.controlAdText&&(this.controlAdText.destroy(),this.controlAdText=null),this.videoSlot&&(Z(this.videoSlot),this.videoSlot=null),this.playSlot&&(Z(this.playSlot),this.playSlot=null),this.resetStagesAd(),this.hideContainer()}async nextOrClose(){return await this.fetchOpenAnd(this.vastType)?!0:(await this.close(),this.restoreSnapshot(),!1)}showContainer(){this.vastContainer.style.visibility="visible"}hideContainer(){this.vastContainer.style.visibility="hidden"}showPlaySlot(){this.playSlot&&(this.playSlot.style.display="block")}hidePlaySlot(){this.playSlot&&(this.playSlot.style.display="none")}initVastTracker(){let t=this.vast,e=this.adIndex,i=t.ads[e];this.vastTracker=new le.exports.VASTTracker(null,i,this.vastCreativeLinear);let s=this.vastType,r=Number(this.getOption(s+"SkipDelay",0));r=wt(r,0,60),r>0&&this.vastTracker.setSkipDelay(r)}initVastCount(t){this.vastType=t,this.vastCountPos=0,this.vastCount=this.getOption(t+"Count",1),this.vastAnd=0,this.vastOr=0,this.adIndex=0}async initVPAID(){try{if(this.createVPAIDFrame(),!await ie(this.vpaidFrame.contentDocument.body,this.vastVPAIDUrl))return this.app.debug.error(`VPAID Script ${this.vastVPAIDUrl} not load`),!1;this.slot=S("div"),A(this.slot,An),w(this.vpaidFrame.contentDocument.body,this.slot);let e=S("script",{type:"text/javascript"}),i=document.createTextNode('window.parent.postMessage("'+Jr+'","*")');w(e,i),w(this.vpaidFrame.contentDocument.body,e);let s=this.vpaidFrame.contentWindow.getVPAIDAd;if(s&&typeof s=="function")this.vpaid=s();else return this.app.debug.error("VPAID Script method getVPAIDAd not implementing"),!1;this.bindVPAID(!0);let r=Ts(this.videoSlot);this.vpaid.initAd(r.width,r.height,"normal",720,{AdParameters:this.vastCreativeLinear.adParameters},{slot:this.slot,videoSlot:this.videoSlot,videoSlotCanAutoPlay:!0})}catch(t){return this.app.debug.error(t),!1}return!0}async play(){if(!this.vast||!this.vast.ads.length)return!1;this.bindVPAID(!1),this.unBindEvents(),this.createVideoSlot(),this.createControls(),this.showContainer(),this.initVastTracker();let t=!1,e=this.isVPAID();if(e){try{this.hidePlaySlot(),t=await Fr(this.initVPAID(),1e4)}catch{this.app.debug.log("error timeout VPAID",1e4),t=!1}if(this.app.debug.log("init VPAID",t),!t)return this.vastTracker.errorWithCode(901),!1}return this.bindEvents(),!e&&this.vastMediaUrl!==null?(this.showPlaySlot(),lt(this.videoSlot,{src:this.vastMediaUrl}),await this.playPromise()):!0}playPromise(){return new Promise((t,e)=>{let i=this.videoSlot.play();if(i===void 0)return t(!0);i.then(()=>t(!0)).catch(s=>{let{message:r}=s;if(r.indexOf("no supported source")>-1)return t(!1);if(r.indexOf("user denied permission")>-1)return this.videoSlot.pause(),t(!0);this.onClickMute(),this.videoSlot.play().then(()=>{t(!0)}).catch(()=>{t(!1)})})})}onLoadStat(){}onCanPlay(){this.vastTracker&&this.vastTracker.trackImpression()}onPause(){this.vastTracker&&this.vastTracker.setPaused(!0)}onPlay(){this.vastTracker&&this.vastTracker.setPaused(!1)}onError(t){}onTime(){if(this.videoSlot){let t=this.videoSlot.currentTime;this.vastTracker&&this.vastTracker.setProgress(t)}}onTrackerClose(t){this.app.debug.log("vast-tracker close",t)}onTrackerSkip(t){this.app.debug.log("vast-tracker skip",t),this.trackSkip(),this.nextOrClose().then(e=>{this.app.debug.log("vast-next",e)})}onTrackerSkipCountdown(t){let e=Math.ceil(t);this.skipButton.updateTextCountDown(" "+e),t===0&&(this.skipButton.setSendClickStage(!0),this.skipButton.updateText(xt.get("skip")+" "+Wr))}onTrackerComplete(t){this.app.debug.log("vast-tracker complete",t),this.nextOrClose().then(e=>{this.app.debug.log("vast-next",e)}),this.trackComplete()}onTouchStart(t){this.vastMove=!0}onTouchMove(t){this.vastMove=!0}onTouchEnd(t){this.vastMove=!1,this.videoSlot.muted&&!this.unmutevast&&(this.unmutevast=!0,this.onUnmute()),this.fakeActivities()}onClick(t){if(!t&&!_r(t))return;let e=this.videoSlot.paused;if(this.videoSlot.ended,this.videoSlot.muted&&!this.unmutevast&&(this.unmutevast=!0,this.onUnmute()),e)this.playPromise();else{let i=this.videoSlot.currentTime,s=this.getExtensionClickThroughWait();if(s>0&&s>i)return;i>0&&this.vastTracker&&(this.vastTracker.click(),this.pauseAdClick())}}pauseAdClick(){if(this.isPauseForClick()){if(!this.isVPAID())return;this.videoSlot.pause()}}onClickPlaySlot(t){let e=this.videoSlot.paused;this.videoSlot.ended,this.videoSlot.muted&&!this.unmutevast&&(this.unmutevast=!0,this.onUnmute()),e&&this.playPromise()}onClickSkip(t){return this.vastTracker&&this.vastTracker.skip(),!1}onClickMute(t){if(this.isVPAID()){let e=this.vpaid.getAdVolume()>0?0:this.vastVolume;this.vpaid.setAdVolume(e)}else this.videoSlot.muted=!this.videoSlot.muted;return this.updateMuteStage(),!1}onMute(){this.isVPAID()?this.vpaid.setAdVolume(0):this.videoSlot.muted=!1,this.updateMuteStage()}onUnmute(){this.isVPAID()?this.vpaid.setAdVolume(this.vastVolume):this.videoSlot.muted=!1,this.updateMuteStage()}onTrackerCreativeView(){this.trackImpression()}resetStagesAd(){this.stageAdStart=!1,this.stageAdImpression=!1,this.stageAdSkip=!1,this.stageAdComplete=!1}trackImpression(){this.stageAdImpression||(this.stageAdImpression=!0,this.track({eventType:Gr}).catch(()=>{}))}trackComplete(){this.stageAdComplete||(this.stageAdComplete=!0,this.track({eventType:Kr}).catch(()=>{}))}trackStart(){this.stageAdStart||(this.stageAdStart=!0,this.track({eventType:Qr}).catch(()=>{}))}trackSkip(){this.stageAdSkip||(this.stageAdSkip=!0,this.track({eventType:Yr}).catch(()=>{}))}trackBlock(){this.stageAdBlock||(this.stageAdBlock=!0,this.track({eventType:Zr}).catch(()=>{}))}trackInit(){this.stageAdInit||(this.stageAdInit=!0,this.track({eventType:qr}).catch(()=>{}))}onTrackerStar(){this.trackStart()}onClickThrough(t){try{this.app.debug.log("callback onClickThrough",t),window.open(t,"_blank").focus()}catch{}this.track({eventType:Xr}).catch(()=>{})}onVolumeChange(){let t=!1;this.isVPAID()?(t=this.vpaid.getAdVolume()===0,this.vastTracker&&this.vastTracker.setMuted(t)):(this.vastTracker&&this.vastTracker.setMuted(this.videoSlot.muted),t=this.videoSlot.muted);let e=t?"mute":"volume";this.muteButton&&this.muteButton.updateIconStage(e)}onComplete(t){this.vastTracker&&this.vastTracker.complete()}onVPAIDAdLinearChange(){this.app.debug.log("callback onVPAIDAdLinearChange")}onVPAIDAdSkippableStateChange(){this.app.debug.log("callback onVPAIDAdSkippableStateChange")}onVPAIDAdLoaded(){let t=this.vpaid.getAdLinear();this.app.debug.log("callback onVPAIDAdLoaded",t),t!=="nonlinear"&&(this.vastVolume=this.vpaid.getAdVolume(),this.vpaid.startAd())}onVPAIDAdViewable(){this.app.debug.log("callback onVPAIDAdViewable",arguments),this.trackImpression()}onVPAIDAdClickThru(t,e,i){if(i!==!1){if(t.indexOf("//")!==-1&&i===!0){this.vastTracker.emit(zi,t),this.app.debug.log("vast tracker send event click",zi,t);return}this.vastTracker&&(this.app.debug.log("vast tracker click"),this.vastTracker.click())}}onVPAIDStartAd(){let t=this.videoSlot.paused,e=this.videoSlot.ended,i=!t&&!e;this.app.debug.log("callback onVPAIDStartAd",arguments,{stagePlay:i,stagePause:t,stageEnded:e}),this.trackStart()}onVPAIDStopAd(){this.app.debug.log("callback onVPAIDStopAd",arguments)}onVPAIDSkipAd(){this.app.debug.log("onVPAIDSkipAd"),this.vpaid.getAdRemainingTime(),this.trackSkip()}onVPAIDAdImpression(){this.trackImpression()}onVPAIDAdVideoStart(){this.app.debug.log("onVPAIDAdVideoStart")}onVPAIDAdVideoComplete(){this.app.debug.log("onVPAIDAdVideoComplete"),this.trackComplete()}onVPAIDAdUserAcceptInvitation(){this.app.debug.log("onVPAIDAdUserAcceptInvitation")}onVPAIDAdPaused(){this.showPlaySlot(),this.app.debug.log("onVPAIDAdPaused")}onVPAIDAdPlaying(){this.hidePlaySlot(),this.app.debug.log("onVPAIDAdPlaying")}onVPAIDAdLog(t){this.app.debug.log("VPAID AdLog:",t)}getVPAIDEvents(){return{AdClickThru:this.onVPAIDAdClickThru,AdStarted:this.onVPAIDStartAd,AdStopped:this.onVPAIDStopAd,AdSkipped:this.onVPAIDSkipAd,AdLoaded:this.onVPAIDAdLoaded,AdLinearChange:this.onVPAIDAdLinearChange,AdSkippableStateChange:this.onVPAIDAdSkippableStateChange,AdImpression:this.onVPAIDAdImpression,AdVideoStart:this.onVPAIDAdVideoStart,AdVideoComplete:this.onVPAIDAdVideoComplete,AdUserAcceptInvitation:this.onVPAIDAdUserAcceptInvitation,AdPaused:this.onVPAIDAdPaused,AdPlaying:this.onVPAIDAdPlaying,AdLog:this.onVPAIDAdLog,AdViewable:this.onVPAIDAdViewable}}bindVPAID(t){if(!this.isVPAIDInit())return;let e=this.getVPAIDEvents();for(let i in e)e.hasOwnProperty(i)&&(t?this.vpaid.subscribe(e[i],i,this):this.vpaid.unsubscribe(e[i],i,this))}getTrackerEvents(){return{creativeView:this.onTrackerCreativeView,start:this.onTrackerStar,clickthrough:this.onClickThrough,skip:this.onTrackerSkip,close:this.onTrackerClose,"skip-countdown":this.onTrackerSkipCountdown,complete:this.onTrackerComplete}}getVideoSlotEvents(){return{loadstart:this.onLoadStat,canplay:this.onCanPlay,play:this.onPlay,pause:this.onPause,volumechange:this.onVolumeChange,ended:this.onComplete,timeupdate:this.onTime,error:this.onError}}unBindEvents(){this.vastTracker&&this.vastTracker.removeAllListeners();let t=this.getVideoSlotEvents();for(let e in t)gt.call(this,this.videoSlot,e,t[e]);this.muteButton&&this.muteButton.off("click tab",this.onClickMute.bind(this)),this.skipButton&&this.skipButton.off("click tab",this.onClickSkip.bind(this)),this.isVPAID()||(et.isMobile&&(gt.call(this,this.playSlot,"touchstart",this.onTouchStart.bind(this)),gt.call(this,this.playSlot,"touchmove",this.onTouchMove.bind(this)),gt.call(this,this.playSlot,"touchend",this.onTouchEnd.bind(this))),gt.call(this,this.playSlot,"click",this.onClick.bind(this)))}bindEvents(){let t=this.getTrackerEvents();for(let i in t)this.vastTracker.on(i,t[i].bind(this));let e=this.getVideoSlotEvents();for(let i in e)G.call(this,this.videoSlot,i,e[i].bind(this));this.muteButton.on("click tab",this.onClickMute.bind(this)),this.skipButton.on("click tab",this.onClickSkip.bind(this)),this.isVPAID()||(et.isMobile&&(G.call(this,this.playSlot,"touchstart",this.onTouchStart.bind(this)),G.call(this,this.playSlot,"touchmove",this.onTouchMove.bind(this)),G.call(this,this.playSlot,"touchend",this.onTouchEnd.bind(this))),G.call(this,this.playSlot,"click",this.onClick.bind(this)))}createMute(){this.muteButton||(this.muteButton=new wn({color:this.getOption("vastStyle.mute.color","#ffffff"),icons:{volume:zr,mute:jr},background:{enable:!0,indent:"10 10 10 10",color:this.getOption("vastStyle.mute.background","#000000C4")}}),A(this.muteButton.container,{left:8,bottom:48,zIndex:2}),w(this.vastContainer,this.muteButton.container)),this.updateMuteStage()}updateMuteStage(){if(this.muteButton&&this.videoSlot){let e=this.videoSlot&&this.videoSlot.muted?"mute":"volume";this.muteButton.updateIconStage(e)}}createClose(){}createCountdownSkip(){if(!this.skipButton){let t=xt.get("adWillEndIn");this.isSkippable()&&(t=xt.get("adSkipThrough")),this.skipButton=new Dr({position:"right",text:t,color:this.getOption("vastStyle.skip.color","#ffffff"),background:{enable:!0,indent:"10 10 10 10",color:this.getOption("vastStyle.skip.background","#000000C4")}}),A(this.skipButton.container,{bottom:0,right:0,zIndex:1}),w(this.vastContainer,this.skipButton.container)}this.skipButton.setSendClickStage(!1)}createTitle(){if(this.controlAdText)return;let t="vastStyle.text",e=this.getOption(`${t}.text`,""),i=e.length?e:xt.get("advertisement"),s=this.vastCount,r=this.vastCountPos+1;s>1&&(i+=": "+r+"/"+s),this.controlAdText=new hi({color:this.getOption(`${t}.color`,"#ffffff"),background:{enable:!0,color:this.getOption(`${t}.background`,"000000C4"),opacity:.7},text:i}),A(this.controlAdText.container,{top:0,left:0}),w(this.vastContainer,this.controlAdText.container),this.controlAdText.updateText(i)}createPlaySlot(){this.playSlot||(this.playSlot=S("div"),A(this.playSlot,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",display:"none",cursor:"pointer",zIndex:1}),w(this.vastContainer,this.playSlot))}createControls(){this.createPlaySlot(),this.createTitle(),this.createMute(),this.createClose(),this.createCountdownSkip()}createVPAIDFrame(){this.vpaidFrame=S("iframe",{id:"wmplayer-vpaid",allow:"autoplay",scrolling:"no",allowFullScreen:""}),A(this.vpaidFrame,An),w(this.vastContainer,this.vpaidFrame)}createVideoSlot(){if(this.videoSlot)return;this.videoSlot=S("video"),w(this.vastContainer,this.videoSlot),this.videoSlot.controls=!1,A(this.videoSlot,ia),A(this.videoSlot,{cursor:"pointer",zIndex:-1}),lt(this.videoSlot,na);let t=this.videoSlot.play();t!==void 0&&t.then(()=>{}).catch(e=>{e.message.indexOf("interact")>0&&(this.videoSlot.muted=!0,lt(this.videoSlot,{muted:"true"}))})}async loadVastProviders(){if(this.vastProviders!==null)return!0;try{let t=this.app.getPlayerUID(),e=location.hostname,i=si($r,{id:t,domain:e});this.vastProviders=await oe(i,"json",!1),this.requestId=this.vastProviders.requestId,this.app.debug.log("VNetwork request",this.requestId),this.trackInit()}catch(t){return console.error("load err",t),!1}return!0}canOpen(t){return!!this.isEnable()}checkIsPlayAd(t){return!0}}class ca extends Kt{constructor(t,e={}){super(t,{isDefault:!1}),this.init()}init(){this.initPanel(),this.initStyles()}isEnable(){return!0}update(t){super.update(t),this.initStyles()}initStyles(){A(this.container,{height:this.getHeight()});let t=this.getOption("color"),e=this.getOption("opacity",1),i=this.getOption("gradient"),s={backgroundColor:t,opacity:e,borderRadius:this.getOption("fillet",0)*this.getHeight()/2+"px"};i&&(s.backgroundColor="transparent",s.background="linear-gradient("+it(t,0)+", "+it(t)+")"),A(this.containerBackground,s)}initPanel(){this.container||(this.container=S("div",{class:`${O}-control-panel`}),this.containerBackground=S("div",{class:`${O}-control-panel-bg`}),w(this.container,this.containerBackground))}}const da=(n,t)=>{const e=Object.getOwnPropertyDescriptor(n,t);return e!==void 0&&!!e.get},pa=(n,t)=>{const e=Object.getOwnPropertyDescriptor(n,t);return e!==void 0&&!!e.set};function fa(n,t){let e=this.controls.media;if(["play","pause","stop","speed"].includes(n)){if(t===void 0&&da(e,n))return e[n];if(t!==void 0&&pa(e,n))return e[n]=t;if(typeof e[n]=="function")return e[n](t)}console.log("api media",e)}const ga=n=>Math.trunc(n/60/60%60,10),ma=n=>Math.trunc(n/60%60,10),va=n=>Math.trunc(n%60,10),xn=n=>`0${n}`.slice(-2);function pi(n=0,t=!1,e=!1){if(typeof n!="number")return pi(null,t,e);let i=ga(n);const s=ma(n),r=va(n);return t||i>0?i=`${i}:`:i="",`${e&&n>0?"-":""}${i}${xn(s)}:${xn(r)}`}class ya extends hi{init(){super.init(),this.updateText("00:00")}updateText(t){let e="{time}";t=this.getOption("template",e).replace(e,t),super.updateText(t)}updateTime(t){this.updateText(pi(t))}}class ba{constructor(t){this.app=t,this.thumbnails=[],this.loadedThumbnails=[],this.showingThumb=void 0,this.seekTime=0,this.loaded=!1,this.showThumbScreen=!1,this.sizeSpecifiedInCSS=!1,this.init()}get options(){let t=this.app.options.modules.previewThumb;return t!==void 0?t:{}}get enable(){return Boolean(this.options.enable)}get thumbScreenEnable(){return Boolean(this.options.thumbScreenEnable)}set thumbScreen(t){return this.showThumbScreen=t}get thumbScreen(){return this.thumbScreenEnable?this.showThumbScreen:!1}init(){this.initTemplate(),this.load()}canReady(){return this.thumbnails.length>0&&this.enable}load(){this.enable&&this.getThumbnails().then(()=>{this.autoSizingContainer(),this.loaded=this.thumbnails.length>0})}initTemplate(){let t=this.getSeekControl();!t||(this.container||(this.container=S("div",{class:`${O}-control ${O}-control-thumb-container`}),this.imageContainer=S("div",{class:`${O}-image-container`}),this.scrubbingContainer=S("div",{class:`${O}-control-scrubbing-container`}),w(this.app.getElContainerWrapper(),this.scrubbingContainer),w(this.container,this.imageContainer),w(t.container,this.container)),A(this.container,{position:"absolute",transform:"scale(.8)",transition:"transform .2s .1s ease,opacity .2s .1s ease",boxShadow:"0 1px 2px rgba(0,0,0,.15)",pointerEvents:"none",backgroundColor:this.options.color,padding:this.options.padding+"px",opacity:0,borderRadius:this.options.fillet}),A(this.imageContainer,{overflow:"hidden",position:"relative",width:"100%",height:"100%",borderRadius:2}))}parseVttTime(t){let e=t.indexOf("-->"),i=t.substr(0,e),s=t.substr(e+4,12),r=this.covertVttTimeToInt(i),o=this.covertVttTimeToInt(s);return{startTime:r,endTime:o,rawStart:i,rawEnd:s}}parseVtt(t){const e="#xywh=",i=[];return t.split(/\r\n\r\n|\n\n|\r\r/).forEach(r=>{const o={};r.split(/\r\n|\n|\r/).forEach(l=>{if(l.indexOf("-->")!==-1&&l.indexOf(":")!==-1){const b=this.parseVttTime(l);o.startTime=b.startTime,o.endTime=b.endTime}else if(l.indexOf(e)!==-1){const b=l.trim().split(e);[o.file]=b,b[1]&&([o.x,o.y,o.w,o.h]=b[1].split(","))}}),o.file&&i.push(o)}),i}getThumbnails(){return new Promise(t=>{let{thumb:e}=this.app.options,i=typeof e=="string"?[e]:e;if(i==null)return t();let s=i.map(r=>this.getThumbnail(r));Promise.all(s).then(()=>{this.thumbnails.length&&this.thumbnails.sort((r,o)=>r.height-o.height),t()})})}getThumbnail(t){return new Promise(e=>{if(!t)return e();t.indexOf("{time}")!==-1?this.requestFlow(t,e):this.requestVtt(t,e)})}getFlowCount(){let t=this.app.options.thumbCount;return t?parseInt(t,10):0}getFlowInterval(){let t=this.app.options.thumbInterval;return t?parseFloat(t):0}requestFlow(t,e){this.getDuration();let i=this.getFlowInterval(),s=this.getFlowCount();if(!isFinite(s)||s===0){e();return}const r=this.createThumbnailObj("flow");for(let o=0,u=s;o<u;o++){let l=t.replace("{time}",o+1),b=o*i,y=(o+1)*i-1;r.frames.push({startTime:b,endTime:y,file:l,x:0,y:0,h:null,w:null})}this.pushThumbnails(r,e)}createThumbnailObj(t){return{frames:[],height:null,width:null,urlPrefix:"",provider:t}}pushThumbnails(t,e){if(!t.frames.length){e();return}const i=new Image;i.onload=()=>{t.height=i.naturalHeight,t.width=i.naturalWidth,this.thumbnails.push(t),e()},i.src=t.urlPrefix+t.frames[0].file}requestVtt(t,e){oe(t,"text",!0).then(i=>{const s=this.createThumbnailObj("vtt");s.frames=this.parseVtt(i),!s.frames[0].file.startsWith("/")&&!s.frames[0].file.startsWith("http://")&&!s.frames[0].file.startsWith("https://")&&(s.urlPrefix=t.substring(0,t.lastIndexOf("/")+1)),this.pushThumbnails(s,e)})}covertVttTimeToInt(t){let e=t.split(":");return e.length>1?parseInt(e[0],10)*3600+parseInt(e[1],10)*60+(e.length===3?parseInt(e[2]):0):0}getPlayer(){return this.app.controls.media}getDuration(){let t=this.getPlayer();return t?t.duration:0}getSeekControl(){return this.app.controls.seek}startMove(t){if(!this.enable)return;let e=this.getSeekControl();const i=this.getDuration();if(!i)return;const s=e.elRail.getBoundingClientRect(),r=100/s.width*(t.pageX-s.left);this.seekTime=i*(r/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>i-1&&(this.seekTime=i-1),this.mousePosX=t.pageX,this.showImageAtCurrentTime()}endMove(t){!this.enable||this.toggleThumbContainer(!1,!0)}startScrubbing(){!this.enable||this.thumbScreen===!1&&(this.thumbScreen=!0,this.getDuration()&&this.thumbScreen&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}endScrubbing(){!this.enable||(this.thumbScreen=!1,this.toggleScrubbingContainer(!1))}showImageAtDash(){this.getPlayer().dash.getThumbnail(this.seekTime,t=>{})}showImageAtNative(){this.thumbScreen?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const t=this.thumbnails[0].frames.findIndex(s=>this.seekTime>=s.startTime&&this.seekTime<=s.endTime),e=t>=0;let i=0;this.thumbScreen||this.toggleThumbContainer(e,!1),e&&(this.thumbnails.forEach((s,r)=>{this.loadedThumbnails.includes(s.frames[t].file)&&(i=r)}),t!==this.showingThumb&&(this.showingThumb=t,this.loadImage(i)))}showImageAtCurrentTime(){if(!this.loaded&&this.getPlayer().isDASH)return this.showImageAtDash();if(this.loaded)return this.showImageAtNative()}loadImage(t){t=t===void 0?t:0;const e=this.showingThumb,i=this.thumbnails[t],{urlPrefix:s}=i,r=i.frames[e],o=i.frames[e].file,u=s+o;if(!this.currentImageElement||this.currentImageElement.dataset.filename!==o){this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const l=new Image;l.src=u,l.dataset.index=e,l.dataset.filename=o,this.showingThumbFilename=o,l.onload=()=>{this.showImage(l,r,t,e,o,!0)},this.loadingImage=l,this.removeOldImages(l)}else this.showImage(this.currentImageElement,r,t,e,o,!1),this.currentImageElement.dataset.index=e,this.removeOldImages(this.currentImageElement)}removeOldImages(t){Array.from(this.currentImageContainer.children).forEach(e=>{if(e.tagName.toLowerCase()!=="img")return;const i=this.usingSprites?500:1e3;if(e.dataset.index!==t.dataset.index&&!e.dataset.deleting){e.dataset.deleting=!0;const{currentImageContainer:r}=this;setTimeout(()=>{r.removeChild(e)},i)}})}showImage(t,e,i,s,r,o){this.setImageSizeAndOffset(t,e),o&&(w(this.currentImageContainer,t),this.currentThumbImage=t,this.loadedThumbnails.includes(r)||this.loadedThumbnails.push(r)),this.preloadNearby(s,!0).then(this.preloadNearby(s,!1)).then(this.getHigherQuality(i,t,e,r))}preloadNearby(t,e=!0){return new Promise(i=>{setTimeout(()=>{const s=this.thumbnails[0].frames[t].file;if(this.showingThumbFilename===s){let r;e?r=this.thumbnails[0].frames.slice(t):r=this.thumbnails[0].frames.slice(0,t).reverse();let o=!1;r.forEach(u=>{const l=u.file;if(l!==s&&!this.loadedThumbnails.includes(l)){o=!0;const{urlPrefix:b}=this.thumbnails[0],y=b+l,T=new Image;T.src=y,T.onload=()=>{this.loadedThumbnails.includes(l)||this.loadedThumbnails.push(l),i()}}}),o||i()}},300)})}getHigherQuality(t,e,i,s){if(t<this.thumbnails.length-1){let r=e.naturalHeight;this.usingSprites&&(r=i.h),r<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===s&&this.loadImage(t+1)},300)}}toggleThumbContainer(t=!1,e=!1){let i=this.options.opacity||1;this.container.style.opacity=t?i:0,!t&&e&&(this.showingThumb=null,this.showingThumbFilename=null)}toggleScrubbingContainer(t=!1){let e=this.options.thumbScreenOpacity||1;this.scrubbingContainer.style.opacity=t?e:0,t||(this.showingThumb=null,this.showingThumbFilename=null)}autoSizingContainer(){this.imageContainer.clientHeight>20&&(this.sizeSpecifiedInCSS=!0)}get currentImageElement(){return this.thumbScreen?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(t){this.thumbScreen?this.currentScrubbingImageElement=t:this.currentThumbnailImageElement=t}get currentImageContainer(){return this.thumbScreen?this.scrubbingContainer:this.imageContainer}get thumbAspectRatio(){return this.thumbnails[0].width/this.thumbnails[0].height}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbContainerHeight(){const t=this.getPlayer().el.clientWidth;return this.thumbScreen?Math.floor(t/this.thumbAspectRatio):Math.floor(t/this.thumbAspectRatio/4)}setThumbContainerSizeAndPos(){if(!this.sizeSpecifiedInCSS){const t=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);A(this.imageContainer,{height:this.thumbContainerHeight,width:t})}this.setThumbContainerPos()}setThumbContainerPos(){let t=0,e=0;const i=this.getSeekControl(),s=i.container,r=i.elProgress.getBoundingClientRect(),o=s.getBoundingClientRect(),u=s.parentElement.getBoundingClientRect(),l=this.container,b=o.left-r.left+10,y=o.right-r.left-l.clientWidth-10;t=this.mousePosX-r.left-l.clientWidth/2,t<b&&(t=b),t>y&&(t=y);let T=o.top-u.top;T>-1&&T<this.thumbContainerHeight?e=s.offsetHeight+10:e=-1*(this.thumbContainerHeight+10),A(l,{top:e,left:t})}setScrubbingContainerSize(){}setImageSizeAndOffset(t,e){if(!this.usingSprites)return;const i=e.h!==null?e.h:t.naturalHeight,s=this.thumbContainerHeight/i;A(t,{position:"absolute",maxWidth:"none",maxHeight:"none"}),t.style.height=`${Math.floor(t.naturalHeight*s)}px`,t.style.width=`${Math.floor(t.naturalWidth*s)}px`,t.style.left=`-${e.x*s}px`,t.style.top=`-${e.y*s}px`}}const $t={HORIZONTAL:"horizontal",VERTICAL:"vertical"},Oe=function(n){const t=bs(n),e=window.pageXOffset;return e&&et.isAndroid&&document.body.parentElement.getBoundingClientRect().left>=0&&(t.left-=e,t.right-=e),t};class Ta extends Kt{constructor(t,e={}){super(t,e),this.hoverSizeEnable=!1,this.hoverSize=!1,this.options.orientation||(this.options.orientation=$t.HORIZONTAL),this.init()}init(){this.initSlider(),this.initStyles()}update(t){super.update(t),this.initStyles()}initSlider(){this.sliderContainer=S("div",{class:this.prefix+"__slider-"+this.getOrientation(),style:"position: absolute; cursor: pointer; width: 100%; height: 100%; transition: opacity 0.1s linear 0s, transform 0.1s linear 0s;"}),w(this.container,this.sliderContainer),this.initSliderBuffer(),this.initSliderProgress(),this.initSliderKnob(),this.initSliderRail(),this.ui=new Lt(this.elRail,{passive:!0}),this.ui.on("dragStart",this.dragStart,this).on("drag",this.dragMove,this).on("move",this.move,this).on("dragEnd",this.dragEnd,this).on("click tap",this.tap,this).on("over",this.over,this).on("out",this.out,this)}initSliderKnob(){this.elThumb=S("div",{class:`${this.prefix}__thumb`}),w(this.sliderContainer,this.elThumb),this.elThumbLabel=S("div",{class:`${this.prefix}__thumb-label`}),w(this.elThumb,this.elThumbLabel)}initSliderProgress(){this.elProgress=S("div",{class:`${this.prefix}__progress`}),w(this.sliderContainer,this.elProgress)}initSliderBuffer(){this.elBuffer=S("div",{class:`${this.prefix}__buffer`}),w(this.sliderContainer,this.elBuffer)}initSliderRail(){this.elRail=S("div",{class:`${this.prefix}__rail`}),w(this.sliderContainer,this.elRail)}updateBackgroundSize(){if(!this.isBackgroundEnable())return;let t=this.getBackgroundIndent(),e=this.isPercentSize()?this.container.offsetWidth:this.getOffsetWidth(),i=this.getOffsetHeight();A(this.containerBackground,{width:e,height:i}),A(this.sliderContainer,{width:e-t.left-t.right,left:t.left,top:t.bottom})}setStyleLine(t){let e="100%",i=this.getHeight();A(t,{position:"absolute",top:0,left:0,width:e,height:i})}updateBackgroundStyles(){if(this.isBackgroundEnable()){let t={borderRadius:this.getBackgroundBorderRadius()};A(this.elBuffer,t),A(this.elProgress,t),A(this.containerMainBackground,{position:"relative",display:"block"}),this.setStyleLine(this.containerBackground);let e={position:"absolute",borderRadius:this.getBackgroundBorderRadius(),opacity:this.getBackgroundOpacity()},i=this.getOption("background.color");i!==void 0&&(e.background=it(i)),A(this.containerBackground,e)}else A(this.containerMainBackground,{display:"none"}),A(this.elBuffer,{borderRadius:0}),A(this.elProgress,{borderRadius:0})}updateThumbLabelStyles(){A(this.elThumb,{width:0});let t=this.getHeight(),e=parseFloat(this.getOption("label.fillet",0)),i=this.parseIndent(this.getOption("label.indent","0 0 0 0"));A(this.elThumbLabel,{position:"absolute",top:i.top/2-i.bottom/2,left:-t/2+(i.left/2-i.right/2),width:t,height:t,opacity:this.getOption("label.opacity",1),background:it(this.getOption("label.color"),"#ffffff"),borderRadius:e*t/2,display:this.getOption("label.enable",!1)?"inline":"none"}),this.out(null)}initStyles(){this.setStyleLine(this.elRail),this.setStyleLine(this.elThumb),this.setStyleLine(this.elBuffer),this.setStyleLine(this.elProgress),this.updateThumbLabelStyles(),A(this.elProgress,{background:it(this.getOption("color")),opacity:this.getOption("opacityProgress",1)}),this.options.colorBuffer&&A(this.elBuffer,{background:it(this.getOption("colorBuffer"))}),this.options.opacityBuffer&&A(this.elBuffer,{opacity:this.options.opacityBuffer}),this.updateBackgroundStyles(),this.updateAreaStyles()}updateAreaStyles(){let t="X",e=1,i=this.getWidth();this.getOrientation()===$t.HORIZONTAL&&(t="Y",i=this.getHeight()),i<=10&&(e=1.5),A(this.elRail,{cursor:"pointer",transform:`scale${t}(${e})`})}getOrientation(){return this.options.orientation}dragStart(){Qt(this.sliderContainer,"stage--dragging"),this.trigger(He),this.railBounds=Oe(this.elRail),this.over(null)}dragEnd(t){ee(this.sliderContainer,"stage--dragging"),this.trigger(We),this.out(null)}dragMove(t){let e=this.parseEventToPercent(t);return this.over(null),this.updateProgress(e),this.updatePercent(e),!1}parseEventToPercent(t){const e=this.railBounds=this.railBounds?this.railBounds:Oe(this.elRail);let i,s;return this.getOrientation()===$t.HORIZONTAL?(i=t.pageX,i<e.left?s=0:i>e.right?s=100:s=wt((i-e.left)/e.width,0,1)*100):(i=t.pageY,i>=e.bottom?s=0:i<=e.top?s=100:s=wt((e.height-(i-e.top))/e.height,0,1)*100),s}parseEventToPixel(t){const e=this.railBounds=this.railBounds?this.railBounds:Oe(this.elRail);return this.getOrientation()===$t.HORIZONTAL?wt(t.pageX-e.left,0,e.width):wt(t.pageY-e.top,0,e.height)}move(t){let e=this.parseEventToPixel(t),i=this.parseEventToPercent(t);this.getOrientation()===$t.HORIZONTAL?this.tipLeft=e:this.tipTop=e,this.trigger("update-tip",{percentage:i}),this.updateTipPosition()}updateTipText(t){let e=this.getOption("tipText","");e&&(t=e+" "+t),super.updateTipText(t)}over(t){this.hoverThumbLabel(),this.showTip()}out(t){this.normalThumbLabel(),this.hideTip()}tap(t){this.railBounds=Oe(this.elRail),this.dragMove(t)}updatePercent(t){this.trigger("update",{percentage:t})}updateBuffer(t){this.getOrientation()===$t.HORIZONTAL?A(this.elBuffer,{width:t+"%"}):A(this.elBuffer,{height:t+"%"})}updateProgress(t){t=Math.max(0,Math.min(t,100)),this.getOrientation()===$t.HORIZONTAL?(A(this.elThumb,{left:t+"%"}),A(this.elProgress,{width:t+"%"})):(A(this.elThumb,{bottom:t+"%"}),A(this.elProgress,{height:t+"%"})),this.updateBackgroundSize()}normalThumbLabel(){this.setScale(this.elThumbLabel,this.getOption("label.scale",1))}hoverThumbLabel(){this.getOption("label.scaleHoverEnable")&&this.setScale(this.elThumbLabel,this.getOption("label.scaleHover",1))}destroy(){this.off()}}var On={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},fi={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},ka=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],Le={CSS:{},springs:{}};function Et(n,t,e){return Math.min(Math.max(n,t),e)}function he(n,t){return n.indexOf(t)>-1}function gi(n,t){return n.apply(null,t)}var U={arr:function(n){return Array.isArray(n)},obj:function(n){return he(Object.prototype.toString.call(n),"Object")},pth:function(n){return U.obj(n)&&n.hasOwnProperty("totalLength")},svg:function(n){return n instanceof SVGElement},inp:function(n){return n instanceof HTMLInputElement},dom:function(n){return n.nodeType||U.svg(n)},str:function(n){return typeof n=="string"},fnc:function(n){return typeof n=="function"},und:function(n){return typeof n=="undefined"},hex:function(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)},rgb:function(n){return/^rgb/.test(n)},hsl:function(n){return/^hsl/.test(n)},col:function(n){return U.hex(n)||U.rgb(n)||U.hsl(n)},key:function(n){return!On.hasOwnProperty(n)&&!fi.hasOwnProperty(n)&&n!=="targets"&&n!=="keyframes"}};function Ln(n){var t=/\(([^)]+)\)/.exec(n);return t?t[1].split(",").map(function(e){return parseFloat(e)}):[]}function Rn(n,t){var e=Ln(n),i=Et(U.und(e[0])?1:e[0],.1,100),s=Et(U.und(e[1])?100:e[1],.1,100),r=Et(U.und(e[2])?10:e[2],.1,100),o=Et(U.und(e[3])?0:e[3],.1,100),u=Math.sqrt(s/i),l=r/(2*Math.sqrt(s*i)),b=l<1?u*Math.sqrt(1-l*l):0,y=1,T=l<1?(l*u+-o)/b:-o+u;function k(E){var I=t?t*E/1e3:E;return l<1?I=Math.exp(-I*l*u)*(y*Math.cos(b*I)+T*Math.sin(b*I)):I=(y+T*I)*Math.exp(-I*u),E===0||E===1?E:1-I}function R(){var E=Le.springs[n];if(E)return E;for(var I=1/6,V=0,_=0;;)if(V+=I,k(V)===1){if(_++,_>=16)break}else _=0;var M=V*I*1e3;return Le.springs[n]=M,M}return t?k:R}function wa(n){return n===void 0&&(n=10),function(t){return Math.round(t*n)*(1/n)}}var Ea=function(){var n=11,t=1/(n-1);function e(y,T){return 1-3*T+3*y}function i(y,T){return 3*T-6*y}function s(y){return 3*y}function r(y,T,k){return((e(T,k)*y+i(T,k))*y+s(T))*y}function o(y,T,k){return 3*e(T,k)*y*y+2*i(T,k)*y+s(T)}function u(y,T,k,R,E){var I,V,_=0;do V=T+(k-T)/2,I=r(V,R,E)-y,I>0?k=V:T=V;while(Math.abs(I)>1e-7&&++_<10);return V}function l(y,T,k,R){for(var E=0;E<4;++E){var I=o(T,k,R);if(I===0)return T;var V=r(T,k,R)-y;T-=V/I}return T}function b(y,T,k,R){if(!(0<=y&&y<=1&&0<=k&&k<=1))return;var E=new Float32Array(n);if(y!==T||k!==R)for(var I=0;I<n;++I)E[I]=r(I*t,y,k);function V(_){for(var M=0,N=1,z=n-1;N!==z&&E[N]<=_;++N)M+=t;--N;var pt=(_-E[N])/(E[N+1]-E[N]),j=M+pt*t,vt=o(j,y,k);return vt>=.001?l(_,j,y,k):vt===0?j:u(_,M,M+t,y,k)}return function(_){return y===T&&k===R||_===0||_===1?_:r(V(_),T,R)}}return b}(),Nn=function(){var n={linear:function(){return function(i){return i}}},t={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var s,r=4;i<((s=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((s*3-2)/22-i,2)}},Elastic:function(i,s){i===void 0&&(i=1),s===void 0&&(s=.5);var r=Et(i,1,10),o=Et(s,.1,2);return function(u){return u===0||u===1?u:-r*Math.pow(2,10*(u-1))*Math.sin((u-1-o/(Math.PI*2)*Math.asin(1/r))*(Math.PI*2)/o)}}},e=["Quad","Cubic","Quart","Quint","Expo"];return e.forEach(function(i,s){t[i]=function(){return function(r){return Math.pow(r,s+2)}}}),Object.keys(t).forEach(function(i){var s=t[i];n["easeIn"+i]=s,n["easeOut"+i]=function(r,o){return function(u){return 1-s(r,o)(1-u)}},n["easeInOut"+i]=function(r,o){return function(u){return u<.5?s(r,o)(u*2)/2:1-s(r,o)(u*-2+2)/2}}}),n}();function mi(n,t){if(U.fnc(n))return n;var e=n.split("(")[0],i=Nn[e],s=Ln(n);switch(e){case"spring":return Rn(n,t);case"cubicBezier":return gi(Ea,s);case"steps":return gi(wa,s);default:return gi(i,s)}}function Mn(n){try{var t=document.querySelectorAll(n);return t}catch{return}}function Re(n,t){for(var e=n.length,i=arguments.length>=2?arguments[1]:void 0,s=[],r=0;r<e;r++)if(r in n){var o=n[r];t.call(i,o,r,n)&&s.push(o)}return s}function Ne(n){return n.reduce(function(t,e){return t.concat(U.arr(e)?Ne(e):e)},[])}function Bn(n){return U.arr(n)?n:(U.str(n)&&(n=Mn(n)||n),n instanceof NodeList||n instanceof HTMLCollection?[].slice.call(n):[n])}function vi(n,t){return n.some(function(e){return e===t})}function yi(n){var t={};for(var e in n)t[e]=n[e];return t}function bi(n,t){var e=yi(n);for(var i in n)e[i]=t.hasOwnProperty(i)?t[i]:n[i];return e}function Me(n,t){var e=yi(n);for(var i in t)e[i]=U.und(n[i])?t[i]:n[i];return e}function Sa(n){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(n);return t?"rgba("+t[1]+",1)":n}function Aa(n){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,e=n.replace(t,function(u,l,b,y){return l+l+b+b+y+y}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),s=parseInt(i[1],16),r=parseInt(i[2],16),o=parseInt(i[3],16);return"rgba("+s+","+r+","+o+",1)"}function Ia(n){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(n)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(n),e=parseInt(t[1],10)/360,i=parseInt(t[2],10)/100,s=parseInt(t[3],10)/100,r=t[4]||1;function o(k,R,E){return E<0&&(E+=1),E>1&&(E-=1),E<1/6?k+(R-k)*6*E:E<1/2?R:E<2/3?k+(R-k)*(2/3-E)*6:k}var u,l,b;if(i==0)u=l=b=s;else{var y=s<.5?s*(1+i):s+i-s*i,T=2*s-y;u=o(T,y,e+1/3),l=o(T,y,e),b=o(T,y,e-1/3)}return"rgba("+u*255+","+l*255+","+b*255+","+r+")"}function Ca(n){if(U.rgb(n))return Sa(n);if(U.hex(n))return Aa(n);if(U.hsl(n))return Ia(n)}function St(n){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(n);if(t)return t[1]}function Pa(n){if(he(n,"translate")||n==="perspective")return"px";if(he(n,"rotate")||he(n,"skew"))return"deg"}function Ti(n,t){return U.fnc(n)?n(t.target,t.id,t.total):n}function mt(n,t){return n.getAttribute(t)}function ki(n,t,e){var i=St(t);if(vi([e,"deg","rad","turn"],i))return t;var s=Le.CSS[t+e];if(!U.und(s))return s;var r=100,o=document.createElement(n.tagName),u=n.parentNode&&n.parentNode!==document?n.parentNode:document.body;u.appendChild(o),o.style.position="absolute",o.style.width=r+e;var l=r/o.offsetWidth;u.removeChild(o);var b=l*parseFloat(t);return Le.CSS[t+e]=b,b}function Un(n,t,e){if(t in n.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),s=n.style[t]||getComputedStyle(n).getPropertyValue(i)||"0";return e?ki(n,s,e):s}}function wi(n,t){if(U.dom(n)&&!U.inp(n)&&(mt(n,t)||U.svg(n)&&n[t]))return"attribute";if(U.dom(n)&&vi(ka,t))return"transform";if(U.dom(n)&&t!=="transform"&&Un(n,t))return"css";if(n[t]!=null)return"object"}function Vn(n){if(!!U.dom(n)){for(var t=n.style.transform||"",e=/(\w+)\(([^)]*)\)/g,i=new Map,s;s=e.exec(t);)i.set(s[1],s[2]);return i}}function xa(n,t,e,i){var s=he(t,"scale")?1:0+Pa(t),r=Vn(n).get(t)||s;return e&&(e.transforms.list.set(t,r),e.transforms.last=t),i?ki(n,r,i):r}function Ei(n,t,e,i){switch(wi(n,t)){case"transform":return xa(n,t,i,e);case"css":return Un(n,t,e);case"attribute":return mt(n,t);default:return n[t]||0}}function Si(n,t){var e=/^(\*=|\+=|-=)/.exec(n);if(!e)return n;var i=St(n)||0,s=parseFloat(t),r=parseFloat(n.replace(e[0],""));switch(e[0][0]){case"+":return s+r+i;case"-":return s-r+i;case"*":return s*r+i}}function Dn(n,t){if(U.col(n))return Ca(n);if(/\s/g.test(n))return n;var e=St(n),i=e?n.substr(0,n.length-e.length):n;return t?i+t:i}function Ai(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function Oa(n){return Math.PI*2*mt(n,"r")}function La(n){return mt(n,"width")*2+mt(n,"height")*2}function Ra(n){return Ai({x:mt(n,"x1"),y:mt(n,"y1")},{x:mt(n,"x2"),y:mt(n,"y2")})}function Fn(n){for(var t=n.points,e=0,i,s=0;s<t.numberOfItems;s++){var r=t.getItem(s);s>0&&(e+=Ai(i,r)),i=r}return e}function Na(n){var t=n.points;return Fn(n)+Ai(t.getItem(t.numberOfItems-1),t.getItem(0))}function _n(n){if(n.getTotalLength)return n.getTotalLength();switch(n.tagName.toLowerCase()){case"circle":return Oa(n);case"rect":return La(n);case"line":return Ra(n);case"polyline":return Fn(n);case"polygon":return Na(n)}}function Ma(n){var t=_n(n);return n.setAttribute("stroke-dasharray",t),t}function Ba(n){for(var t=n.parentNode;U.svg(t)&&U.svg(t.parentNode);)t=t.parentNode;return t}function $n(n,t){var e=t||{},i=e.el||Ba(n),s=i.getBoundingClientRect(),r=mt(i,"viewBox"),o=s.width,u=s.height,l=e.viewBox||(r?r.split(" "):[0,0,o,u]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:o/l[2],h:u/l[3]}}function Ua(n,t){var e=U.str(n)?Mn(n)[0]:n,i=t||100;return function(s){return{property:s,el:e,svg:$n(e),totalLength:_n(e)*(i/100)}}}function Va(n,t){function e(u){u===void 0&&(u=0);var l=t+u>=1?t+u:0;return n.el.getPointAtLength(l)}var i=$n(n.el,n.svg),s=e(),r=e(-1),o=e(1);switch(n.property){case"x":return(s.x-i.x)*i.w;case"y":return(s.y-i.y)*i.h;case"angle":return Math.atan2(o.y-r.y,o.x-r.x)*180/Math.PI}}function Hn(n,t){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=Dn(U.pth(n)?n.totalLength:n,t)+"";return{original:i,numbers:i.match(e)?i.match(e).map(Number):[0],strings:U.str(n)||t?i.split(e):[]}}function Wn(n){var t=n?Ne(U.arr(n)?n.map(Bn):Bn(n)):[];return Re(t,function(e,i,s){return s.indexOf(e)===i})}function zn(n){var t=Wn(n);return t.map(function(e,i){return{target:e,id:i,total:t.length,transforms:{list:Vn(e)}}})}function Da(n,t){var e=yi(t);if(/^spring/.test(e.easing)&&(e.duration=Rn(e.easing)),U.arr(n)){var i=n.length,s=i===2&&!U.obj(n[0]);s?n={value:n}:U.fnc(t.duration)||(e.duration=t.duration/i)}var r=U.arr(n)?n:[n];return r.map(function(o,u){var l=U.obj(o)&&!U.pth(o)?o:{value:o};return U.und(l.delay)&&(l.delay=u?0:t.delay),U.und(l.endDelay)&&(l.endDelay=u===r.length-1?t.endDelay:0),l}).map(function(o){return Me(o,e)})}function Fa(n){for(var t=Re(Ne(n.map(function(r){return Object.keys(r)})),function(r){return U.key(r)}).reduce(function(r,o){return r.indexOf(o)<0&&r.push(o),r},[]),e={},i=function(r){var o=t[r];e[o]=n.map(function(u){var l={};for(var b in u)U.key(b)?b==o&&(l.value=u[b]):l[b]=u[b];return l})},s=0;s<t.length;s++)i(s);return e}function _a(n,t){var e=[],i=t.keyframes;i&&(t=Me(Fa(i),t));for(var s in t)U.key(s)&&e.push({name:s,tweens:Da(t[s],n)});return e}function $a(n,t){var e={};for(var i in n){var s=Ti(n[i],t);U.arr(s)&&(s=s.map(function(r){return Ti(r,t)}),s.length===1&&(s=s[0])),e[i]=s}return e.duration=parseFloat(e.duration),e.delay=parseFloat(e.delay),e}function Ha(n,t){var e;return n.tweens.map(function(i){var s=$a(i,t),r=s.value,o=U.arr(r)?r[1]:r,u=St(o),l=Ei(t.target,n.name,u,t),b=e?e.to.original:l,y=U.arr(r)?r[0]:b,T=St(y)||St(l),k=u||T;return U.und(o)&&(o=b),s.from=Hn(y,k),s.to=Hn(Si(o,y),k),s.start=e?e.end:0,s.end=s.start+s.delay+s.duration+s.endDelay,s.easing=mi(s.easing,s.duration),s.isPath=U.pth(r),s.isColor=U.col(s.from.original),s.isColor&&(s.round=1),e=s,s})}var jn={css:function(n,t,e){return n.style[t]=e},attribute:function(n,t,e){return n.setAttribute(t,e)},object:function(n,t,e){return n[t]=e},transform:function(n,t,e,i,s){if(i.list.set(t,e),t===i.last||s){var r="";i.list.forEach(function(o,u){r+=u+"("+o+") "}),n.style.transform=r}}};function qn(n,t){var e=zn(n);e.forEach(function(i){for(var s in t){var r=Ti(t[s],i),o=i.target,u=St(r),l=Ei(o,s,u,i),b=u||St(l),y=Si(Dn(r,b),l),T=wi(o,s);jn[T](o,s,y,i.transforms,!0)}})}function Wa(n,t){var e=wi(n.target,t.name);if(e){var i=Ha(t,n),s=i[i.length-1];return{type:e,property:t.name,animatable:n,tweens:i,duration:s.end,delay:i[0].delay,endDelay:s.endDelay}}}function za(n,t){return Re(Ne(n.map(function(e){return t.map(function(i){return Wa(e,i)})})),function(e){return!U.und(e)})}function Qn(n,t){var e=n.length,i=function(r){return r.timelineOffset?r.timelineOffset:0},s={};return s.duration=e?Math.max.apply(Math,n.map(function(r){return i(r)+r.duration})):t.duration,s.delay=e?Math.min.apply(Math,n.map(function(r){return i(r)+r.delay})):t.delay,s.endDelay=e?s.duration-Math.max.apply(Math,n.map(function(r){return i(r)+r.duration-r.endDelay})):t.endDelay,s}var Yn=0;function ja(n){var t=bi(On,n),e=bi(fi,n),i=_a(e,n),s=zn(n.targets),r=za(s,i),o=Qn(r,e),u=Yn;return Yn++,Me(t,{id:u,children:[],animatables:s,animations:r,duration:o.duration,delay:o.delay,endDelay:o.endDelay})}var rt=[],Gn=[],Be,qa=function(){function n(){Be=requestAnimationFrame(t)}function t(e){var i=rt.length;if(i){for(var s=0;s<i;){var r=rt[s];if(!r.paused)r.tick(e);else{var o=rt.indexOf(r);o>-1&&(rt.splice(o,1),i=rt.length)}s++}n()}else Be=cancelAnimationFrame(Be)}return n}();function Qa(){document.hidden?(rt.forEach(function(n){return n.pause()}),Gn=rt.slice(0),W.running=rt=[]):Gn.forEach(function(n){return n.play()})}typeof document!="undefined"&&document.addEventListener("visibilitychange",Qa);function W(n){n===void 0&&(n={});var t=0,e=0,i=0,s,r=0,o=null;function u(M){var N=window.Promise&&new Promise(function(z){return o=z});return M.finished=N,N}var l=ja(n);u(l);function b(){var M=l.direction;M!=="alternate"&&(l.direction=M!=="normal"?"normal":"reverse"),l.reversed=!l.reversed,s.forEach(function(N){return N.reversed=l.reversed})}function y(M){return l.reversed?l.duration-M:M}function T(){t=0,e=y(l.currentTime)*(1/W.speed)}function k(M,N){N&&N.seek(M-N.timelineOffset)}function R(M){if(l.reversePlayback)for(var z=r;z--;)k(M,s[z]);else for(var N=0;N<r;N++)k(M,s[N])}function E(M){for(var N=0,z=l.animations,pt=z.length;N<pt;){var j=z[N],vt=j.animatable,Nt=j.tweens,At=Nt.length-1,K=Nt[At];At&&(K=Re(Nt,function(_e){return M<_e.end})[0]||K);for(var It=Et(M-K.start-K.delay,0,K.duration)/K.duration,tt=isNaN(It)?1:K.easing(It),at=K.to.strings,m=K.round,pe=[],xi=K.to.numbers.length,Mt=void 0,zt=0;zt<xi;zt++){var Bt=void 0,fe=K.to.numbers[zt],De=K.from.numbers[zt]||0;K.isPath?Bt=Va(K.value,tt*fe):Bt=De+tt*(fe-De),m&&(K.isColor&&zt>2||(Bt=Math.round(Bt*m)/m)),pe.push(Bt)}var Fe=at.length;if(!Fe)Mt=pe[0];else{Mt=at[0];for(var yt=0;yt<Fe;yt++){at[yt];var ge=at[yt+1],Zt=pe[yt];isNaN(Zt)||(ge?Mt+=Zt+ge:Mt+=Zt+" ")}}jn[j.type](vt.target,j.property,Mt,vt.transforms),j.currentValue=Mt,N++}}function I(M){l[M]&&!l.passThrough&&l[M](l)}function V(){l.remaining&&l.remaining!==!0&&l.remaining--}function _(M){var N=l.duration,z=l.delay,pt=N-l.endDelay,j=y(M);l.progress=Et(j/N*100,0,100),l.reversePlayback=j<l.currentTime,s&&R(j),!l.began&&l.currentTime>0&&(l.began=!0,I("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,I("loopBegin")),j<=z&&l.currentTime!==0&&E(0),(j>=pt&&l.currentTime!==N||!N)&&E(N),j>z&&j<pt?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,I("changeBegin")),I("change"),E(j)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,I("changeComplete")),l.currentTime=Et(j,0,N),l.began&&I("update"),M>=N&&(e=0,V(),l.remaining?(t=i,I("loopComplete"),l.loopBegan=!1,l.direction==="alternate"&&b()):(l.paused=!0,l.completed||(l.completed=!0,I("loopComplete"),I("complete"),!l.passThrough&&"Promise"in window&&(o(),u(l)))))}return l.reset=function(){var M=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=M==="reverse",l.remaining=l.loop,s=l.children,r=s.length;for(var N=r;N--;)l.children[N].reset();(l.reversed&&l.loop!==!0||M==="alternate"&&l.loop===1)&&l.remaining++,E(l.reversed?l.duration:0)},l.set=function(M,N){return qn(M,N),l},l.tick=function(M){i=M,t||(t=i),_((i+(e-t))*W.speed)},l.seek=function(M){_(y(M))},l.pause=function(){l.paused=!0,T()},l.play=function(){!l.paused||(l.completed&&l.reset(),l.paused=!1,rt.push(l),T(),Be||qa())},l.reverse=function(){b(),T()},l.restart=function(){l.reset(),l.play()},l.reset(),l.autoplay&&l.play(),l}function Kn(n,t){for(var e=t.length;e--;)vi(n,t[e].animatable.target)&&t.splice(e,1)}function Ya(n){for(var t=Wn(n),e=rt.length;e--;){var i=rt[e],s=i.animations,r=i.children;Kn(t,s);for(var o=r.length;o--;){var u=r[o],l=u.animations;Kn(t,l),!l.length&&!u.children.length&&r.splice(o,1)}!s.length&&!r.length&&i.pause()}}function Ga(n,t){t===void 0&&(t={});var e=t.direction||"normal",i=t.easing?mi(t.easing):null,s=t.grid,r=t.axis,o=t.from||0,u=o==="first",l=o==="center",b=o==="last",y=U.arr(n),T=parseFloat(y?n[0]:n),k=y?parseFloat(n[1]):0,R=St(y?n[1]:n)||0,E=t.start||0+(y?T:0),I=[],V=0;return function(_,M,N){if(u&&(o=0),l&&(o=(N-1)/2),b&&(o=N-1),!I.length){for(var z=0;z<N;z++){if(!s)I.push(Math.abs(o-z));else{var pt=l?(s[0]-1)/2:o%s[0],j=l?(s[1]-1)/2:Math.floor(o/s[0]),vt=z%s[0],Nt=Math.floor(z/s[0]),At=pt-vt,K=j-Nt,It=Math.sqrt(At*At+K*K);r==="x"&&(It=-At),r==="y"&&(It=-K),I.push(It)}V=Math.max.apply(Math,I)}i&&(I=I.map(function(at){return i(at/V)*V})),e==="reverse"&&(I=I.map(function(at){return r?at<0?at*-1:-at:Math.abs(V-at)}))}var tt=y?(k-T)/V:T;return E+tt*(Math.round(I[M]*100)/100)+R}}function Ka(n){n===void 0&&(n={});var t=W(n);return t.duration=0,t.add=function(e,i){var s=rt.indexOf(t),r=t.children;s>-1&&rt.splice(s,1);function o(k){k.passThrough=!0}for(var u=0;u<r.length;u++)o(r[u]);var l=Me(e,bi(fi,n));l.targets=l.targets||n.targets;var b=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=U.und(i)?b:Si(i,b),o(t),t.seek(l.timelineOffset);var y=W(l);o(y),r.push(y);var T=Qn(r,n);return t.delay=T.delay,t.endDelay=T.endDelay,t.duration=T.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}W.version="3.1.0",W.speed=1,W.running=rt,W.remove=Ya,W.get=Ei,W.set=qn,W.convertPx=ki,W.path=Ua,W.setDashoffset=Ma,W.stagger=Ga,W.timeline=Ka,W.easing=mi,W.penner=Nn,W.random=function(n,t){return Math.floor(Math.random()*(t-n+1))+n};const Xa="captions",Ue="quality",Ve="speed",ot="wmplayer",Za=(n,t,e,i)=>(n/=i/2,n<1?e/2*n*n+t:(n-=1,-e/2*(n*(n-2)-1)+t)),Ja=(n,t,e,i,s,r=100)=>{t+=s,clearTimeout(n._timeout),n._timeout=setTimeout(function(){n.scrollTop=Za(t,i,e,r)},s)};class to extends Tt{constructor(t){super(),this.app=t,this.items=[Xa,Ue,Ve],this.container=null,this.inlineContainer=null,this.stageOpen=!1,this.stageLognOpen=!1,this.stagePosition={top:0,left:0},this.currentPanelSize={},this.panels={},this.eventListeners=[],this.init()}toggle(){this.stageOpen?this.hide():this.show()}show(){this.container&&(A(this.container,{display:"block"}),W({targets:this.container,opacity:1,duration:250,easing:"easeInOutQuad",begin:()=>{}})),this.stageOpen=!0,this.showPanel("menu")}hide(){this.container&&W({targets:this.container,opacity:0,duration:250,easing:"easeInOutQuad",complete:()=>{A(this.container,{display:"none"})}}),this.stageOpen=!1,this.stageLognOpen=!1}updateScrollContainerSize(t){const e=this.panels[t];let i=parseInt(this.getOption("maxHeight"));const r=this.app.getElContainerWrapper().getBoundingClientRect();if((i===0||i>r.height)&&(i=r.height),t!=="menu"){let o=e.backButton.offsetHeight,u=parseInt(i)-o;u=u>0?u-o:0,u<0&&(u="initial"),A(e.container,{maxHeight:u,overflow:"auto"}),setTimeout(()=>{this.onScrollArrow(t)},500)}}updatePosition(){const t=this.currentPanelSize,e=this.app.getElContainerUi(),i=this.app.controls.settings;let{top:s,left:r}=this.stagePosition,o=e.getBoundingClientRect(),u=i.container.getBoundingClientRect(),l=i.container.offsetHeight;s=u.top-o.top,r=u.left-o.left,s+t.height>=o.height?s=o.height-t.height-l:s=s+l,r+t.width>=o.width&&(r=o.width-t.width),A(this.container,{top:s,left:r})}updateArrowStyles(){Object.entries(this.panels).forEach(t=>{let[e,i]=t;if(e!=="menu"){i.arrowUp.innerHTML=this.getOption("arrow.icons.arrow-up"),i.arrowDown.innerHTML=this.getOption("arrow.icons.arrow-down");let s=this.getOption("arrow.color");ui([i.arrowUp,i.arrowDown],s)}})}getOptions(){return x(this.app.options,"elements.menu")}getOption(t){return x(this.getOptions(),t)}showPanel(t){let e=this.getOption("maxHeight");const i=this.panels[t],s=i.parentNode;Array.from(s.children).forEach(r=>{r.style.display="none"}),this.currentPanelSize=this.getMenuSize(i),this.currentPanelSize.height>e&&(this.currentPanelSize.height=e),A(s,{width:this.currentPanelSize.width,height:this.currentPanelSize.height}),this.updatePosition(),i.style.display="block",this.updateScrollContainerSize(t)}hidePanel(t){this.panels[t]&&(this.panels[t].style.display="none")}init(){this.container?this.updateArrowStyles():(this.container=S("div",{class:`${ot}-menu`}),A(this.container,{opacity:0,display:"none"}),this.stageOpen=!1,this.stageLognOpen=!1,this.inlineContainer=S("div",{}),w(this.app.getElContainerWrapper(),this.container),w(this.container,this.inlineContainer),this.initPanelHome(),this.initPanelSpeed(),this.initPanelQuality(),this.ui=new Lt(this.container)),this.ui.enableActive=!!this.getOption("hideInactiveEnable",!1)}initPanelHome(){let t=this.createMenuPanel("menu"),e=this.inlineContainer;this.panels.menu=t,w(e,t),this.items.forEach(i=>{let s=this.createMenuPanel(i);this.panels[i]=s;let r=S("div",{class:`${ot}-menu-item-back`}),o=S("span",{class:`${ot}-menu-label`},i),u=S("span",{class:`${ot}-inline-arrow ${ot}-menu-arrow-back`,arrow:"left"}),l=S("div",{class:`${ot}-scroll-arrow`,style:"top: 25px;"},"up"),b=S("div",{class:`${ot}-scroll-arrow`,style:"bottom: 0;"},"down"),y=S("div");w(r,u),w(r,o),w(s,r),w(s,l),w(s,b),w(s,y),l.innerHTML=this.getOption("arrow.icons.arrow-up"),b.innerHTML=this.getOption("arrow.icons.arrow-down");let T=this.getOption("arrow.color");ui([l,b],T),s.backButton=r,s.arrowUp=l,s.arrowDown=b,s.container=y,A(y,{marginRight:"-25px"});let k=this.createMenuItem({title:i,isArrow:!0});G.call(this,r,"click",this.onClickMenuItem.bind(this,"menu")),G.call(this,k,"click",this.onClickMenuItem.bind(this,i)),G.call(this,b,"click",this.onClickArrowPaneMove.bind(this,i,"down")),G.call(this,l,"click",this.onClickArrowPaneMove.bind(this,i,"up")),G.call(this,y,"scroll",this.onScrollArrow.bind(this,i)),w(t,k),w(e,s),this.hidePanel(i)})}initPanelQuality(){let t=Ue,e=this.panels[t],s=this.getMediaProvider().getQualities();Array.from(e.container.childNodes).forEach(r=>{gt.call(this,r,"click",this.onClickMenuItemQuality.bind(this,r.qualitIndex))}),qi(e.container),s.forEach((r,o)=>{let u=this.createMenuItem({title:r.name,isRadio:!0,value:r.index});u.qualitIndex=r.index,G.call(this,u,"click",this.onClickMenuItemQuality.bind(this,r.index)),w(e.container,u)}),this.updateSelectedValues(Ue)}initPanelSpeed(){let t=Ve,e=this.panels[t];[.5,.75,1,1.25,1.5,1.75,2].forEach(s=>{let r=this.createMenuItem({title:s,isRadio:!0,value:s});G.call(this,r,"click",this.onClickMenuItemSpeed.bind(this,s)),w(e.container,r)}),this.updateSelectedValues(Ve)}setMenuItemBehavior(t){Object.defineProperty(t,"checked",{enumerable:!0,get(){return t.getAttribute("checked")==="true"},set(e){e&&Array.from(t.parentNode.children).filter(i=>As(i,'[radio="true"]')).forEach(i=>i.setAttribute("checked","false")),t.setAttribute("checked",e?"true":"false")}})}createMenuItem({type:t,title:e,badge:i,value:s,isRadio:r=!1,isChecked:o=!1,isArrow:u=!1}){let l=S("div",{class:`${ot}-menu-item`,role:"menu-item",radio:r,checked:o,value:s});this.setMenuItemBehavior(l);let b=S("span",{class:`${ot}-menu-label`});if(b.innerHTML=e,r){let y=S("span",{class:`${ot}-menu-radio`});w(l,y)}if(i!==void 0){let y=S("span",{class:`${ot}-menu-badge`},i);w(b,y)}if(w(l,b),u){let y=S("span",{class:`${ot}-inline-arrow`,arrow:"right"});w(l,y)}return l}createMenuPanel(t){return S("div",{class:`${ot}-menu-panel-${t}`})}onClickMenuItem(t,e){this.showPanel(t)}onClickArrowPaneMove(t,e,i){let s=this.panels[t];if(!s)return;let r=parseInt(this.getOption("maxHeight"));e==="up"?this.scrollTo(s.container,s.container.scrollTop-r,200):this.scrollTo(s.container,s.container.scrollTop+r,200)}onScrollArrow(t,e){let i=this.panels[t];if(!i)return;let s=i.container,r=i.arrowUp,o=i.arrowDown,u=s.scrollHeight-s.clientHeight,l=s.scrollTop;s.scrollHeight>s.clientHeight?l===0?(this.showArrow(o),this.hideArrow(r)):l>=u?(this.showArrow(r),this.hideArrow(o)):(this.showArrow(r),this.showArrow(o)):(this.hideArrow(r),this.hideArrow(o))}showArrow(t){Te(t,!0)}hideArrow(t){Te(t,!1)}scrollTo(t,e=0,i=1e3){let s=t.scrollTop,r=e-s;Ja(t,0,r,s,20,i)}onClickMenuItemSpeed(t,e){e.currentTarget.checked=!0,this.getMediaProvider().speed=t}onClickMenuItemQuality(t,e){e.currentTarget.checked=!0,this.getMediaProvider().changeQualityByIndex(t)}getMediaProvider(){return this.app.controls.media}getMenuSize(t){const e=t.cloneNode(!0);e.style.position="absolute",e.style.opacity=0,e.style.display="block",t.parentNode.appendChild(e);const i=e.scrollWidth,s=e.scrollHeight;return Z(e),{width:i,height:s}}updateSelectedValues(t){let e=this.getMediaProvider();if(!e)return;let i=null;switch(t){case Ve:i=e.speed;break;case Ue:i=e.qualityIndex}let r=this.panels[t].container;const o=r&&r.querySelector(`[value="${i}"]`);o&&(o.checked=!0)}}const eo="elements.playlistMenu.splashStyle";function io(n){const t=`${O}-next-notify`;let e=x(n,eo,{}),i=it(x(e,"background","#000000D4")),s=it(x(e,"fillet",0)),r=it(x(e,"fontColor","#fff")),o=it(x(e,"iconColor","#fff"));return`
  .${t} {
    position: absolute;
    bottom: 50px;
    right: 10px;
    background-color: ${i};
    border-radius: ${s};
    z-index: 2;
    min-height: 65px;
  }

  .${t}-inner {
    padding: 15px;
    color: ${r};
    display: block;
   }
   
  .${t}-countdown {
    display: block;
   }
   
  .${t}-content {
    padding-right: 60px;
	display: block
   }
   
  .${t}-title {
    font-weight: 700;
    font-size: 18px;
    margin-bottom: 6px;
    display: block
   }
   
  .${t}-cancel {
    display: inline-block;
    cursor: pointer;
    text-align: center;
    position: absolute;
    right: 10px;
    bottom: 10px;
   }
   
  .${t}-icon {
	position: absolute;
	top: 10px;
	right: 10px;
	text-align: center;
	cursor: pointer;
	background: 0 0;
	border: none;
	padding: 0;
	pointer-events: all;
  }
  .${t}-icon svg {
	transform: scale(2.5);
	fill: ${o};
  }
  
  `}function no(n){const t=`${O}-screen`;return`
  	.${t}-seek {
	  position:absolute;
	  width:100%;
	  height:100%;
	  top:0;
	  left:0;
	  overflow:hidden;
    }
  	.${t}-seek-notification {
	  transition:background 0.8s;
	  background:rgba(200,200,200,.4);
	  pointer-events:none;
	  width:100%;
      height:200%;
      opacity: 0;
      border-radius:100%;
	}
	.${t}-rewind {
	  position:absolute;
	  right:0%;
	  top:-50%;
	}
	.${t}-forward {
	  position: absolute;
	  left: 0%;
	  top: -50%;
	}
	.${t}-seek-text {
	  color: #fff;
	  position: absolute;
	  top: 50%;
	  font-size: 12px;
	  margin-top: -8px;
	}
	.${t}-forward .${t}-seek-text {
	  left: 10%;
	}
	.${t}-rewind .${t}-seek-text {
	  right: 10%;
	}
  `}const so="elements.playlistMenu";function ro(n){let t=x(n,so,{}),e=x(t,"filterStyle",{}),i=x(e,"borderColor"),s=x(e,"fontSize",14),r=x(e,"borderFillet"),o=x(e,"borderWidth"),u=x(e,"targetFontColor"),l=x(e,"targetBackground"),b=x(e,"optionBackground"),y=x(e,"optionFontColor"),T=x(e,"optionBackgroundHover"),k=x(e,"optionBackgroundHoverEnable"),R="";const E=`${O}-playlist`;return k&&(R=`
  	.${E}-select-option:hover {
	  cursor: pointer;
	  background-color: ${T};
	 }
  `),`
 .${E}-select-wrapper {
  position: relative;
  user-select: none;
  display: inline-block;
  min-width: 122px;
  margin: 2px 5px;
  font-size: ${s}px;
 }
 .${E}-select-wrapper select{
   position: absolute;
   opacity: 0;
   width: 100%;
   height: 100%;
   top: 0;
   left: 0;
   z-index: 0;
 }
 .${E}-select-native select{
   z-index: 1;
 }
.${E}-select {
  position: relative;
  display: block;
 }
.${E}-select-trigger {
  position: relative;
  display: block;
  color: ${u};
  background: ${l};
  cursor: pointer;
  border: ${o}px solid ${i};
  padding: 2px 10px;
  border-radius: ${r}px;
 }
.${E}-select-options {
  position: absolute;
  display: block;
  top: 100%;
  left: 0;
  right: 0;
  border: ${o}px solid ${i};
  background: ${b};
  transition: all 0.5s;
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  z-index: 2;
 }
.${E}-select.open .${E}-select-options {
  opacity: 1;
  visibility: visible;
  pointer-events: all;
 }
.${E}-select-option {
  position: relative;
  display: block;
  color: ${y};
  cursor: pointer;
  transition: all 0.5s;
  padding: 2px 10px;
 }
 ${R}
 
 .${E}{
   position:absolute;
   top:0;
   left:0;
   z-index:2;
  }
 .${E}-item {
   min-height: 56px;
   padding: 4px 8px 4px;
   background-color: rgba(0, 0, 0, 0.05);
   border-top: 1px solid rgba(0,0,0,0.05);
  }
  .${E}-header{
   padding: 0;
  }
  
 .${E}-items{
   overflow: auto;
   padding: 4px 0;
 }
 .${O}-playlist-select-arrow {
   position: absolute;
   height: 10px;
   width: 15px;
   pointer-events: none;
   right: 0;
   top: 5px;
 }
 .${E}-select-arrow::before, .${E}-select-arrow::after {
	content: "";
	position: absolute;
	bottom: 0px;
	width: 2px;
	height: 100%;
	transition: all 0.5s;
 }
  .${E}-select-arrow::before {
	left: -3px;
	transform: rotate(45deg);
	background-color: ${u};
  }
  .${E}-select-arrow::after {
	left: 3px;
	transform: rotate(-45deg);
	background-color: ${u};
  }
  .${E}-select.open .${E}-select-arrow::before {
	left: -3px;
	transform: rotate(-45deg);
  }
  .${E}-select.open .${E}-select-arrow::after {
	left: 3px;
	transform: rotate(45deg);
  }
  `}const ao="elements.menu";function oo(n){const t=x(n,ao,{}),e=x(t,"label",{});let s=x(e,"backgroundEnable")?it(x(e,"backgroundColor")):"transparent",r=it(x(e,"color","#ccc")),o=x(e,"fillet",0),u=x(e,"size",.75);const l=`${O}-menu`;return`
  .${l}{
  	position: absolute;
    z-index: 55;
    background: ${t.backgroundColor};
    border-radius: ${t.fillet}px;
    box-shadow: 0 1px 2px rgba(0,0,0,.15);
    color: ${t.color};
    font-size: ${t.fontSize}px;
    margin-bottom: 5px;
    text-align: left;
    white-space: nowrap;
    z-index: 3;
  }
  .${l}>div{
  	transition: height 0.35s cubic-bezier(0.4, 0, 0.2, 1) 0s, width 0.35s cubic-bezier(0.4, 0, 0.2, 1) 0s;
	overflow: hidden;
  }
  .${l}-item, .${l}-item-back{
  	padding: 4px 11px;
  	white-space: nowrap;
	position: relative;
  }
  .${O}-inline-arrow{
  	font-size: 0;
	line-height: 0;
	width: 0;
	height: 0;
	position: absolute;
	margin: auto
  }
  .${l}-panel-menu .${l}-item{
  	padding-right: 20px;
  }
  .${l}-item-back {
  	padding-left: 20px;
  }
  .${O}-inline-arrow[arrow="left"]{
	border-top: 4px solid transparent;
	border-bottom: 4px solid transparent;
	border-right: 6px solid ${r};
	top: 0;
	bottom: 0;
	left: 8px;
  }
  .${O}-inline-arrow[arrow="right"]{
	border-top: 4px solid transparent;
	border-bottom: 4px solid transparent;
	border-left: 6px solid ${r};
	top: 0;
	bottom: 0;
	right: 8px;
  }
  .${O}-scroll-arrow{
	width:25px;
	height:25px;
	position:absolute;
	z-index:1;
	left:0;
	right:0;
	margin:0 auto;
	visibility: hidden;
  }
  .${l}-arrow-back{
  }
  .${l}-radio {
	vertical-align: middle;
    height: 18px;
  	width: 18px;
  	background-color: ${s};
  	border-radius: ${o}%;
  	display: inline-block;
    position: relative;
    border: 3px solid transparent;
  }
  .${l}-item .${l}-label{
	vertical-align: middle;
	padding-left: 7px;
  }
  .${l}-radio:before{
  }
  .${l}-radio:after{
    content: "";
    position: absolute;
	top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    border-radius: ${o}%;
    background: ${r};
    transform: scale(0.5);
    opacity: 0;
    transition: all .3s ease, -webkit-all .3s ease;
  }
  .${l}-item[checked="true"] .${l}-radio:after{
    opacity: 1;
    transform: scale(${u});
  }
  `}const lo="elements.tooltip";function ho(n){let t=x(n,lo,{}),e=it(x(t,"color","#000")),i=it(x(t,"colorText","#fff")),s=x(t,"arrowEnable",!0),r=x(t,"fillet",.3);return r=r*24/2,`
  .${O}-tooltip-wrap {
  	position: absolute;
  	left:0;
  	top:0;
  	height:auto;
    opacity:0;
	transition:opacity .1s, all .2s ease;
	z-index:50;
	pointer-events:none;
  }
  
  .${O}-tooltip {
    background:${e};
    display:inline-block;
    border-radius:${r}px;
    box-shadow: 0 1px 2px rgba(0,0,0,.15);
    color:${i};
    font-size:11px;
    font-weight:500;
    line-height:1.3em;
    padding:5px 7.5px;
    pointer-events:none;
    position:absolute;
    white-space:nowrap;
    min-height: 22px;
  }
  .${O}-tooltip::before {
    content: '';
    position: absolute;
    width: 0;
    z-index: 50;
    height: 0;
	${s?"":"display:none;"}
	transform: translateX(-50%);
	transition: left .4s ease;
  }
  
  .${O}-tooltip[role-pos="top"]::before {
  	border-left: 4px solid transparent;
    border-right: 4px solid transparent;
    border-top: 4px solid ${e};
    bottom: -4px;
  }
  .${O}-tooltip[role-pos="bottom"]::before {
  	border-left: 4px solid transparent;
    border-right: 4px solid transparent;
    border-bottom: 4px solid ${e};
    top: -4px;
  }
  .${O}-tooltip[role-pip="left"]::before {
    left: 8px;
  }
  .${O}-tooltip[role-pip="center"]::before {
    left: 50%;
  }
  .${O}-tooltip[role-pip="right"]::before {
    left: 80%;
    left: calc(100% - 10px);
  }
  `}function uo(n){const t="-webkit-media-controls",e="display: none!important;-webkit-appearance: none;",i=et.isIos?`*::${t}-start-playback-button {${e}}`:"",s=ho(n),r=no(),o=ro(n),u=io(n),l=oo(n);return`
  ${i}
  ${r}
  ${o}
  ${u}
  ${l}
  ${s}
  
  .${O}{
  	position:relative;
  	-webkit-user-select:none;
  	user-select:none;
  }
  .${O} .${O}-wrapper{
  	width:100%;
  	height:100%;
  }
  .${O}>*{
  	direction:ltr !important;
  	max-width:none !important;
  	touch-action:manipulation;
  	transform-origin:center center;
  	box-sizing:content-box;
  	-webkit-tap-highlight-color:rgba(0,0,0,0);
  	-webkit-tap-highlight-color:transparent;
  }
  .${O} video{
  	width:100%;
  	height:100%;
  	object-fit: contain;
    transition:filter 0.2s linear 0s;
    min-height:auto;
    max-height:none;
    min-width:auto;max-width:none;
  }
  .${O}-ui{
  	position: absolute;
  	width: 100%;
  	height: 100%;
  	z-index: 1;
  	top: 0;
	overflow: hidden;
  }
  .${O}-control{
    position: absolute;
    cursor: pointer;
    opacity:1;
    font-size: 14px;
    line-height: 1em;
  }
  .${O}-main-bg,.${O}-self-bg{
  	position:absolute;
  }
  .${O}-control-panel{
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
  }
  .${O}-control-panel-bg{
	position:absolute;
	width: 100%;
	height: 100%;
	top:0;
	left:0;
  }
  .${O}-control-scrubbing-container{
    bottom: 0px;
    filter: blur(1px);
    height: 100%;
    left: 0px;
    margin: auto;
    opacity: 0;
    overflow: hidden;
    position: absolute;
    right: 0px;
    top: 0px;
    transition: opacity 0.3s ease 0s;
    width: 100%;
    pointer-events: none;
  }
  
  .${O}__buffer, .${O}__progress, .${O}__thumb {
     pointer-events: none;
  }
 
  .${O}-notifies {
  	position: absolute;
    left: 0px;
    top: 0px;
    width: 100%;
    opacity: 1;
    z-index: 997;
    display: none;
    color: rgb(255, 255, 255);
    user-select: text;
  }
  .${O}-notify-close:before {
 	display: inline-block;
    content: "\\00d7";
    font-family: Arial, sans-serif;
    width: 20px;
    height: 20px;
    cursor: pointer;
    font-size: 18px;
    position: absolute;
    right: 0;
    top: 0;
    text-align: center;
  }
  .${O}-notify-error {
    padding: 2px 10px;
    background-color: #ff1100;
  }
 .${O}-notify-info {
    padding: 2px 10px;
    background-color: #2196F3;
  }
  `}const Ii=()=>{};class co{constructor(t=!1){this.enabled=window.console&&t,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):Ii}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):Ii}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):Ii}}function po(n,t){return n===0||t===0||Number.isNaN(n)||Number.isNaN(t)?0:(n/t*100).toFixed(2)}const fo="local",go="session",mo=()=>{try{if(!("localStorage"in window))return!1;const n="___test___";return window.localStorage.setItem(n,n),window.localStorage.removeItem(n),!0}catch{return!1}};class vo{constructor(t=fo){this.supported=mo(),this.type=t}get adapter(){return this.type===go?window.sessionStorage:window.localStorage}get(t){return this.supported?this.adapter.getItem(t):null}set(t,e){if(!!this.supported)return this.adapter.setItem(t,e)}remove(t){if(!!this.supported)return this.adapter.removeItem(t)}}class yo{constructor(t){this.app=t,this.container=null,this.subtitles=[],this.init(),this.hide()}init(){this.container||(this.container=S("div",{class:`${O}-subtitle`}),w(this.app.getElContainerWrapper(),this.container))}hide(){}show(){}toggle(t){}reset(){}load(t){return new Promise(e=>{if(!t)return e();oe(t,"text",!0).then(i=>{const s=Us(t);this.parse(s,i),e()})})}parse(t,e){}}class bo{constructor(t){this.app=t,this.container=null,this.messages=[],this.maxMessages=6,this.init()}init(){this.container||(this.container=S("div",{class:`${O}-notifies`}),w(this.app.getElContainer(),this.container),this.close=S("div",{class:`${O}-notify-close`}),w(this.container,this.close),G.call(this,this.close,"click tab",this.onClose.bind(this)))}createMessage(t,e){A(this.container,{display:"inline-block"});let i=S("div",{class:`${O}-notify-${e}`});if(i.innerHTML=t,w(this.container,i),this.messages.push(i),this.messages.length===this.maxMessages){let s=this.messages.shift();Z(s)}}error(t){this.createMessage(t,"error")}info(t){this.createMessage(t,"info")}flush(){for(;this.messages.length;){let t=this.messages.shift();Z(t)}this.messages=[],A(this.container,{display:"none"})}destroy(){this.flush(),gt.call(this,this.close,"click tab",this.onClose.bind(this)),Z(this.container),this.container=null,this.close=null}onClose(t){this.flush()}}class To{constructor(t){this.app=t,this.lastKey=null,this.hotkeyPress=this.hotkeyPress.bind(this),this.initEventsUI(),this.initEventsSettings(),this.initEventsMedia(),this.initEventsControls(),this.initEventApp(),this.initEventsGlobal(),this.initEventsPlaylist()}destroy(){}initEventsUI(){const{app:t}=this;let e=0;t.ui.on(`${qt} ${Pt}`,i=>{if(i.type===Pt){let s=i.pageX+i.pageY;s!==e&&t.ui.userActive(),e=s}else t.ui.userActive();t.ui.stageFocus=!0}),t.ui.on(Ct,()=>{t.ui.stageFocus=!0}),t.ui.on(kt,()=>{t.ui.stageFocus=!1}),t.ui.on(Ni,i=>{t.toggleControls(!0)}),t.ui.on(Jt,i=>{t.toggleControls(!1)}),t.ui.on(`${Mi} ${Bi}`,i=>{if(t.ui.userActive(),!t.options||!t.options.screen)return;const s=t.options,r=[t.getMedia().tech,t.getElContainerUi(),t.screenSeek.container].includes(i.target);if(et.isMobile&&t.screenSeek&&s.screen.seekEnable&&r){let l=t.getElContainerUi().getBoundingClientRect(),y=i.pageX-(l.left+(window.scrollX?window.scrollX:window.pageXOffset))<l.width/2?-10:10;t.screenSeek.updateCurrentTime(y);return}s.screen.doubleClickFullscreenEnable&&t.fullscreen&&t.fullscreen.isEnabled()&&r&&t.fullscreen.toggle()}),t.ui.on(`${J} ${te}`,i=>{t.options.screen&&t.options.screen.clickPlayEnable&&[t.getMedia().tech,t.getElContainerUi(),t.screenSeek.container].includes(i.target)&&(t.menu&&t.menu.stageOpen?t.menu.hide():t.stageShowControl&&this.togglePlayMediaControl()),t.ui.userActive()})}initEventsMedia(){const{app:t}=this,e=t.getMedia();e.on(be,i=>{const s=i instanceof CustomEvent?i.detail:null;t.notify&&s&&t.notify.error(s),t.debug&&t.debug.error(s)}),e.on(Fi,i=>{}),e.on(Di,i=>{let s=e.volume;isFinite(s)&&t.setStorageValue("volume",s);let r=e.muted;typeof r=="boolean"&&t.setStorageValue("muted",r),t.updateUi(i)}),e.on(_i,i=>{const s=e.speed;isFinite(s)&&t.setStorageValue("speed",s),t.updateUi(i)}),e.on(Vi,i=>{e.stop()}),e.on($i,i=>{t.updateUi(i)}),e.on(Hi,i=>{}),e.on(ze,i=>{if(!i){t.updateUi(new Event(ze));return}t.updateUi(i)}),e.on(je,i=>{if(!i){t.updateUi(new Event(je)),t.toggleControls(!1);return}t.updateUi(i),t.toggleControls(!1)}),e.on(Qe,i=>{if(!i){t.updateUi(new Event(Qe));return}t.updateUi(i)}),e.on(qe,i=>{if(!i){t.updateUi(new Event(qe));return}t.updateUi(i)}),e.on("update-menu-quality",()=>{t.menu&&t.menu.initPanelQuality()}),e.on("update-menu-quality-value",()=>{t.menu&&t.menu.updateSelectedValues("quality")})}togglePlayMediaControl(){if(this.isLockMediaControls())return;const{app:t}=this,e=t.vastNetwork,i=t.controls.media;if(e.isOpenType("preroll")){e.open("preroll").then(s=>{s||i.togglePlay()});return}if(i.togglePlay(),i.paused){e.open("pauseroll").then(s=>{});return}}isLockMediaControls(){const{app:t}=this;return t.controls.media.lock}initEventsControls(){const{app:t}=this;t.controls.seek&&(t.controls.seek.on("update",e=>{t.controls.media.currentTime=e.percentage/100*t.controls.media.duration,t.updateUiSeek()}),t.controls.seek.ui.on(`${Ct} ${Pt}`,e=>{this.isLockMediaControls()||t.thumbPreview&&(t.thumbPreview.canReady()&&t.controls.seek.isTipEnable()&&(t.controls.seek.tipEnable=!1,t.controls.seek.tooltip.style.opacity=0),t.thumbPreview.startMove(e))}),t.controls.seek.ui.on(`${kt} ${J} ${te}`,e=>{this.isLockMediaControls()||t.thumbPreview&&t.thumbPreview.endMove(!1,!0)}),t.controls.seek.on("update-tip",e=>{let i=t.controls.media.duration,s=e.percentage/100*i;t.controls.seek.updateTipText(pi(s))}),t.controls.seek.on(He,e=>{this.isLockMediaControls()||t.thumbPreview&&t.thumbPreview.startScrubbing()}),t.controls.seek.on(We,e=>{this.isLockMediaControls()||t.thumbPreview&&t.thumbPreview.endScrubbing()})),t.controls.time&&t.controls.time.on("resize-text",()=>{t.composer.updateComposingPosition()}),t.controls.duration&&t.controls.duration.on("resize-text",()=>{t.composer.updateComposingPosition()}),t.controls.volume&&t.controls.volume.on("update",e=>{t.controls.media.volume=e.percentage/100}),t.controls.stop&&t.controls.stop.on(J,e=>{this.isLockMediaControls()||t.controls.media.stop()}),t.controls.play&&t.controls.play.on(J,e=>{this.togglePlayMediaControl()}),t.controls.playLarge&&t.controls.playLarge.on(J,e=>{this.togglePlayMediaControl()}),t.controls.mute&&t.controls.mute.on(J,e=>{t.controls.media.toggleMute()}),t.controls.fullscreen&&t.controls.fullscreen.on(J,e=>{this.isLockMediaControls()||t.fullscreen.toggle()}),t.controls.pip&&t.controls.pip.on(J,e=>{this.isLockMediaControls()||(t.controls.media.pip="toggle")}),t.controls.prev&&t.controls.prev.on(J,e=>{this.isLockMediaControls()||t.playlist&&t.playlist.playPrevPosition()}),t.controls.fastForward&&t.controls.fastForward.on(J,e=>{this.isLockMediaControls()||t.playlist&&t.playlist.playNextPosition()})}initEventApp(){const{app:t}=this,e=t.menu;t.on("update-ui",i=>{t.composer.updateComposingPosition(),t.updateUi(i)}),t.on(ys,i=>{if(et.isMobile&&t.options.screen&&screen.orientation){let s=screen.orientation.type;t.options.screen.horizontalFullscreenEnable&&(!(s&&s.indexOf("landscape")!==-1)&&t.fullscreen.getActive()?screen.orientation.lock("landscape"):t.fullscreen.getActive()||screen.orientation.unlock())}e&&e.stageOpen&&e.hide(),t.changeContainerAspect(),t.getMedia().updateEmbedSize(),t.trigger("update-ui")})}initEventsGlobal(){const{app:t}=this;G.call(t,window,"keydown",this.hotkeyPress.bind(this),!1,!1),G.call(t,window,"orientationchange",this.orientationChange.bind(this),!0,!1),G.call(t,window,"visibilitychange",this.visibilityChange.bind(this),!0,!1)}initEventsPlaylist(){const{app:t}=this,e=[Ct,J,qt,Pt,te,kt,Vt].join(" ");t.playlist.ui.on(e,i=>{t.ui.userActive()})}orientationChange(t){let e=(screen.orientation||{}).type||screen.mozOrientation||screen.msOrientation;e&&e.indexOf("landscape")!==-1||Math.abs(window.orientation)===90?console.log("landscape"):console.log("portrait")}visibilityChange(){}unhandledRejection(t){const{app:e}=this;e.debug.error("promise not rejection handle",t)}hotkeyPress(t){const e=t.keyCode?t.keyCode:t.which,i=t.type==="keydown",s=i&&e===this.lastKey,r=t.target.tagName.toLowerCase(),o=["input","textarea"],{app:u}=this;if(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||o.includes(r))return;if(!i){this.lastKey=null;return}this.lastKey=e;const l=this.app.controls.media,b=this.app.options.hotkey;if(u.ui.stageFocus)t.preventDefault();else if(b.activeInFocusEnable)return;if(!(!b||b&&!b.enable)){if(e>=48&&e<=57&&b.numbEnable){l.currentTime=l.duration/10*(e-48);return}if(b.spaceEnable&&(e===32||e===75)){s||l.togglePlay();return}if(b.mEnable&&e===77){s||l.toggleMute();return}if(b.fEnable&&e===70){this.app.fullscreen&&this.app.fullscreen.toggle();return}if(b.leftRightEnable){if(e===37){l.rewind();return}if(e===39){l.forward();return}}if(b.upDownEnable){if(e===38){l.increaseVolume(.1);return}if(e===40){l.decreaseVolume(.1);return}}}}initEventsSettings(){const{app:t}=this;if(!t.controls.settings)return;const e=()=>{let s=parseInt(t.menu.getOption("inactiveTimeout",0),10);return wt(s,1,60)*1e3},i=()=>{t.menu.ui.userActive(e())};t.controls.settings.on(J,s=>{t.menu.stageLognOpen=!1,t.menu.toggle(),i()}),t.controls.settings.ui.on(`${Ct}`,s=>{t.menu.getOption("showHoverEnable",!1)&&!t.menu.stageOpen&&(t.menu.show(),i())}),t.menu.ui.on(`${Ct} ${qt} ${Pt} ${kt} ${Vt}`,s=>{i()}),t.menu.ui.on(Jt,s=>{t.menu.getOption("hideInactiveEnable",!1)&&t.menu.hide()})}}const Ht="wmplayer";class ko{constructor(t){this.app=t,this.timer=null,this.rewindSpeed=0,this.forwardSpeed=0,this.timeOut=2e3,this.init()}init(){this.container=S("div",{class:`${Ht}-screen-seek`}),this.rewindBlock=S("div",{class:`${Ht}-screen-seek-notification ${Ht}-screen-rewind`}),this.forwardBlock=S("div",{class:`${Ht}-screen-seek-notification ${Ht}-screen-forward`}),this.rewindText=S("div",{class:`${Ht}-screen-seek-text`}),this.forwardText=S("div",{class:`${Ht}-screen-seek-text`}),w(this.app.getElContainerWrapper(),this.container),w(this.container,this.rewindBlock),w(this.container,this.forwardBlock),w(this.rewindBlock,this.rewindText),w(this.forwardBlock,this.forwardText)}getMediaProvider(){return this.app.controls.media}updateCurrentTime(t){let e=t<0;e?(this.rewindSpeed=this.rewindSpeed+t,this.forwardSpeed=0):(this.forwardSpeed=this.forwardSpeed+t,this.rewindSpeed=0),clearTimeout(this.timer);let i=e?this.rewindSpeed:this.forwardSpeed,s=this.getMediaProvider();s.currentTime=s.currentTime+i,this.updateNotify(Math.abs(i),e),this.timer=setTimeout(()=>{this.rewindSpeed=0,this.forwardSpeed=0},this.timeOut)}updateNotify(t,e){e?(this.rewindText.innerHTML=`\u25C0\u25C0\u25C0<br>${t} seconds`,this.animeRewind()):(this.forwardText.innerHTML=`\u25B6\u25B6\u25B6<br>${t} seconds`,this.animeForward())}animeRewind(){W({targets:this.rewindBlock,opacity:[0,1],right:["100%","50%"],duration:800,direction:"alternate",easing:"easeOutElastic(1, .8)",begin:()=>{this.forwardBlock.style.opacity=0}})}animeForward(){W({targets:this.forwardBlock,opacity:[0,1],left:["100%","50%"],duration:800,direction:"alternate",easing:"easeOutElastic(1, .8)",begin:()=>{this.rewindBlock.style.opacity=0}})}}const Xn=[Ct,J,qt,Pt,te,kt,Vt].join(" "),Zn="false",Jn="true",Rt=`${O}-playlist-select`,Ci=`${Rt}-trigger`,wo=`${Rt}-native`,Eo=`${Rt}-wrapper`,So=`${Rt}-arrow`,Ao=`${Rt}-options`,ts=`${Rt}-option`,Wt=`${O}-next-notify`,Io=`${Wt}-inner`,Co=`${Wt}-content`,Po=`${Wt}-title`,xo=`${Wt}-countdown`,Oo=`${Wt}-icon`,Lo=`${Wt}-cancel`,Ro='<svg viewBox="0 0 36 36" width="20" height="20"><path d="M21.9 11.5v5.2l-10.4-5.2v13l10.4-5.2v5.2h2.6v-13h-2.6z"/></svg>';class No{constructor(t){this.app=t,this.stageOpen=!1,this.stageFirst=!0,this.listData=null,this.listUrl=null,this.currentPathId=null,this.currentPath=null,this.currentPosition=null,this.splashStageNext=!1,this.forcePlayingStage=!1,this.elements={},this.eventListeners=[],this.listData=[]}async init(){this.container||(this.container=S("div",{class:`${O}-playlist`}),this.inlineContainer=S("div",{}),w(this.container,this.inlineContainer),w(this.app.getElContainerWrapper(),this.container),this.ui=new Lt(this.container,{enableActive:!0}),this.initEvents()),await this.load()}initEvents(){this.ui.on(Xn,this.onUserActive.bind(this)),this.ui.on(Jt,this.onUserInactive.bind(this))}removeEvents(){this.ui.off(Xn,this.onUserActive.bind(this)),this.ui.off(Jt,this.onUserInactive.bind(this))}showDeepFilterById(t){let i=this.getFilter(t).value;for(let o in this.elements.filters)o!=="root"&&(this.elements.filters[o].parentNode.style.display="none");let s=i.split(".").length;for(let o=s-1,u=0;o>u;o--){let l=i.split(".",o).join("."),b=this.getFilter(l);b.parentNode.style.display="inline-block"}let r=!0;for(;r;){let o=this.getFilter(`${i}`);if(!o){r=!1;continue}o.parentNode.style.display="inline-block",i=o.value}}getNormalizePath(t,e){t=t.replace(/\.items/g,"");let i=t.split(".");if(i.length===1)return i[0];e&&i.pop();let s=[];for(let r=0,o=i.length-1;r<o;r++)s.push(i[r]+".items");return s.push(i[i.length-1]),s.join(".")}getShortPath(t,e){let i=this.getNormalizePath(t,e).replace(/\.items/g,"");return i===""?"":i}getOptions(){return x(this.app.options,"elements.playlistMenu",{})}getOption(t){return x(this.getOptions(),t)}toggle(t){!this.stageOpen||t?this.show():this.hide()}show(){this.container&&A(this.container,{opacity:1}),this.stageOpen=!0}hide(){this.container&&A(this.container,{opacity:0}),this.stageOpen=!1}getFilter(t){return this.elements.filters[t]}setFilter(t,e){this.elements.filters[t]=e}iteratePreparePlaylist(t,e,i){let s=t!==null?t+"."+i:`${i}`;e.pathId=s,e.items&&e.items.forEach((r,o)=>{this.iteratePreparePlaylist(s,r,o)})}iterateCreateFilters(t,e,i){let s=t!==null?t+"."+i:`${i}`,r=t!==null?`${t}`:"root",o=this.getFilterOrCreate(r),u=S("option");u.text=e.title,u.value=s,w(o,u),e.items&&e.items.forEach((l,b)=>{this.iterateCreateFilters(s,l,b)})}getFilterOrCreate(t){let e=this.elements.header,i=this.getFilter(t);if(!i){let s=S("div",{class:Eo});et.isMobile&&Qt(s,wo),i=S("select",{"data-id":t,"data-type":"filter"}),this.setFilter(t,i),w(s,i),w(e,s),G.call(this,i,"change",this.onChangeFilter.bind(this))}return i}reset(){Ji.call(this);let t=this.container;qi(t),this.elements={},this.elements.filters={}}render(){let t=S("div",{class:O+"-playlist-header"});this.elements.header=t,w(this.container,t);let e=S("div",{class:O+"-playlist-items"});this.elements.listContainer=e,w(this.container,e);let i=this.getFilterOrCreate("root");this.listData.forEach((s,r)=>{this.iterateCreateFilters(null,s,r)});for(let s in this.elements.filters)this.createUiFilter(s);ei.call(this,i,"change")}createUiFilter(t){let e=this.getFilter(t),i=e.options[e.selectedIndex].innerHTML,s=e.parentNode,r=S("div",{class:Rt});w(s,r);let o=S("div",{class:Ci}),u=S("span");u.innerHTML=i;let l=S("div",{class:So});w(o,u),w(o,l),w(r,o);let b=S("div",{class:Ao});w(r,b),Array.prototype.forEach.call(e.options,(y,T)=>{let k="selected",R=S("span",{class:ts,selected:y.selected});R.innerHTML=y.innerHTML,R.index=T,Object.defineProperty(R,k,{enumerable:!0,get(){return R.getAttribute(k)===Jn},set(E){E&&Array.from(R.parentNode.children).forEach(I=>I.setAttribute(k,Zn)),R.setAttribute(k,E?Jn:Zn)}}),G.call(this,R,"click",this.onChangeUiFilter.bind(this,t)),w(b,R)}),G.call(this,o,"click",this.onClickUIFilter.bind(this,t))}toggleUiFilter(t,e){let s=this.getFilter(t).parentNode.querySelector(`.${Rt}`);!s||(e!==void 0?e?Qt(s,"open"):ee(s,"open"):Yt(s,"open"))}createSplashNextPosition(){if(this.splashStageNext)return;this.splashStageNext=!0;let t=this.getCurrentList(),e=x(t,this.currentPosition+1,null);if(e===null)return;this.splash={},this.splash.container=S("div",{class:Wt}),this.splash.inner=S("div",{class:Io}),this.splash.context=S("span",{class:Co}),this.splash.title=S("span",{class:Po}),this.splash.countdown=S("span",{class:xo}),this.splash.icon=S("span",{class:Oo}),this.splash.cancel=S("span",{class:Lo},xt.get("cancel")),w(this.splash.container,this.splash.inner),w(this.splash.inner,this.splash.context),w(this.splash.context,this.splash.title),w(this.splash.context,this.splash.countdown),w(this.splash.inner,this.splash.icon),w(this.splash.inner,this.splash.cancel),w(this.app.getElContainerWrapper(),this.splash.container),this.splash.icon.innerHTML=Ro;let i=e.fullname?e.fullname:"";this.splash.title.innerHTML=i.length?i+" - "+e.title:e.title,G.call(this,this.splash.icon,"click tab",this.onClickSplashPlayNext.bind(this)),G.call(this,this.splash.cancel,"click tab",this.onClickSplashCancel.bind(this));let s=12;this.updateSplashNextCountdown(s),this.splashCountdowmTimer=setInterval(()=>{this.updateSplashNextCountdown(s),s<=0&&(this.forcePlayingStage=!0,this.onClickSplashPlayNext()),s-=1},1e3)}updateSplashNextCountdown(t){this.splash&&this.splash.countdown&&(this.splash.countdown.innerText=xt.get("nextVideoSplash",{"{timeleft}":t}))}removeSplashNextPosition(){!this.splash||(clearInterval(this.splashCountdowmTimer),gt.call(this,this.splash.icon,"click tab",this.onClickSplashPlayNext.bind(this)),gt.call(this,this.splash.cancel,"click tab",this.onClickSplashCancel.bind(this)),Z(this.splash.container),this.splash=null)}runSplashNext(t,e){t>0&&t-e<=10&&this.createSplashNextPosition()}findPlayItemById(t,e){if(t)for(let i=0,s=t.length;i<s;i++){if(t[i].items)return this.findPlayItemById(t[i].items,e);if(e!==void 0&&t[i].pathId===e)return t[i];if(e===void 0)return t[i]}return null}setCurrentPositionByPath(t){if(t===null)return!1;let e=this.getNormalizePath(t),i=this.getNormalizePath(t,!0),s=x(this.listData,e),r=t.split(".");i=r.length===1?null:i;let o=r.pop();return s.items?!1:(this.currentPathId=r.join("."),this.currentPath=i,this.currentPosition=parseInt(o),this.setStoragePlaylistPath(),!0)}getHashCurrentPage(){let t=location.host.replace("",""),e="//"+location.host+location.href;return"site:"+t+"_"+ci(e)}getStoragePlaylistPath(){let t=this.getHashCurrentPage();return this.app.getStorageValue(t,null)}setStoragePlaylistPath(){let t=this.getHashCurrentPage();return this.currentPathId!==null&&this.app.setStorageValue(t,this.currentPathId),!1}setCurrentPositionByFilterId(t){let e=this.getFilter(t);return this.setCurrentPositionByPath(e.value)}getCurrentList(){let t=this.currentPath!==null?x(this.listData,this.currentPath):this.listData;return typeof t=="object"&&t.items!==void 0?t.items:t}playCurrentPosition(t=!1){let e=this.getCurrentList(),i=x(e,this.currentPosition,{}),s=i.file,r=i.poster,o=this.app.getMedia();o.setSrc(s),o.setPoster(r),this.app.stageFirst?(this.app.stageFirst=!1,o.stageFirst=!0,o.pause()):t?o.play():o.pause()}canPlayNextPosition(){let t=this.getCurrentList();return t.length>0&&t.length>this.currentPosition+1}canPlayPrevPosition(){return this.getCurrentList().length>0&&this.currentPosition-1>-1}playNextPosition(){!this.canPlayNextPosition()||(this.currentPosition++,this.syncUiByCurrentPath())}syncUiByCurrentPath(){let t=this.getShortPath(this.currentPathId);t===""&&(t="root");let e=this.getFilter(t);e&&(e.selectedIndex=this.currentPosition,ei.call(this,e,"change"))}playPrevPosition(){!this.canPlayPrevPosition()||(this.currentPosition--,this.syncUiByCurrentPath())}setPlayItemById(t){if(this.showDeepFilterById(t),this.setCurrentPositionByFilterId(t)){let e=this.app.getMedia().playing;this.forcePlayingStage&&(this.forcePlayingStage=!1,e=!0),this.removeSplashNextPosition(),this.splashStageNext=!1,this.playCurrentPosition(e)}}syncFilterUiSelectTarget(t){let e=this.getFilter(t);if(!e)return;let i=e.parentNode.querySelector(`.${Ci} span`);if(i){let s=e.parentNode.querySelectorAll(`.${ts}`);Array.from(s).forEach((r,o)=>{e.selectedIndex===o&&(r.selected=!0,i.innerHTML=r.innerHTML)})}}async load(){try{typeof this.listUrl=="string"&&this.listUrl!==""&&(this.listData=await oe(this.listUrl,"json",!1))}catch{return!1}return this.listData.forEach((t,e)=>{this.iteratePreparePlaylist(null,t,e)}),this.reset(),this.listData.length?(this.render(),!0):!1}findUiFilterMenuHide(t){let e=this.elements.filters,i=this.getFilter(t);for(let s in e){let r=e[s];if(r!==i){let o=r.getAttribute("data-id");this.toggleUiFilter(o,!1)}}}onChangeFilter(t){let i=t.currentTarget.getAttribute("data-id");!this.getFilter(i)||(this.syncFilterUiSelectTarget(i),this.setPlayItemById(i))}onChangeUiFilter(t,e){let i=e.currentTarget,s=this.getFilter(t),r=s.parentNode.querySelector(`.${Ci} span`);r.innerHTML=i.innerHTML,s.selectedIndex=i.index,i.selected=!0,this.toggleUiFilter(t,!1),ei.call(this,s,"change")}onClickUIFilter(t,e){this.findUiFilterMenuHide(t),this.toggleUiFilter(t)}onUserActive(t){this.ui.userActive()}onUserInactive(t){this.findUiFilterMenuHide(void 0)}onClickSplashPlayNext(){this.playNextPosition(),this.removeSplashNextPosition(),this.splashStageNext=!1,this.forcePlayingStage=!1}onClickSplashCancel(){this.removeSplashNextPosition(),this.forcePlayingStage=!1}}class Mo extends Tt{constructor(t,e){super(),this.player=t,this.options=e||{},this.update=this.update.bind(this),this.mount=this.mount.bind(this),this.install=this.install.bind(this),this.uninstall=this.uninstall.bind(this),this.render=this.render.bind(this),this.ready=this.ready.bind(this),this.eventListeners=[]}update(t){this.el}onMount(){}mount(t,e){return e.id,this.el=this.render({target:t}),this.onMount(),this.el}ready(){return new Promise((t,e)=>{t(null)})}render(t){throw new Error("Extend the render method to add your plugin to a DOM button")}install(){}unmount(){this.el.parentNode&&this.el.parentNode.removeChild(this.el)}uninstall(){this.unmount(),unbindListeners.call(this)}}const Bo=n=>n.indexOf(":")!==-1,Uo=n=>n.split(":").map(Number),Vo=["name"],Do=["time","duration"],ue="volume-50",ce="volume-25",Fo=["playLarge","restart","rewind","play","fastForward","prev","mute","captions","settings","pip","airplay","download","fullscreen","playlist","share","buffer","stop"],_o=["seek","volume"];let es="eyJjb25maWciOnsibnVsbCI6e30sInVpZCI6IjIwMGIyOTk0LTE2NWUtNDJlNC04YzBkLWYwNTEwY2M5Y2JiOSIsInByZWxvYWQiOiJhdXRvIiwidm9sdW1lIjoiMC43Iiwic2NyZWVuIjp7ImNsaWNrUGxheUVuYWJsZSI6dHJ1ZSwiZG91YmxlQ2xpY2tGdWxsc2NyZWVuRW5hYmxlIjp0cnVlLCJob3Jpem9udGFsRnVsbHNjcmVlbkVuYWJsZSI6dHJ1ZSwic2Vla0VuYWJsZSI6dHJ1ZX0sInNpemUiOnsidHlwZSI6ImNvdmVyIiwid2lkdGgiOiIwIiwiaGVpZ2h0IjoiMCJ9LCJob3RrZXkiOnsiZW5hYmxlIjp0cnVlLCJhY3RpdmVJbkZvY3VzRW5hYmxlIjpmYWxzZSwibnVtYkVuYWJsZSI6dHJ1ZSwic3BhY2VFbmFibGUiOnRydWUsIm1FbmFibGUiOnRydWUsImZFbmFibGUiOnRydWUsInVwRG93bkVuYWJsZSI6dHJ1ZSwibGVmdFJpZ2h0RW5hYmxlIjp0cnVlfX0sImVsZW1lbnRzIjp7InNjcmVlbiI6eyJpbmRleCI6MCwiY29sb3IiOiIjMTQxQTI1In0sIm1lbnUiOnsiaW5kZXgiOjEsImJhY2tncm91bmRDb2xvciI6IiNmZmZmZmZlNiIsImZpbGxldCI6IjUiLCJmb250U2l6ZSI6IjE0IiwiY29sb3IiOiIjNEU0RTRFIiwibWF4SGVpZ2h0IjoiMjYwIiwibGFiZWwiOnsiYmFja2dyb3VuZEVuYWJsZSI6dHJ1ZSwiYmFja2dyb3VuZENvbG9yIjoiIzUxMDBCMjU5IiwiZmlsbGV0IjoiNTAiLCJjb2xvciI6IiNmZmZmZmYiLCJzaXplIjoiIzQwNDM2NCJ9LCJhcnJvdyI6eyJpY29ucyI6eyJhcnJvdy11cCI6Ijxzdmcgd2lkdGg9XCIyMFwiIGhlaWdodD1cIjIwXCI+XG4gICAgPGc+XG4gICAgICAgIDxsaW5lIHgxPVwiNVwiIHkxPVwiMTJcIiB4Mj1cIjEwXCIgeTI9XCI3XCIgc3Ryb2tlPVwiIzAwMDAwMFwiIHN0cm9rZS13aWR0aD1cIjNcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3R5bGU9XCJzdHJva2U6IHJnYigwLCAwLCAwKTtcIj48L2xpbmU+XG4gICAgICAgIDxsaW5lIHgxPVwiMTBcIiB5MT1cIjdcIiB4Mj1cIjE1XCIgeTI9XCIxMlwiIHN0cm9rZT1cIiMwMDAwMDBcIiBzdHJva2Utd2lkdGg9XCIzXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0eWxlPVwic3Ryb2tlOiByZ2IoMCwgMCwgMCk7XCI+PC9saW5lPlxuICAgIDwvZz5cbjwvc3ZnPiIsImFycm93LWRvd24iOiI8c3ZnIHdpZHRoPVwiMjBcIiBoZWlnaHQ9XCIyMFwiPlxuICAgIDxnPlxuICAgICAgICA8bGluZSB4MT1cIjVcIiB5MT1cIjhcIiB4Mj1cIjEwXCIgeTI9XCIxM1wiIHN0cm9rZT1cIiMwMDAwMDBcIiBzdHJva2Utd2lkdGg9XCIzXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiPjwvbGluZT5cbiAgICAgICAgPGxpbmUgeDE9XCIxMFwiIHkxPVwiMTNcIiB4Mj1cIjE1XCIgeTI9XCI4XCIgc3Ryb2tlPVwiIzAwMDAwMFwiIHN0cm9rZS13aWR0aD1cIjNcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCI+PC9saW5lPlxuICAgIDwvZz5cbjwvc3ZnPiJ9LCJjb2xvciI6IiNmZmYifSwic2hvd0hvdmVyRW5hYmxlIjpmYWxzZSwiaGlkZUluYWN0aXZlRW5hYmxlIjp0cnVlLCJpbmFjdGl2ZVRpbWVvdXQiOiIyIn0sInBsYXlsaXN0TWVudSI6eyJpbmRleCI6MiwidHlwZSI6Imxpc3QiLCJmaWx0ZXJTdHlsZSI6eyJ0YXJnZXRGb250Q29sb3IiOiIjM2IzYjNiIiwiZm9udFNpemUiOiIxNCIsInRhcmdldEJhY2tncm91bmQiOiIjZmZmZmZmIiwiYm9yZGVyV2lkdGgiOiIxIiwiYm9yZGVyRmlsbGV0IjoiMTUiLCJib3JkZXJDb2xvciI6IiMzOTRhNmQiLCJvcHRpb25CYWNrZ3JvdW5kIjoiI2ZmZmZmZiIsIm9wdGlvbkJhY2tncm91bmRIb3ZlckVuYWJsZSI6ZmFsc2UsIm9wdGlvbkJhY2tncm91bmRIb3ZlciI6IiNiMmIyYjIiLCJvcHRpb25Gb250Q29sb3IiOiIjM2IzYjNiIn0sInNwbGFzaFN0eWxlIjp7ImJhY2tncm91bmQiOiIjMDAwMDAwOGYiLCJmaWxsZXQiOiIxNSIsImZvbnRDb2xvciI6IiNmZmYiLCJpY29uQ29sb3IiOiIjMTYwMEI4In19LCJwYW5lbCI6eyJpbmRleCI6MywiaGVpZ2h0IjoiMzgiLCJvcGFjaXR5IjoiMSIsImNvbG9yIjoiIzAwMDAwMCIsImZpbGxldCI6IjAiLCJncmFkaWVudCI6dHJ1ZX0sInRvb2x0aXAiOnsiaW5kZXgiOjQsImFycm93RW5hYmxlIjpmYWxzZSwiY29sb3IiOiIjMDAwMDAwQkYiLCJjb2xvclRleHQiOiIjZmZmZmZmIiwiZmlsbGV0IjoiMC4zIn0sInBsYXlsaXN0Ijp7ImluZGV4Ijo2LCJlbmFibGUiOnRydWUsImljb25zIjp7InBsYXlsaXN0IjoiPHN2ZyB2ZXJzaW9uPVwiMS4xXCIgd2lkdGg9XCIyMFwiIGhlaWdodD1cIjIwXCIgeD1cIjBweFwiIHk9XCIwcHhcIiB2aWV3Qm94PVwiMCAwIDMwMC4wMDMgMzAwLjAwM1wiIHN0eWxlPVwiZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMDAuMDAzIDMwMC4wMDM7XCIgeG1sOnNwYWNlPVwicHJlc2VydmVcIj5cblx0PGcgZmlsbD1cIiMwMDBcIj5cblx0XHQ8cGF0aCBkPVwiTTE1MC4wMDEsMGMtODIuODM4LDAtMTUwLDY3LjE1OS0xNTAsMTUwYzAsODIuODM4LDY3LjE2MiwxNTAuMDAzLDE1MCwxNTAuMDAzYzgyLjg0MywwLDE1MC02Ny4xNjUsMTUwLTE1MC4wMDNcblx0XHRcdEMzMDAuMDAxLDY3LjE1OSwyMzIuODQzLDAsMTUwLjAwMSwweiBNNzguNTM4LDIxNS4yMjJjLTYuODMyLDAtMTIuMzcyLTUuNTQtMTIuMzcyLTEyLjM2OWMwLTYuODM3LDUuNTQtMTIuMzc0LDEyLjM3Mi0xMi4zNzRcblx0XHRcdGM2LjgzMiwwLDEyLjM3Miw1LjUzNywxMi4zNzIsMTIuMzc0QzkwLjkxLDIwOS42ODUsODUuMzcxLDIxNS4yMjIsNzguNTM4LDIxNS4yMjJ6IE03OC41MzgsMTY2LjcwOFxuXHRcdFx0Yy02LjgzMiwwLTEyLjM3Mi01LjU0LTEyLjM3Mi0xMi4zNzJjMC02LjgzNCw1LjU0LTEyLjM3MiwxMi4zNzItMTIuMzcyYzYuODMyLDAsMTIuMzcyLDUuNTM3LDEyLjM3MiwxMi4zNzJcblx0XHRcdFM4NS4zNzEsMTY2LjcwOCw3OC41MzgsMTY2LjcwOHogTTc4LjUzOCwxMTguMzAzYy02LjgzMiwwLTEyLjM3Mi01LjU0LTEyLjM3Mi0xMi4zNzJjMC02LjgzNCw1LjU0LTEyLjM3MiwxMi4zNzItMTIuMzcyXG5cdFx0XHRjNi44MzIsMCwxMi4zNzIsNS41MzcsMTIuMzcyLDEyLjM3MkM5MC45MSwxMTIuNzY2LDg1LjM3MSwxMTguMzAzLDc4LjUzOCwxMTguMzAzeiBNMjE1LjQyMywyMTUuMDQzSDExNy45NVxuXHRcdFx0Yy02LjczLDAtMTIuMTg3LTUuNDU3LTEyLjE4Ny0xMi4xODdjMC02LjczMyw1LjQ1Ny0xMi4xOSwxMi4xODctMTIuMTloOTcuNDc0YzYuNzMsMCwxMi4xODcsNS40NTcsMTIuMTg3LDEyLjE5XG5cdFx0XHRDMjI3LjYwOSwyMDkuNTg2LDIyMi4xNSwyMTUuMDQzLDIxNS40MjMsMjE1LjA0M3ogTTIxNS40MjMsMTY2LjUyN0gxMTcuOTVjLTYuNzMsMC0xMi4xODctNS40NTctMTIuMTg3LTEyLjE4N1xuXHRcdFx0YzAtNi43MzMsNS40NTctMTIuMTksMTIuMTg3LTEyLjE5aDk3LjQ3NGM2LjczLDAsMTIuMTg3LDUuNDU3LDEyLjE4NywxMi4xOUMyMjcuNjA5LDE2MS4wNywyMjIuMTUsMTY2LjUyNywyMTUuNDIzLDE2Ni41Mjd6XG5cdFx0XHQgTTIxNS40MjMsMTE4LjAxSDExNy45NWMtNi43MywwLTEyLjE4Ny01LjQ1Ny0xMi4xODctMTIuMTljMC02LjczMyw1LjQ1Ny0xMi4xODcsMTIuMTg3LTEyLjE4N2g5Ny40NzRcblx0XHRcdGM2LjczLDAsMTIuMTg3LDUuNDU3LDEyLjE4NywxMi4xODdDMjI3LjYwOSwxMTIuNTUxLDIyMi4xNSwxMTguMDEsMjE1LjQyMywxMTguMDF6XCI+PC9wYXRoPlxuXHQ8L2c+XG48L3N2Zz5cdFxuXHQifSwicG9zaXRpb24iOiJ0b3AtbGVmdCIsInBvc2l0aW9uSW5saW5lRW5hYmxlIjpmYWxzZSwiaW5kZW50IjoiMyAwIDAgMTIiLCJpbmRlbnRJY29uIjoiMCAwIDAgMCIsInNjYWxlIjoiMSIsInNjYWxlSG92ZXJFbmFibGUiOmZhbHNlLCJzY2FsZUhvdmVyIjoiMSIsInRpcEVuYWJsZSI6ZmFsc2UsInRpcFRleHQiOiIiLCJvcGFjaXR5IjoiMSIsIm9wYWNpdHlIb3ZlckVuYWJsZSI6ZmFsc2UsImNvbG9yIjoiI2ZmZmZmZiIsImNvbG9ySG92ZXJFbmFibGUiOmZhbHNlLCJjb2xvckhvdmVyIjoiI2ZmZmZmZiIsImJhY2tncm91bmQiOnsiZW5hYmxlIjpmYWxzZSwiaW5kZW50IjoiMCAwIDAgMCIsIm9wYWNpdHkiOiIxIiwib3BhY2l0eUhvdmVyRW5hYmxlIjpmYWxzZSwib3BhY2l0eUhvdmVyIjoiMSIsImZpbGxldCI6IjAiLCJjb2xvciI6IiNmZmZmZmYiLCJjb2xvckhvdmVyRW5hYmxlIjpmYWxzZSwiY29sb3JIb3ZlciI6IiNmZmZmZmYifX0sInN0b3AiOnsiaW5kZXgiOjcsImVuYWJsZSI6ZmFsc2UsImljb25zIjp7InN0b3AiOiI8c3ZnIHZlcnNpb249XCIxLjFcIiB3aWR0aD1cIjIwXCIgaGVpZ2h0PVwiMjBcIiB4PVwiMHB4XCIgeT1cIjBweFwiIHZpZXdCb3g9XCIwIDAgMzAwLjAwMyAzMDAuMDAzXCIgc3R5bGU9XCJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMwMC4wMDMgMzAwLjAwMztcIiB4bWw6c3BhY2U9XCJwcmVzZXJ2ZVwiPlxuPGcgZmlsbD1cIiMwMDBcIj5cblx0PHBhdGggZD1cIk0xNTAuMDA1LDBDNjcuMTY0LDAsMC4wMDEsNjcuMTU5LDAuMDAxLDE1MGMwLDgyLjgzOCw2Ny4xNjIsMTUwLjAwMywxNTAuMDAzLDE1MC4wMDNTMzAwLjAwMiwyMzIuODM4LDMwMC4wMDIsMTUwXG5cdFx0QzMwMC4wMDIsNjcuMTU5LDIzMi44NDQsMCwxNTAuMDA1LDB6IE0xOTYuNjMsMjEwLjYwNWgtOTMuMjZjLTcuNzA2LDAtMTMuOTc0LTYuMjY5LTEzLjk3NC0xMy45NzR2LTkzLjI1OVxuXHRcdGMwLTcuNzA2LDYuMjY5LTEzLjk3NCwxMy45NzQtMTMuOTc0aDkzLjI1OWM3LjcwNiwwLDEzLjk3NCw2LjI2OSwxMy45NzQsMTMuOTc0djkzLjI1OWgwLjAwMVxuXHRcdEMyMTAuNjA0LDIwNC4zMzcsMjA0LjMzNiwyMTAuNjA1LDE5Ni42MywyMTAuNjA1elwiPjwvcGF0aD5cbjwvZz5cbjwvc3ZnPlxuIn0sInBvc2l0aW9uIjoidG9wLWxlZnQiLCJwb3NpdGlvbklubGluZUVuYWJsZSI6dHJ1ZSwiaW5kZW50IjoiMCAwIDAgMCIsImluZGVudEljb24iOiIwIDAgMCAwIiwic2NhbGUiOiIxIiwic2NhbGVIb3ZlckVuYWJsZSI6ZmFsc2UsInNjYWxlSG92ZXIiOiIxIiwidGlwRW5hYmxlIjpmYWxzZSwidGlwVGV4dCI6IiIsIm9wYWNpdHkiOiIxIiwib3BhY2l0eUhvdmVyRW5hYmxlIjpmYWxzZSwiY29sb3IiOiIjZmZmZmZmIiwiY29sb3JIb3ZlckVuYWJsZSI6ZmFsc2UsImNvbG9ySG92ZXIiOiIjZmZmZmZmIiwiYmFja2dyb3VuZCI6eyJlbmFibGUiOmZhbHNlLCJpbmRlbnQiOiIwIDAgMCAwIiwib3BhY2l0eSI6IjEiLCJvcGFjaXR5SG92ZXJFbmFibGUiOmZhbHNlLCJvcGFjaXR5SG92ZXIiOiIxIiwiZmlsbGV0IjoiMCIsImNvbG9yIjoiI2ZmZmZmZiIsImNvbG9ySG92ZXJFbmFibGUiOmZhbHNlLCJjb2xvckhvdmVyIjoiI2ZmZmZmZiJ9fSwicHJldiI6eyJpbmRleCI6OCwiZW5hYmxlIjp0cnVlLCJpY29ucyI6eyJwcmV2IjoiPHN2ZyB3aWR0aD1cIjIwXCIgaGVpZ2h0PVwiMjBcIj5cbiAgICA8ZyBmaWxsLXJ1bGU9XCJub256ZXJvXCIgZmlsbD1cIiMwMDAwMDBcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMi41LCAzLjUpXCI+XG4gICAgICAgIDxwYXRoIGQ9XCJNMTEuOTkxMTE2NSw3LjEyNSBMMSw3LjEyNSBMMC44NzUsNyBMMC44NzUsNiBMMSw1Ljg3NSBMMTEuOTkxMTE2NSw1Ljg3NSBMNy43MDQ1MDQ4NywxLjU4ODM4ODM1IEw3LjcwNDUwNDg3LDEuNDExNjExNjUgTDguNDExNjExNjUsMC43MDQ1MDQ4NzEgTDguNTg4Mzg4MzUsMC43MDQ1MDQ4NzEgTDE0LjI5NTQ5NTEsNi40MTE2MTE2NSBMMTQuMjk1NDk1MSw2LjUgTDE0LjI5NTQ5NTEsNi41ODgzODgzNSBMOC41ODgzODgzNSwxMi4yOTU0OTUxIEw4LjQxMTYxMTY1LDEyLjI5NTQ5NTEgTDcuNzA0NTA0ODcsMTEuNTg4Mzg4MyBMNy43MDQ1MDQ4NywxMS40MTE2MTE3IEwxMS45OTExMTY1LDcuMTI1IFpcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoNy41ODUyNDgsIDYuNTAwMDAwKSBzY2FsZSgtMSwgMSkgdHJhbnNsYXRlKC03LjU4NTI0OCwgLTYuNTAwMDAwKSBcIiBmaWxsPVwiIzAwMDAwMFwiPjwvcGF0aD5cbiAgICA8L2c+XG48L3N2Zz4ifSwicG9zaXRpb24iOiJsZWZ0IiwicG9zaXRpb25JbmxpbmVFbmFibGUiOnRydWUsImluZGVudCI6IjAgMCAwIDMiLCJpbmRlbnRJY29uIjoiMCAwIDAgMCIsInNjYWxlIjoiMSIsInNjYWxlSG92ZXJFbmFibGUiOnRydWUsInNjYWxlSG92ZXIiOiIxLjQiLCJ0aXBFbmFibGUiOnRydWUsInRpcFRleHQiOiIiLCJvcGFjaXR5IjoiMSIsIm9wYWNpdHlIb3ZlckVuYWJsZSI6ZmFsc2UsImNvbG9yIjoiI2ZmZmZmZiIsImNvbG9ySG92ZXJFbmFibGUiOmZhbHNlLCJjb2xvckhvdmVyIjoiI2ZmZmZmZiIsImJhY2tncm91bmQiOnsiZW5hYmxlIjpmYWxzZSwiaW5kZW50IjoiMCAwIDAgMCIsIm9wYWNpdHkiOiIxIiwib3BhY2l0eUhvdmVyRW5hYmxlIjpmYWxzZSwib3BhY2l0eUhvdmVyIjoiMSIsImZpbGxldCI6IjAiLCJjb2xvciI6IiNmZmZmZmYiLCJjb2xvckhvdmVyRW5hYmxlIjpmYWxzZSwiY29sb3JIb3ZlciI6IiNmZmZmZmYifX0sImZhc3RGb3J3YXJkIjp7ImluZGV4Ijo5LCJlbmFibGUiOnRydWUsImljb25zIjp7ImZhc3Rmb3J3YXJkIjoiPHN2ZyB3aWR0aD1cIjIwXCIgaGVpZ2h0PVwiMjBcIj5cbiAgICA8ZyBmaWxsLXJ1bGU9XCJub256ZXJvXCIgZmlsbD1cIiMwMDAwMDBcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMywgNC41KVwiPlxuICAgICAgICA8cGF0aCBkPVwiTTEuOTQ0NDQ0NDQsNy4wNzE0Mjg1NyBMOC4xNjY2NjY2Nyw3LjA3MTQyODU3IEM5LjAyNTc3NjI4LDcuMDcxNDI4NTcgOS43MjIyMjIyMiw2LjM2Nzg3NjA0IDkuNzIyMjIyMjIsNS41IEM5LjcyMjIyMjIyLDQuNjMyMTIzOTYgOS4wMjU3NzYyOCwzLjkyODU3MTQzIDguMTY2NjY2NjcsMy45Mjg1NzE0MyBMMS45NDQ0NDQ0NCwzLjkyODU3MTQzIEMxLjA4NTMzNDgzLDMuOTI4NTcxNDMgMC4zODg4ODg4ODksNC42MzIxMjM5NiAwLjM4ODg4ODg4OSw1LjUgQzAuMzg4ODg4ODg5LDYuMzY3ODc2MDQgMS4wODUzMzQ4Myw3LjA3MTQyODU3IDEuOTQ0NDQ0NDQsNy4wNzE0Mjg1NyBaXCIgZmlsbD1cIiMwMDAwMDBcIj48L3BhdGg+XG4gICAgICAgIDxwYXRoIGQ9XCJNNi43Mjc3Nzc3OCwxLjU3MTQyODU3IEM2LjcyNzc3Nzc4LDAuNjc0ODk1NTY1IDcuNzYwNDg3NDIsMC4xODI2OTQ5MjYgOC40NDU0Mzk4NiwwLjc1Mjc3MjE1NiBMMTMuMTEyMTA2NSw0LjYzNjc3OTY2IEMxMy42MTgyMTAzLDUuMDU4MDAzNDQgMTMuNjIyNTI2OCw1LjgzOTYxNDA2IDEzLjEyMTEwNjgsNi4yNjY1MTYwOSBMOC40NTQ0NDAxOCwxMC4yMzk2NTE0IEM3Ljc3MTYzMzI0LDEwLjgyMDk4MzggNi43Mjc3Nzc3OCwxMC4zMzA2NDQ2IDYuNzI3Nzc3NzgsOS40Mjg1NzE0MyBMNi43Mjc3Nzc3OCwxLjU3MTQyODU3IFpcIiBmaWxsPVwiIzAwMDAwMFwiPjwvcGF0aD5cbiAgICA8L2c+XG48L3N2Zz4ifSwicG9zaXRpb24iOiJyaWdodCIsInBvc2l0aW9uSW5saW5lRW5hYmxlIjp0cnVlLCJpbmRlbnQiOiIwIDIgMCAwIiwiaW5kZW50SWNvbiI6IjAgMCAwIDAiLCJzY2FsZSI6IjEiLCJzY2FsZUhvdmVyRW5hYmxlIjp0cnVlLCJzY2FsZUhvdmVyIjoiMS40IiwidGlwRW5hYmxlIjpmYWxzZSwidGlwVGV4dCI6IiIsIm9wYWNpdHkiOiIxIiwib3BhY2l0eUhvdmVyRW5hYmxlIjpmYWxzZSwiY29sb3IiOiIjZmZmZmZmIiwiY29sb3JIb3ZlckVuYWJsZSI6ZmFsc2UsImNvbG9ySG92ZXIiOiIjZmZmZmZmIiwiYmFja2dyb3VuZCI6eyJlbmFibGUiOmZhbHNlLCJpbmRlbnQiOiIwIDAgMCAwIiwib3BhY2l0eSI6IjEiLCJvcGFjaXR5SG92ZXJFbmFibGUiOmZhbHNlLCJvcGFjaXR5SG92ZXIiOiIxIiwiZmlsbGV0IjoiMCIsImNvbG9yIjoiI2ZmZmZmZiIsImNvbG9ySG92ZXJFbmFibGUiOmZhbHNlLCJjb2xvckhvdmVyIjoiI2ZmZmZmZiJ9fSwibmFtZSI6eyJpbmRleCI6MTAsImVuYWJsZSI6ZmFsc2UsInRleHQiOiJ0ZXN0IiwiZm9udFNpemUiOiIxNCIsInBvc2l0aW9uIjoidG9wIiwicG9zaXRpb25JbmxpbmVFbmFibGUiOmZhbHNlLCJpbmRlbnQiOiIwIDAgMCAwIiwic2NhbGUiOiIxIiwic2NhbGVIb3ZlckVuYWJsZSI6ZmFsc2UsInNjYWxlSG92ZXIiOiIxIiwidGlwRW5hYmxlIjpmYWxzZSwidGlwVGV4dCI6IiIsIm9wYWNpdHkiOiIxIiwib3BhY2l0eUhvdmVyRW5hYmxlIjpmYWxzZSwiY29sb3IiOiIjZmZmZmZmIiwiY29sb3JIb3ZlckVuYWJsZSI6ZmFsc2UsImNvbG9ySG92ZXIiOiIjZmZmZmZmIiwiYmFja2dyb3VuZCI6eyJlbmFibGUiOnRydWUsImluZGVudCI6IjYgNiA2IDYiLCJvcGFjaXR5IjoiMC40Iiwib3BhY2l0eUhvdmVyRW5hYmxlIjpmYWxzZSwib3BhY2l0eUhvdmVyIjoiMSIsImZpbGxldCI6IjEiLCJjb2xvciI6IiMwMDAwMDAiLCJjb2xvckhvdmVyRW5hYmxlIjpmYWxzZSwiY29sb3JIb3ZlciI6IiNmZmZmZmYifX0sInBsYXkiOnsiaW5kZXgiOjExLCJlbmFibGUiOnRydWUsImljb25zIjp7InBsYXkiOiI8c3ZnIHg9XCIwcHhcIiB5PVwiMHB4XCIgd2lkdGg9XCIyMFwiIGhlaWdodD1cIjIwXCIgdmlld0JveD1cIi04MCAtMzAgNTExLjk5OSA1MTEuOTk5XCIgc3R5bGU9XCJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMS45OTkgNTExLjk5OTtcIj5cbiAgICA8ZyBmaWxsPVwiIzAwMFwiIHRyYW5zZm9ybT1cInNjYWxlKC44KVwiIHN0eWxlPVwiZmlsbDogcmdiKDAsIDAsIDApO1wiPiBcbiAgICBcdDxwYXRoIGQ9XCJNNDQzLjg2LDE5Ni45MTlMMTQxLjQ2LDEwLjUxNEMxMTkuNTgyLTIuOTU1LDkzLjEzMS0zLjUxNSw3MC43MDIsOS4wMTZjLTIyLjQyOSwxMi41MjktMzUuODE5LDM1LjM1LTM1LjgxOSw2MS4wNDFcbiAgICBcdFx0djM3MS4xMTJjMCwzOC44NDYsMzEuMyw3MC42MTksNjkuNzcsNzAuODI5YzAuMTA1LDAsMC4yMSwwLjAwMSwwLjMxMywwLjAwMWMxMi4wMjItMC4wMDEsMjQuNTUtMy43NjksMzYuMjUxLTEwLjkwOVxuICAgIFx0XHRjOS40MTMtNS43NDMsMTIuMzg4LTE4LjAyOSw2LjY0NS0yNy40NDFjLTUuNzQzLTkuNDE0LTE4LjAzMS0xMi4zODgtMjcuNDQxLTYuNjQ1Yy01LjQ3MywzLjMzOC0xMC44MTgsNS4wNjUtMTUuNTUzLDUuMDY0XG4gICAgXHRcdGMtMTQuNTE1LTAuMDc5LTMwLjA1Ni0xMi41MTMtMzAuMDU2LTMwLjg5OFY3MC4wNThjMC0xMS4wMjEsNS43NDQtMjAuODA4LDE1LjM2NC0yNi4xODNjOS42MjEtNS4zNzUsMjAuOTY2LTUuMTM1LDMwLjMzOSwwLjYzNlxuICAgIFx0XHRsMzAyLjQwMSwxODYuNDA1YzkuMDg5LDUuNTk2LDE0LjI5LDE0LjkyNywxNC4yNjgsMjUuNjAxYy0wLjAyMiwxMC42NzMtNS4yNjEsMTkuOTgzLTE0LjQsMjUuNTZMMjA0LjE0Nyw0MTUuOTQ1XG4gICAgXHRcdGMtOS40MDQsNS43NTgtMTIuMzYsMTguMDQ5LTYuNjAyLDI3LjQ1MmM1Ljc1Nyw5LjQwNCwxOC4wNDgsMTIuMzYsMjcuNDUyLDYuNjAybDIxOC42MTEtMTMzLjg1MlxuICAgIFx0XHRjMjAuOTMxLTEyLjc2OSwzMy40NTctMzUuMDI5LDMzLjUwNy01OS41NUM0NzcuMTY1LDIzMi4wNzksNDY0LjcyOSwyMDkuNzY3LDQ0My44NiwxOTYuOTE5elwiPjwvcGF0aD5cbiAgICA8L2c+XG48L3N2Zz4iLCJwYXVzZSI6Ijxzdmcgd2lkdGg9XCIyMFwiIGhlaWdodD1cIjIwXCIgeD1cIjBweFwiIHk9XCIwcHhcIiB2aWV3Qm94PVwiMCAwIDUxMiA1MTJcIiBzdHlsZT1cImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDUxMjtcIj5cbiAgICA8ZyBmaWxsPVwiIzAwMFwiIHN0eWxlPVwiZmlsbDogcmdiKDAsIDAsIDApO1wiPlxuICAgIFx0PHBhdGggZD1cIk0yOTEsMTY2djE4MGMwLDExLjA0Niw4Ljk1NCwyMCwyMCwyMGMxMS4wNDYsMCwyMC04Ljk1NCwyMC0yMFYxNjZjMC0xMS4wNDYtOC45NTQtMjAtMjAtMjBcbiAgICBcdFx0QzI5OS45NTQsMTQ2LDI5MSwxNTQuOTU0LDI5MSwxNjZ6XCI+PC9wYXRoPlxuICAgIFx0PHBhdGggZD1cIk00MzcuMDIsNzQuOThDMzg4LjY2NywyNi42MjksMzI0LjM4LDAsMjU2LDBTMTIzLjMzMywyNi42MjksNzQuOTgsNzQuOThDMjYuNjI5LDEyMy4zMzMsMCwxODcuNjIsMCwyNTZcbiAgICBcdFx0czI2LjYyOSwxMzIuNjY3LDc0Ljk4LDE4MS4wMkMxMjMuMzMzLDQ4NS4zNzEsMTg3LjYyLDUxMiwyNTYsNTEyYzQ2LjgxMiwwLDkyLjYxNi0xMi43NTcsMTMyLjQ2Mi0zNi44OTNcbiAgICBcdFx0YzkuNDQ3LTUuNzIzLDEyLjQ2Ny0xOC4wMjEsNi43NDQtMjcuNDY4Yy01LjcyNC05LjQ0OS0xOC4wMjItMTIuNDY3LTI3LjQ2OS02Ljc0NUMzMzQuMTQzLDQ2MS4yNDQsMjk1LjUwNCw0NzIsMjU2LDQ3MlxuICAgIFx0XHRjLTExOS4xMDMsMC0yMTYtOTYuODk3LTIxNi0yMTZTMTM2Ljg5Nyw0MCwyNTYsNDBzMjE2LDk2Ljg5NywyMTYsMjE2YzAsNDIuNTg5LTEyLjY2NSw4NC4wNDQtMzYuNjI2LDExOS44ODVcbiAgICBcdFx0Yy02LjE0LDkuMTgzLTMuNjcyLDIxLjYwMyw1LjUxLDI3Ljc0MmM5LjE4NCw2LjE0MSwyMS42MDQsMy42NzIsMjcuNzQyLTUuNTExQzQ5Ny4wMDIsMzU1LjY3NCw1MTIsMzA2LjUzMSw1MTIsMjU2XG4gICAgXHRcdEM1MTIsMTg3LjYyLDQ4NS4zNzEsMTIzLjMzMyw0MzcuMDIsNzQuOTh6XCI+PC9wYXRoPlxuICAgIFx0PHBhdGggZD1cIk0xODEsMTY2djE4MGMwLDExLjA0Niw4Ljk1NCwyMCwyMCwyMHMyMC04Ljk1NCwyMC0yMFYxNjZjMC0xMS4wNDYtOC45NTQtMjAtMjAtMjBTMTgxLDE1NC45NTQsMTgxLDE2NnpcIj48L3BhdGg+XG4gICAgPC9nPlxuPC9zdmc+XG4ifSwicG9zaXRpb24iOiJwYW5lbC1sZWZ0IiwicG9zaXRpb25JbmxpbmVFbmFibGUiOnRydWUsImluZGVudCI6IjAgMCAwIDkiLCJpbmRlbnRJY29uIjoiMCAwIDAgMCIsInNjYWxlIjoiMSIsInNjYWxlSG92ZXJFbmFibGUiOnRydWUsInNjYWxlSG92ZXIiOiIxLjQiLCJ0aXBFbmFibGUiOmZhbHNlLCJ0aXBUZXh0IjoiIiwib3BhY2l0eSI6IjEiLCJvcGFjaXR5SG92ZXJFbmFibGUiOmZhbHNlLCJjb2xvciI6IiNmZmZmZmYiLCJjb2xvckhvdmVyRW5hYmxlIjpmYWxzZSwiY29sb3JIb3ZlciI6IiNFRUQyRkYiLCJiYWNrZ3JvdW5kIjp7ImVuYWJsZSI6ZmFsc2UsImluZGVudCI6IjAgMCAwIDAiLCJvcGFjaXR5IjoiMC4yIiwib3BhY2l0eUhvdmVyRW5hYmxlIjpmYWxzZSwib3BhY2l0eUhvdmVyIjoiMSIsImZpbGxldCI6IjEiLCJjb2xvciI6IiNmZmZmZmYiLCJjb2xvckhvdmVyRW5hYmxlIjpmYWxzZSwiY29sb3JIb3ZlciI6IiNmZmZmZmYifX0sInNlZWsiOnsiaW5kZXgiOjEyLCJlbmFibGUiOnRydWUsInBvc2l0aW9uIjoicGFuZWwiLCJjb2xvckJ1ZmZlciI6IiNBM0EzQTMiLCJvcGFjaXR5QnVmZmVyIjoiMC4yIiwicG9zaXRpb25JbmxpbmVFbmFibGUiOnRydWUsImluZGVudCI6IjAgMTc3IDAgNDAiLCJ0aXBFbmFibGUiOmZhbHNlLCJ0aXBUZXh0IjoiIiwiaGVpZ2h0IjoiNSIsIndpZHRoIjoiMTAwIiwid2lkdGhQZXJjZW50RW5hYmxlIjp0cnVlLCJ3aWR0aFBlcmNlbnQiOiIwLjUiLCJjb2xvciI6IiM3RDQwRkYiLCJvcGFjaXR5UHJvZ3Jlc3MiOiIxIiwibGFiZWwiOnsiZW5hYmxlIjp0cnVlLCJpbmRlbnQiOiIwIDAgMCAwIiwiY29sb3IiOiIjRkZGRkZGIiwib3BhY2l0eSI6IjEiLCJmaWxsZXQiOiIxIiwic2NhbGUiOiIxLjUiLCJzY2FsZUhvdmVyRW5hYmxlIjp0cnVlLCJzY2FsZUhvdmVyIjoiMiJ9LCJiYWNrZ3JvdW5kIjp7ImVuYWJsZSI6dHJ1ZSwiaW5kZW50IjoiMCAwIDAgMCIsIm9wYWNpdHkiOiIwLjgiLCJvcGFjaXR5SG92ZXJFbmFibGUiOmZhbHNlLCJvcGFjaXR5SG92ZXIiOiIxIiwiZmlsbGV0IjoiMSIsImNvbG9yIjoiI2ZmZmZmZiIsImNvbG9ySG92ZXJFbmFibGUiOmZhbHNlLCJjb2xvckhvdmVyIjoiI2ZmZmZmZiJ9fSwiZnVsbHNjcmVlbiI6eyJpbmRleCI6MTMsImVuYWJsZSI6dHJ1ZSwiaWNvbnMiOnsiZnVsbHNjcmVlbiI6Ijxzdmcgd2lkdGg9XCIyMFwiIGhlaWdodD1cIjIwXCI+XG4gICAgPGcgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDEuMTk5OTk3LCAyKVwiPlxuICAgICAgICA8cGF0aCBkPVwiTTMuODY3MDAzMDUsMTEuMDY3IEw2Ljc2MjAwMzA1LDguNTM3IEw4LjI2MjAwMzA1LDEwLjAzNyBMNS43MzIwMDMwNSwxMi45MzMgTDguODAwMDAzMDUsMTYgTDEuNzk3MDAzMDUsMTYgQzEuMjQ3MDAzMDUsMTYgMC44MDAwMDMwNTIsMTUuNTQ3IDAuODAwMDAzMDUyLDE1LjAwMyBMMC44MDAwMDMwNTIsOCBMMy44NjcwMDMwNSwxMS4wNjcgWiBNMTMuNzMzMDAzMSw0LjkzMyBMMTAuODM4MDAzMSw3LjQ2MyBMOS4zMzgwMDMwNSw1Ljk2MyBMMTEuODY4MDAzMSwzLjA2NyBMOC44MDAwMDMwNSwwIEwxNS44MDMwMDMxLDAgQzE2LjM1MzAwMzEsMCAxNi44MDAwMDMxLDAuNDUzIDE2LjgwMDAwMzEsMC45OTcgTDE2LjgwMDAwMzEsOCBMMTMuNzMzMDAzMSw0LjkzMyBaXCIgZmlsbD1cIiMwMDAwMDBcIj48L3BhdGg+XG4gICAgPC9nPlxuPC9zdmc+IiwiZnVsbHNjcmVlbi1wcmVzcyI6Ijxzdmcgd2lkdGg9XCIyMFwiIGhlaWdodD1cIjIwXCI+XG4gICAgPGcgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDAuMTk5OTk3LCAxKVwiPlxuICAgICAgICA8cGF0aCBkPVwiTTEzLjg2NzAwMzEsMy4wNjcgTDE2Ljc2MjAwMzEsMC41MzcgTDE4LjI2MjAwMzEsMi4wMzcgTDE1LjczMjAwMzEsNC45MzMgTDE4LjgwMDAwMzEsOCBMMTEuNzk3MDAzMSw4IEMxMS4yNDcwMDMxLDggMTAuODAwMDAzMSw3LjU0NyAxMC44MDAwMDMxLDcuMDAzIEwxMC44MDAwMDMxLDAgTDEzLjg2NzAwMzEsMy4wNjcgWiBNNS43MzMwMDMwNSwxNC45MzMgTDIuODM4MDAzMDUsMTcuNDYzIEwxLjMzODAwMzA1LDE1Ljk2MyBMMy44NjgwMDMwNSwxMy4wNjcgTDAuODAwMDAzMDUyLDEwIEw3LjgwMzAwMzA1LDEwIEM4LjM1MzAwMzA1LDEwIDguODAwMDAzMDUsMTAuNDUzIDguODAwMDAzMDUsMTAuOTk3IEw4LjgwMDAwMzA1LDE4IEw1LjczMzAwMzA1LDE0LjkzMyBaXCIgZmlsbD1cIiMwMDAwMDBcIj48L3BhdGg+XG4gICAgPC9nPlxuPC9zdmc+In0sInBvc2l0aW9uIjoicGFuZWwtcmlnaHQiLCJwb3NpdGlvbklubGluZUVuYWJsZSI6dHJ1ZSwiaW5kZW50IjoiMCAxMCAwIDAiLCJpbmRlbnRJY29uIjoiMCAwIDAgMCIsInNjYWxlIjoiMC45Iiwic2NhbGVIb3ZlckVuYWJsZSI6dHJ1ZSwic2NhbGVIb3ZlciI6IjEuMiIsInRpcEVuYWJsZSI6ZmFsc2UsInRpcFRleHQiOiIiLCJvcGFjaXR5IjoiMSIsIm9wYWNpdHlIb3ZlckVuYWJsZSI6ZmFsc2UsImNvbG9yIjoiI2ZmZmZmZiIsImNvbG9ySG92ZXJFbmFibGUiOmZhbHNlLCJjb2xvckhvdmVyIjoiI2ZmZmZmZiIsImJhY2tncm91bmQiOnsiZW5hYmxlIjpmYWxzZSwiaW5kZW50IjoiMCAwIDAgMCIsIm9wYWNpdHkiOiIxIiwib3BhY2l0eUhvdmVyRW5hYmxlIjpmYWxzZSwib3BhY2l0eUhvdmVyIjoiMSIsImZpbGxldCI6IjEiLCJjb2xvciI6IiNmZmZmZmYiLCJjb2xvckhvdmVyRW5hYmxlIjpmYWxzZSwiY29sb3JIb3ZlciI6IiNmZmZmZmYifX0sInZvbHVtZSI6eyJpbmRleCI6MTQsImVuYWJsZSI6dHJ1ZSwicG9zaXRpb24iOiJwYW5lbC1yaWdodCIsIm9yaWVudGF0aW9uIjoiaG9yaXpvbnRhbCIsInBvc2l0aW9uSW5saW5lRW5hYmxlIjp0cnVlLCJpbmRlbnQiOiIwIDUgMCAwIiwidGlwRW5hYmxlIjpmYWxzZSwidGlwVGV4dCI6IiIsImhlaWdodCI6IjUiLCJ3aWR0aCI6IjUwIiwid2lkdGhQZXJjZW50RW5hYmxlIjpmYWxzZSwid2lkdGhQZXJjZW50IjoiMSIsImNvbG9yIjoiIzQwODBmZiIsIm9wYWNpdHlQcm9ncmVzcyI6IjEiLCJsYWJlbCI6eyJlbmFibGUiOnRydWUsImluZGVudCI6IjAgMCAwIDAiLCJjb2xvciI6IiNmZmZmZmYiLCJvcGFjaXR5IjoiMSIsImZpbGxldCI6IjAuOCIsInNjYWxlIjoiMSIsInNjYWxlSG92ZXJFbmFibGUiOnRydWUsInNjYWxlSG92ZXIiOiIyLjIifSwiYmFja2dyb3VuZCI6eyJlbmFibGUiOnRydWUsImluZGVudCI6IjAgMCAwIDAiLCJvcGFjaXR5IjoiMC44Iiwib3BhY2l0eUhvdmVyRW5hYmxlIjpmYWxzZSwib3BhY2l0eUhvdmVyIjoiMSIsImZpbGxldCI6IjEiLCJjb2xvciI6IiNmZmZmZmYiLCJjb2xvckhvdmVyRW5hYmxlIjpmYWxzZSwiY29sb3JIb3ZlciI6IiNmZmZmZmYifX0sIm11dGUiOnsiaW5kZXgiOjE1LCJlbmFibGUiOnRydWUsImljb25zIjp7InZvbHVtZSI6Ijxzdmcgd2lkdGg9XCIyMFwiIGhlaWdodD1cIjIwXCI+XG4gICAgPGcgZmlsbC1ydWxlPVwibm9uemVyb1wiIGZpbGw9XCIjMDAwMDAwXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDEsIDEpXCI+XG4gICAgICAgIDxwYXRoIGQ9XCJNMC4yNSwxMi43NSBMMC4yNSw1LjI1IEw0Ljc3MjkxODI3LDUuMjUgTDExLjc2MzMzODQsMC41ODk3MTk5MzUgTDExLjYwNDY1MiwxNy40MDk4ODkgTDQuNzY4Njg4MTMsMTIuNzUgTDAuMjUsMTIuNzUgWiBNMS43NSw2Ljc1IEwxLjc1LDExLjI1IEw1LjIzMTMxMTg3LDExLjI1IEwxMC4xMzExODc4LDE0LjU5MDExMSBMMTAuMjM2NjYxNiwzLjQxMDI4MDA3IEw1LjIyNzA4MTczLDYuNzUgTDEuNzUsNi43NSBaXCIgZmlsbD1cIiMwMDAwMDBcIj48L3BhdGg+XG4gICAgICAgIDxwb2x5Z29uIGlkPVwic3RhZ2Utdm9sdW1lLTI1XCIgcG9pbnRzPVwiMTMuMjUgNC4yNSAxMy4yNSAxMi43NSAxNC43NSAxMi43NSAxNC43NSA0LjI1XCIgZmlsbD1cIiMwMDAwMDBcIj48L3BvbHlnb24+XG4gICAgICAgIDxwb2x5Z29uIGlkPVwic3RhZ2Utdm9sdW1lLTUwXCIgcG9pbnRzPVwiMTYuMjUgMi4yNSAxNi4yNSAxNC43NSAxNy43NSAxNC43NSAxNy43NSAyLjI1XCIgZmlsbD1cIiMwMDAwMDBcIj48L3BvbHlnb24+XG4gICAgPC9nPlxuPC9zdmc+Iiwidm9sdW1lLTUwIjoiIiwidm9sdW1lLTI1IjoiIiwibXV0ZSI6Ijxzdmcgd2lkdGg9XCIyMFwiIGhlaWdodD1cIjIwXCI+XG4gICAgPGcgZmlsbC1ydWxlPVwibm9uemVyb1wiIGZpbGw9XCIjMDAwMDAwXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDEsIDEpXCI+XG4gICAgICAgIDxwYXRoIGQ9XCJNMC4yNSwxMi43NSBMMC4yNSw1LjI1IEw0Ljc3MjkxODI3LDUuMjUgTDExLjc2MzMzODQsMC41ODk3MTk5MzUgTDExLjYwNDY1MiwxNy40MDk4ODkgTDQuNzY4Njg4MTMsMTIuNzUgTDAuMjUsMTIuNzUgWiBNMS43NSw2Ljc1IEwxLjc1LDExLjI1IEw1LjIzMTMxMTg3LDExLjI1IEwxMC4xMzExODc4LDE0LjU5MDExMSBMMTAuMjM2NjYxNiwzLjQxMDI4MDA3IEw1LjIyNzA4MTczLDYuNzUgTDEuNzUsNi43NSBaXCIgZmlsbD1cIiMwMDAwMDBcIj48L3BhdGg+XG4gICAgPC9nPlxuPC9zdmc+In0sInBvc2l0aW9uIjoicGFuZWwtcmlnaHQiLCJwb3NpdGlvbklubGluZUVuYWJsZSI6dHJ1ZSwiaW5kZW50IjoiMCA1IDAgMCIsImluZGVudEljb24iOiIwIDAgMCAwIiwic2NhbGUiOiIwLjkiLCJzY2FsZUhvdmVyRW5hYmxlIjpmYWxzZSwic2NhbGVIb3ZlciI6IjEiLCJ0aXBFbmFibGUiOmZhbHNlLCJ0aXBUZXh0IjoiIiwib3BhY2l0eSI6IjEiLCJvcGFjaXR5SG92ZXJFbmFibGUiOmZhbHNlLCJjb2xvciI6IiNmZmZmZmYiLCJjb2xvckhvdmVyRW5hYmxlIjpmYWxzZSwiY29sb3JIb3ZlciI6IiNmZmZmZmYiLCJiYWNrZ3JvdW5kIjp7ImVuYWJsZSI6ZmFsc2UsImluZGVudCI6IjAgMCAwIDAiLCJvcGFjaXR5IjoiMSIsIm9wYWNpdHlIb3ZlckVuYWJsZSI6ZmFsc2UsIm9wYWNpdHlIb3ZlciI6IjEiLCJmaWxsZXQiOiIxIiwiY29sb3IiOiIjZmZmZmZmIiwiY29sb3JIb3ZlckVuYWJsZSI6ZmFsc2UsImNvbG9ySG92ZXIiOiIjZmZmZmZmIn19LCJ0aW1lIjp7ImluZGV4IjoxNiwiZW5hYmxlIjpmYWxzZSwiZm9udFNpemUiOiIxNCIsInRlbXBsYXRlIjoie3RpbWV9IiwicG9zaXRpb24iOiJib3R0b20iLCJwb3NpdGlvbklubGluZUVuYWJsZSI6ZmFsc2UsImluZGVudCI6Ii0zMSAyNCAwIDAiLCJzY2FsZSI6IjEiLCJzY2FsZUhvdmVyRW5hYmxlIjpmYWxzZSwic2NhbGVIb3ZlciI6IjEuMyIsInRpcEVuYWJsZSI6ZmFsc2UsInRpcFRleHQiOiIiLCJvcGFjaXR5IjoiMSIsIm9wYWNpdHlIb3ZlckVuYWJsZSI6ZmFsc2UsImNvbG9yIjoiI2ZmZmZmZiIsImNvbG9ySG92ZXJFbmFibGUiOmZhbHNlLCJjb2xvckhvdmVyIjoiI2ZmZmZmZiIsImJhY2tncm91bmQiOnsiZW5hYmxlIjpmYWxzZSwiaW5kZW50IjoiMCAwIDAgMCIsIm9wYWNpdHkiOiIxIiwib3BhY2l0eUhvdmVyRW5hYmxlIjpmYWxzZSwib3BhY2l0eUhvdmVyIjoiMSIsImZpbGxldCI6IjEiLCJjb2xvciI6IiNmZmZmZmYiLCJjb2xvckhvdmVyRW5hYmxlIjpmYWxzZSwiY29sb3JIb3ZlciI6IiNmZmZmZmYifX0sInNldHRpbmdzIjp7ImluZGV4IjoxNywiZW5hYmxlIjp0cnVlLCJpY29ucyI6eyJzZXR0aW5ncyI6Ijxzdmcgd2lkdGg9XCIyMFwiIGhlaWdodD1cIjIwXCIgeD1cIjBweFwiIHk9XCIwcHhcIiB2aWV3Qm94PVwiMCAwIDUxMiA1MTJcIiBzdHlsZT1cImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDUxMjtcIj5cbjxnIGZpbGw9XCIjMDAwXCIgc3R5bGU9XCJmaWxsOiByZ2IoMCwgMCwgMCk7XCI+XG5cdDxwYXRoIGQ9XCJNNTEyLDI4OS43NHYtNjcuNDc5bC02OC4xOTctMTguMTM5Yy00LjI1MS0xNS4zOTgtMTAuNDA2LTMwLjE4Ny0xOC4zODktNDQuMTkybDM0Ljg3Ni02MC41NzRsLTQ3LjY0Ni00Ny42NDdcblx0XHRcdEwzNTIuMDcsODYuNTg1Yy0xNC4wMDItNy45ODItMjguNzk0LTE0LjEzNy00NC4xOTEtMTguMzg5TDI4OS43NCwwaC02Ny40OGwtMTguMTQsNjguMTk1XG5cdFx0XHRjLTE1LjM5Nyw0LjI1Mi0zMC4xODksMTAuNDA4LTQ0LjE5MSwxOC4zODlMOTkuMzU1LDUxLjcwOEw1MS43MDksOTkuMzU1bDM0Ljg3Niw2MC41NzNcblx0XHRcdGMtNy45ODQsMTQuMDA1LTE0LjEzOCwyOC43OTUtMTguMzg5LDQ0LjE5MkwwLDIyMi4yNnY2Ny40NzlsNjguMTk3LDE4LjEzOWM0LjI1MiwxNS4zOTgsMTAuNDA3LDMwLjE4OCwxOC4zODksNDQuMTkyXG5cdFx0XHRMNTEuNzEsNDEyLjY0M2w0Ny42NDYsNDcuNjQ3bDYwLjU3NC0zNC44NzZjMTQuMDAyLDcuOTgzLDI4Ljc5MywxNC4xMzgsNDQuMTksMTguMzlMMjIyLjI2LDUxMmg2Ny40OGwxOC4xNDEtNjguMTk0XG5cdFx0XHRjMTUuMzk3LTQuMjUzLDMwLjE4Ny0xMC40MDcsNDQuMTktMTguMzlsNjAuNTc0LDM0Ljg3Nmw0Ny42NDYtNDcuNjQ3bC0zNC44NzYtNjAuNTczYzcuOTgzLTE0LjAwNCwxNC4xMzctMjguNzk0LDE4LjM4OS00NC4xOTJcblx0XHRcdEw1MTIsMjg5Ljc0eiBNNDEwLjA4NiwyNzUuNDU4bC0yLjUwNCwxMi4wOThjLTMuOTEzLDE4LjkwNy0xMS4zNjMsMzYuODE3LTIyLjE0LDUzLjIzMmwtNi43NTUsMTAuMjg5bDMxLjY0NCw1NC45NmwtNC4yOTMsNC4yOTNcblx0XHRcdGwtNTQuOTYxLTMxLjY0NWwtMTAuMjg5LDYuNzU1Yy0xNi40MTUsMTAuNzc4LTM0LjMyNSwxOC4yMjctNTMuMjMyLDIyLjE0MWwtMTIuMDk4LDIuNTA1TDI1OC45ODksNDcyaC01Ljk3N2wtMTYuNDY5LTYxLjkxNVxuXHRcdFx0bC0xMi4wOTgtMi41MDVjLTE4LjkwNy0zLjkxNC0zNi44MTctMTEuMzY0LTUzLjIzMi0yMi4xNDFsLTEwLjI4OS02Ljc1NWwtNTQuOTYxLDMxLjY0NWwtNC4yOTMtNC4yOTNsMzEuNjQ0LTU0Ljk2bC02Ljc1NS0xMC4yODlcblx0XHRcdGMtMTAuNzc4LTE2LjQxNS0xOC4yMjctMzQuMzI1LTIyLjE0LTUzLjIzMmwtMi41MDQtMTIuMDk4TDQwLDI1OC45ODl2LTUuOTc3bDYxLjkxNC0xNi40N2wyLjUwNC0xMi4wOTlcblx0XHRcdGMzLjkxMi0xOC45MDUsMTEuMzYyLTM2LjgxNCwyMi4xNC01My4yMzFsNi43NTUtMTAuMjg5bC0zMS42NDQtNTQuOTYxbDQuMjkzLTQuMjkzbDU0Ljk2MiwzMS42NDVsMTAuMjktNi43NTZcblx0XHRcdGMxNi40MTMtMTAuNzc2LDM0LjMyMi0xOC4yMjUsNTMuMjI5LTIyLjEzOWwxMi4wOTktMi41MDRMMjUzLjAxMSw0MGg1Ljk3N2wxNi40NjksNjEuOTE1bDEyLjA5OSwyLjUwNFxuXHRcdFx0YzE4LjkwNywzLjkxNCwzNi44MTYsMTEuMzYzLDUzLjIyOSwyMi4xMzlsMTAuMjksNi43NTZsNTQuOTYyLTMxLjY0NWw0LjI5Myw0LjI5M2wtMzEuNjQ0LDU0Ljk2MWw2Ljc1NSwxMC4yODlcblx0XHRcdGMxMC43NzksMTYuNDE2LDE4LjIyOCwzNC4zMjYsMjIuMTQsNTMuMjMxbDIuNTA0LDEyLjA5OUw0NzIsMjUzLjAxMXY1Ljk3N0w0MTAuMDg2LDI3NS40NTh6XCI+PC9wYXRoPlxuXG5cdDxwYXRoIGQ9XCJNMjU2LDE0MGMtNjMuOTYzLDAtMTE2LDUyLjAzOC0xMTYsMTE2czUyLjAzNywxMTYsMTE2LDExNnMxMTYtNTIuMDM4LDExNi0xMTZTMzE5Ljk2MywxNDAsMjU2LDE0MHogTTI1NiwzMzJcblx0XHRcdGMtNDEuOTA2LDAtNzYtMzQuMDkzLTc2LTc2czM0LjA5NC03Niw3Ni03NnM3NiwzNC4wOTMsNzYsNzZDMzMyLDI5Ny45MDcsMjk3LjkwNiwzMzIsMjU2LDMzMnpcIj48L3BhdGg+XG48L2c+XG48L3N2Zz5cbiJ9LCJwb3NpdGlvbiI6InBhbmVsLXJpZ2h0IiwicG9zaXRpb25JbmxpbmVFbmFibGUiOnRydWUsImluZGVudCI6IjAgNiAwIDAiLCJpbmRlbnRJY29uIjoiMCAwIDAgMCIsInNjYWxlIjoiMC45Iiwic2NhbGVIb3ZlckVuYWJsZSI6ZmFsc2UsInNjYWxlSG92ZXIiOiIxIiwidGlwRW5hYmxlIjpmYWxzZSwidGlwVGV4dCI6IiIsIm9wYWNpdHkiOiIxIiwib3BhY2l0eUhvdmVyRW5hYmxlIjpmYWxzZSwiY29sb3IiOiIjZmZmZmZmIiwiY29sb3JIb3ZlckVuYWJsZSI6ZmFsc2UsImNvbG9ySG92ZXIiOiIjZmZmZmZmIiwiYmFja2dyb3VuZCI6eyJlbmFibGUiOmZhbHNlLCJpbmRlbnQiOiIwIDAgMCAwIiwib3BhY2l0eSI6IjEiLCJvcGFjaXR5SG92ZXJFbmFibGUiOmZhbHNlLCJvcGFjaXR5SG92ZXIiOiIxIiwiZmlsbGV0IjoiMSIsImNvbG9yIjoiI2ZmZmZmZiIsImNvbG9ySG92ZXJFbmFibGUiOmZhbHNlLCJjb2xvckhvdmVyIjoiI2ZmZmZmZiJ9fSwiZHVyYXRpb24iOnsiaW5kZXgiOjE4LCJlbmFibGUiOnRydWUsImZvbnRTaXplIjoiMTQiLCJ0ZW1wbGF0ZSI6Int0aW1lfSIsInBvc2l0aW9uIjoicGFuZWwtcmlnaHQiLCJwb3NpdGlvbklubGluZUVuYWJsZSI6dHJ1ZSwiaW5kZW50IjoiMCAyIDAgMCIsInNjYWxlIjoiMSIsInNjYWxlSG92ZXJFbmFibGUiOmZhbHNlLCJzY2FsZUhvdmVyIjoiMSIsInRpcEVuYWJsZSI6ZmFsc2UsInRpcFRleHQiOiIiLCJvcGFjaXR5IjoiMSIsIm9wYWNpdHlIb3ZlckVuYWJsZSI6ZmFsc2UsImNvbG9yIjoiI2ZmZmZmZiIsImNvbG9ySG92ZXJFbmFibGUiOmZhbHNlLCJjb2xvckhvdmVyIjoiI2ZmZmZmZiIsImJhY2tncm91bmQiOnsiZW5hYmxlIjpmYWxzZSwiaW5kZW50IjoiMCAwIDAgMCIsIm9wYWNpdHkiOiIxIiwib3BhY2l0eUhvdmVyRW5hYmxlIjpmYWxzZSwib3BhY2l0eUhvdmVyIjoiMSIsImZpbGxldCI6IjEiLCJjb2xvciI6IiNmZmZmZmYiLCJjb2xvckhvdmVyRW5hYmxlIjpmYWxzZSwiY29sb3JIb3ZlciI6IiNmZmZmZmYifX0sImJ1ZmZlciI6eyJpbmRleCI6MTksImVuYWJsZSI6dHJ1ZSwiaWNvbnMiOnsibG9hZGVyIjoiPHN2ZyB3aWR0aD1cIjUwcHhcIiBoZWlnaHQ9XCI1MHB4XCIgdmlld0JveD1cIi0xMCAtMTAgMTAwIDEwMFwiPlxuICA8cmVjdCB4PVwiMFwiIHk9XCIwXCIgd2lkdGg9XCIxMDBcIiBoZWlnaHQ9XCIxMDBcIiBmaWxsPVwibm9uZVwiPjwvcmVjdD5cbiAgPHJlY3QgeD1cIi05XCIgeT1cIi05XCIgd2lkdGg9XCIxOFwiIGhlaWdodD1cIjE4XCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDI1IDI1KSBzY2FsZSgxIDEpXCIgZGF0YS1jaGFuZ2UtZmlsbD1cImZhbHNlXCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJyZ2JhKDAsMCwwLC41KVwiIHN0cm9rZS13aWR0aD1cIjMlXCIgY2xhc3M9XCJzcVwiIHN0eWxlPVwic3Ryb2tlOiByZ2IoMCwgMCwgMCk7XCI+XG4gICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT1cInN0cm9rZVwiIGZyb209XCJyZ2JhKDAsMCwwLDApXCIgdG89XCJyZ2JhKDAsMCwwLC41KVwiIHJlcGVhdENvdW50PVwiaW5kZWZpbml0ZVwiIGR1cj1cIjEuNnNcIiBiZWdpbj1cIjAuMHNcIiB2YWx1ZXM9XCJyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwuNSlcIiBrZXlUaW1lcz1cIjA7MC4xOzAuMjswLjQ7MVwiPjwvYW5pbWF0ZT5cbiAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9XCJ0cmFuc2Zvcm1cIiB0eXBlPVwic2NhbGVcIiBhZGRpdGl2ZT1cInN1bVwiIGZyb209XCIwLjhcIiB0bz1cIjFcIiByZXBlYXRDb3VudD1cImluZGVmaW5pdGVcIiBiZWdpbj1cIjAuMHNcIiBkdXI9XCIxLjZzXCIgdmFsdWVzPVwiMTswLjg7MC44OzE7MVwiIGtleVRpbWVzPVwiMDswLjE7MC4yOzAuNDsxXCI+PC9hbmltYXRlVHJhbnNmb3JtPlxuICA8L3JlY3Q+XG4gIDxyZWN0IHg9XCItOVwiIHk9XCItOVwiIHdpZHRoPVwiMThcIiBoZWlnaHQ9XCIxOFwiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSg1MCAyNSkgc2NhbGUoMSAxKVwiIGRhdGEtY2hhbmdlLWZpbGw9XCJmYWxzZVwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwicmdiYSgwLDAsMCwuNSlcIiBzdHJva2Utd2lkdGg9XCIzJVwiIGNsYXNzPVwic3FcIiBzdHlsZT1cInN0cm9rZTogcmdiKDAsIDAsIDApO1wiPlxuICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9XCJzdHJva2VcIiBmcm9tPVwicmdiYSgwLDAsMCwwKVwiIHRvPVwicmdiYSgwLDAsMCwuNSlcIiByZXBlYXRDb3VudD1cImluZGVmaW5pdGVcIiBkdXI9XCIxLjZzXCIgYmVnaW49XCIwLjRzXCIgdmFsdWVzPVwicmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsLjUpXCIga2V5VGltZXM9XCIwOzAuMTswLjI7MC40OzFcIj48L2FuaW1hdGU+XG4gICAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPVwidHJhbnNmb3JtXCIgdHlwZT1cInNjYWxlXCIgYWRkaXRpdmU9XCJzdW1cIiBmcm9tPVwiMC44XCIgdG89XCIxXCIgcmVwZWF0Q291bnQ9XCJpbmRlZmluaXRlXCIgYmVnaW49XCIwLjRzXCIgZHVyPVwiMS42c1wiIHZhbHVlcz1cIjE7MC44OzAuODsxOzFcIiBrZXlUaW1lcz1cIjA7MC4xOzAuMjswLjQ7MVwiPjwvYW5pbWF0ZVRyYW5zZm9ybT5cbiAgPC9yZWN0PlxuICA8cmVjdCB4PVwiLTlcIiB5PVwiLTlcIiB3aWR0aD1cIjE4XCIgaGVpZ2h0PVwiMThcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoNTAgNTApIHNjYWxlKDAuOTM3NTAzIDAuOTM3NTAzKVwiIGRhdGEtY2hhbmdlLWZpbGw9XCJmYWxzZVwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwicmdiYSgwLDAsMCwuNSlcIiBzdHJva2Utd2lkdGg9XCIzJVwiIGNsYXNzPVwic3FcIiBzdHlsZT1cInN0cm9rZTogcmdiKDAsIDAsIDApO1wiPlxuICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9XCJzdHJva2VcIiBmcm9tPVwicmdiYSgwLDAsMCwwKVwiIHRvPVwicmdiYSgwLDAsMCwuNSlcIiByZXBlYXRDb3VudD1cImluZGVmaW5pdGVcIiBkdXI9XCIxLjZzXCIgYmVnaW49XCIwLjhzXCIgdmFsdWVzPVwicmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsLjUpXCIga2V5VGltZXM9XCIwOzAuMTswLjI7MC40OzFcIj48L2FuaW1hdGU+XG4gICAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPVwidHJhbnNmb3JtXCIgdHlwZT1cInNjYWxlXCIgYWRkaXRpdmU9XCJzdW1cIiBmcm9tPVwiMC44XCIgdG89XCIxXCIgcmVwZWF0Q291bnQ9XCJpbmRlZmluaXRlXCIgYmVnaW49XCIwLjhzXCIgZHVyPVwiMS42c1wiIHZhbHVlcz1cIjE7MC44OzAuODsxOzFcIiBrZXlUaW1lcz1cIjA7MC4xOzAuMjswLjQ7MVwiPjwvYW5pbWF0ZVRyYW5zZm9ybT5cbiAgPC9yZWN0PlxuICA8cmVjdCB4PVwiLTlcIiB5PVwiLTlcIiB3aWR0aD1cIjE4XCIgaGVpZ2h0PVwiMThcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoMjUgNTApIHNjYWxlKDAuODI0OTk1IDAuODI0OTk1KVwiIGRhdGEtY2hhbmdlLWZpbGw9XCJmYWxzZVwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwicmdiYSgwLDAsMCwuNSlcIiBzdHJva2Utd2lkdGg9XCIzJVwiIGNsYXNzPVwic3FcIiBzdHlsZT1cInN0cm9rZTogcmdiKDAsIDAsIDApO1wiPlxuICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9XCJzdHJva2VcIiBmcm9tPVwicmdiYSgwLDAsMCwwKVwiIHRvPVwicmdiYSgwLDAsMCwuNSlcIiByZXBlYXRDb3VudD1cImluZGVmaW5pdGVcIiBkdXI9XCIxLjZzXCIgYmVnaW49XCIxLjJzXCIgdmFsdWVzPVwicmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsLjUpXCIga2V5VGltZXM9XCIwOzAuMTswLjI7MC40OzFcIj48L2FuaW1hdGU+XG4gICAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPVwidHJhbnNmb3JtXCIgdHlwZT1cInNjYWxlXCIgYWRkaXRpdmU9XCJzdW1cIiBmcm9tPVwiMC44XCIgdG89XCIxXCIgcmVwZWF0Q291bnQ9XCJpbmRlZmluaXRlXCIgYmVnaW49XCIxLjJzXCIgZHVyPVwiMS42c1wiIHZhbHVlcz1cIjE7MC44OzAuODsxOzFcIiBrZXlUaW1lcz1cIjA7MC4xOzAuMjswLjQ7MVwiPjwvYW5pbWF0ZVRyYW5zZm9ybT5cbiAgPC9yZWN0PlxuPC9zdmc+In0sInBvc2l0aW9uIjoiY2VudGVyIiwicG9zaXRpb25JbmxpbmVFbmFibGUiOmZhbHNlLCJpbmRlbnQiOiIwIDAgMCAwIiwiaW5kZW50SWNvbiI6IjAgMCAwIDAiLCJzY2FsZSI6IjEiLCJzY2FsZUhvdmVyRW5hYmxlIjp0cnVlLCJzY2FsZUhvdmVyIjoiMS41IiwidGlwRW5hYmxlIjp0cnVlLCJ0aXBUZXh0Ijoi0YXQvC4uLiDQv9GA0L7RgdC80L7RgtGAIFwi0L3QtdC80L3QvtCz0L5cIiDQt9Cw0YLRj9C90YPQu9GB0Y8g0LjQty3Qt9CwINCx0YPRhNC10YDQuNC30LDRhtC40Lgg0LLQuNC00LXQvtC60L7QvdGC0LXQvdGC0LA/INC80L7QttC10YIg0L3QsNC00L4g0L/RgNC+0LLQtdGA0LjRgtGMINGB0L7QtdC00LjQvdC10L3QuNC1INGBINC40L3RgtC10YDQvdC10YLQvtC8PyDRhdC8Li4uINC10YHQu9C4INCy0YHRkSDQsiDQv9C+0YDRj9C00LrQtSwg0YLQviDRgdC60L7RgNC10Lkg0LLRgdC10LPQviDQv9GA0L7QsdC70LXQvNGLINGDINC90LDRiNC10LPQviDRgdC10YDQstC40YHQsCIsIm9wYWNpdHkiOiIxIiwib3BhY2l0eUhvdmVyRW5hYmxlIjpmYWxzZSwiY29sb3IiOiIjZmZmZmZmIiwiY29sb3JIb3ZlckVuYWJsZSI6ZmFsc2UsImNvbG9ySG92ZXIiOiIjZmZmZmZmIiwiYmFja2dyb3VuZCI6eyJlbmFibGUiOmZhbHNlLCJpbmRlbnQiOiIwIDAgMCAwIiwib3BhY2l0eSI6IjEiLCJvcGFjaXR5SG92ZXJFbmFibGUiOmZhbHNlLCJvcGFjaXR5SG92ZXIiOiIxIiwiZmlsbGV0IjoiMSIsImNvbG9yIjoiI2ZmZmZmZiIsImNvbG9ySG92ZXJFbmFibGUiOmZhbHNlLCJjb2xvckhvdmVyIjoiI2ZmZmZmZiJ9fSwicGxheUxhcmdlIjp7ImluZGV4IjoyMCwiZW5hYmxlIjp0cnVlLCJpY29ucyI6eyJwbGF5IjoiPHN2ZyB4PVwiMHB4XCIgeT1cIjBweFwiIHdpZHRoPVwiMjBcIiBoZWlnaHQ9XCIyMFwiIHZpZXdCb3g9XCItODAgLTMwIDUxMS45OTkgNTExLjk5OVwiIHN0eWxlPVwiZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTEuOTk5IDUxMS45OTk7XCI+XG4gICAgPGcgZmlsbD1cIiMwMDBcIiB0cmFuc2Zvcm09XCJzY2FsZSguOClcIiBzdHlsZT1cImZpbGw6IHJnYigwLCAwLCAwKTtcIj4gXG4gICAgXHQ8cGF0aCBkPVwiTTQ0My44NiwxOTYuOTE5TDE0MS40NiwxMC41MTRDMTE5LjU4Mi0yLjk1NSw5My4xMzEtMy41MTUsNzAuNzAyLDkuMDE2Yy0yMi40MjksMTIuNTI5LTM1LjgxOSwzNS4zNS0zNS44MTksNjEuMDQxXG4gICAgXHRcdHYzNzEuMTEyYzAsMzguODQ2LDMxLjMsNzAuNjE5LDY5Ljc3LDcwLjgyOWMwLjEwNSwwLDAuMjEsMC4wMDEsMC4zMTMsMC4wMDFjMTIuMDIyLTAuMDAxLDI0LjU1LTMuNzY5LDM2LjI1MS0xMC45MDlcbiAgICBcdFx0YzkuNDEzLTUuNzQzLDEyLjM4OC0xOC4wMjksNi42NDUtMjcuNDQxYy01Ljc0My05LjQxNC0xOC4wMzEtMTIuMzg4LTI3LjQ0MS02LjY0NWMtNS40NzMsMy4zMzgtMTAuODE4LDUuMDY1LTE1LjU1Myw1LjA2NFxuICAgIFx0XHRjLTE0LjUxNS0wLjA3OS0zMC4wNTYtMTIuNTEzLTMwLjA1Ni0zMC44OThWNzAuMDU4YzAtMTEuMDIxLDUuNzQ0LTIwLjgwOCwxNS4zNjQtMjYuMTgzYzkuNjIxLTUuMzc1LDIwLjk2Ni01LjEzNSwzMC4zMzksMC42MzZcbiAgICBcdFx0bDMwMi40MDEsMTg2LjQwNWM5LjA4OSw1LjU5NiwxNC4yOSwxNC45MjcsMTQuMjY4LDI1LjYwMWMtMC4wMjIsMTAuNjczLTUuMjYxLDE5Ljk4My0xNC40LDI1LjU2TDIwNC4xNDcsNDE1Ljk0NVxuICAgIFx0XHRjLTkuNDA0LDUuNzU4LTEyLjM2LDE4LjA0OS02LjYwMiwyNy40NTJjNS43NTcsOS40MDQsMTguMDQ4LDEyLjM2LDI3LjQ1Miw2LjYwMmwyMTguNjExLTEzMy44NTJcbiAgICBcdFx0YzIwLjkzMS0xMi43NjksMzMuNDU3LTM1LjAyOSwzMy41MDctNTkuNTVDNDc3LjE2NSwyMzIuMDc5LDQ2NC43MjksMjA5Ljc2Nyw0NDMuODYsMTk2LjkxOXpcIj48L3BhdGg+XG4gICAgPC9nPlxuPC9zdmc+In0sInBvc2l0aW9uIjoiY2VudGVyIiwicG9zaXRpb25JbmxpbmVFbmFibGUiOmZhbHNlLCJpbmRlbnQiOiIwIDAgMCAwIiwiaW5kZW50SWNvbiI6IjAgMCAwIDAiLCJzY2FsZSI6IjIuNSIsInNjYWxlSG92ZXJFbmFibGUiOnRydWUsInNjYWxlSG92ZXIiOiIzIiwidGlwRW5hYmxlIjpmYWxzZSwidGlwVGV4dCI6IiIsIm9wYWNpdHkiOiIxIiwib3BhY2l0eUhvdmVyRW5hYmxlIjpmYWxzZSwiY29sb3IiOiIjZmZmZmZmIiwiY29sb3JIb3ZlckVuYWJsZSI6ZmFsc2UsImNvbG9ySG92ZXIiOiIjZmZmZmZmIiwiYmFja2dyb3VuZCI6eyJlbmFibGUiOmZhbHNlLCJpbmRlbnQiOiIwIDAgMCAwIiwib3BhY2l0eSI6IjEiLCJvcGFjaXR5SG92ZXJFbmFibGUiOmZhbHNlLCJvcGFjaXR5SG92ZXIiOiIxIiwiZmlsbGV0IjoiMSIsImNvbG9yIjoiI2ZmZmZmZiIsImNvbG9ySG92ZXJFbmFibGUiOmZhbHNlLCJjb2xvckhvdmVyIjoiI2ZmZmZmZiJ9fSwicGlwIjp7ImluZGV4IjoyMSwiZW5hYmxlIjp0cnVlLCJpY29ucyI6eyJwaXAiOiI8c3ZnIHdpZHRoPVwiMjBweFwiIGhlaWdodD1cIjIwcHhcIiB4PVwiMHB4XCIgeT1cIjBweFwiIHZpZXdCb3g9XCIwIDAgMzg0Ljk3IDM4NC45N1wiIHN0eWxlPVwiZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzODQuOTcgMzg0Ljk3O1wiIHhtbDpzcGFjZT1cInByZXNlcnZlXCI+XG4gICAgPGcgZmlsbD1cIiMwMDBcIiBzdHlsZT1cImZpbGw6IHJnYigwLCAwLCAwKTtcIj5cbiAgICBcdDxwYXRoIGQ9XCJNMzcyLjkzOSwyMTYuNTQ1Yy02LjEyMywwLTEyLjAzLDUuMjY5LTEyLjAzLDEyLjAzdjEzMi4zMzNIMjQuMDYxVjI0LjA2MWgxMzIuMzMzYzYuMzg4LDAsMTIuMDMtNS42NDIsMTIuMDMtMTIuMDNcbiAgICBcdFx0UzE2Mi40MDksMCwxNTYuMzk0LDBIMjQuMDYxQzEwLjc2NywwLDAsMTAuNzY3LDAsMjQuMDYxdjMzNi44NDhjMCwxMy4yOTMsMTAuNzY3LDI0LjA2MSwyNC4wNjEsMjQuMDYxaDMzNi44NDhcbiAgICBcdFx0YzEzLjI5MywwLDI0LjA2MS0xMC43NjcsMjQuMDYxLTI0LjA2MVYyMjguMzk1QzM4NC45NywyMjEuNzMxLDM4MC4wODUsMjE2LjU0NSwzNzIuOTM5LDIxNi41NDV6XCI+PC9wYXRoPlxuICAgIFx0PHBhdGggZD1cIk0zNzIuOTM5LDBIMjUyLjYzNmMtNi42NDEsMC0xMi4wMyw1LjM5LTEyLjAzLDEyLjAzczUuMzksMTIuMDMsMTIuMDMsMTIuMDNoOTEuMzgyTDk5LjYzNSwyNjguNDMyXG4gICAgXHRcdGMtNC42NjgsNC42NjgtNC42NjgsMTIuMjM1LDAsMTYuOTAzYzQuNjY4LDQuNjY4LDEyLjIzNSw0LjY2OCwxNi44OTEsMEwzNjAuOTA5LDQwLjk1MXY5MS4zODJjMCw2LjY0MSw1LjM5LDEyLjAzLDEyLjAzLDEyLjAzXG4gICAgXHRcdHMxMi4wMy01LjM5LDEyLjAzLTEyLjAzVjEyLjAzbDAsMEMzODQuOTcsNS41NTgsMzc5LjQxMiwwLDM3Mi45MzksMHpcIj48L3BhdGg+XG48L2c+XG48L3N2Zz4ifSwicG9zaXRpb24iOiJ0b3AtcmlnaHQiLCJwb3NpdGlvbklubGluZUVuYWJsZSI6ZmFsc2UsImluZGVudCI6IjAgMTggLTYgMCIsImluZGVudEljb24iOiIwIDAgMCAwIiwic2NhbGUiOiIxIiwic2NhbGVIb3ZlckVuYWJsZSI6ZmFsc2UsInNjYWxlSG92ZXIiOiIxIiwidGlwRW5hYmxlIjpmYWxzZSwidGlwVGV4dCI6IiIsIm9wYWNpdHkiOiIxIiwib3BhY2l0eUhvdmVyRW5hYmxlIjpmYWxzZSwiY29sb3IiOiIjZmZmZmZmIiwiY29sb3JIb3ZlckVuYWJsZSI6ZmFsc2UsImNvbG9ySG92ZXIiOiIjZmZmZmZmIiwiYmFja2dyb3VuZCI6eyJlbmFibGUiOmZhbHNlLCJpbmRlbnQiOiIwIDAgMCAwIiwib3BhY2l0eSI6IjEiLCJvcGFjaXR5SG92ZXJFbmFibGUiOmZhbHNlLCJvcGFjaXR5SG92ZXIiOiIxIiwiZmlsbGV0IjoiMSIsImNvbG9yIjoiI2ZmZmZmZiIsImNvbG9ySG92ZXJFbmFibGUiOmZhbHNlLCJjb2xvckhvdmVyIjoiI2ZmZmZmZiJ9fX0sIm1vZHVsZXMiOnsicHJldmlld1RodW1iIjp7ImVuYWJsZSI6dHJ1ZSwiY29sb3IiOiIjNDUwMDk3IiwicGFkZGluZyI6IjAiLCJmaWxsZXQiOiIxMCIsIm9wYWNpdHkiOiIwLjgiLCJ0aHVtYlNjcmVlbkVuYWJsZSI6dHJ1ZSwidGh1bWJTY3JlZW5PcGFjaXR5IjoiMC45In0sImRhc2giOnsiZW5hYmxlIjpmYWxzZX0sImhscyI6eyJlbmFibGUiOmZhbHNlfSwiYWRzIjp7ImVuYWJsZSI6ZmFsc2UsImNsaWNrUGF1c2VFbmFibGUiOmZhbHNlLCJjbGlja0Nsb3NlRW5hYmxlIjpmYWxzZSwicHJlcm9sbEVuYWJsZSI6ZmFsc2UsInByZXJvbGxDb3VudCI6IjEiLCJwcmVyb2xsU2tpcERlbGF5IjoiMCIsInByZXJvbGxUaW1lTGltaXRFbmFibGUiOmZhbHNlLCJwcmVyb2xsVGltZUxpbWl0IjoiMSIsInByZXJvbGxWYXN0MSI6IiIsInByZXJvbGxWYXN0UXVldWUxIjoifHwiLCJwcmVyb2xsVmFzdFRpbWVCcmVhazEiOiIwIiwicHJlcm9sbFZhc3RGaXJzdFZpc2l0QnJlYWsxIjpmYWxzZSwicHJlcm9sbFZhc3QyIjoiIiwicHJlcm9sbFZhc3RRdWV1ZTIiOiJ8fCIsInByZXJvbGxWYXN0VGltZUJyZWFrMiI6IjAiLCJwcmVyb2xsVmFzdEZpcnN0VmlzaXRCcmVhazIiOmZhbHNlLCJwcmVyb2xsVmFzdDMiOiIiLCJwcmVyb2xsVmFzdFF1ZXVlMyI6Inx8IiwicHJlcm9sbFZhc3RUaW1lQnJlYWszIjoiMCIsInByZXJvbGxWYXN0Rmlyc3RWaXNpdEJyZWFrMyI6ZmFsc2UsInByZXJvbGxWYXN0NCI6IiIsInByZXJvbGxWYXN0UXVldWU0IjoifHwiLCJwcmVyb2xsVmFzdFRpbWVCcmVhazQiOiIwIiwicHJlcm9sbFZhc3RGaXJzdFZpc2l0QnJlYWs0IjpmYWxzZSwicHJlcm9sbFZhc3Q1IjoiIiwicHJlcm9sbFZhc3RRdWV1ZTUiOiJ8fCIsInByZXJvbGxWYXN0VGltZUJyZWFrNSI6IjAiLCJwcmVyb2xsVmFzdEZpcnN0VmlzaXRCcmVhazUiOmZhbHNlLCJwcmVyb2xsVmFzdDYiOiIiLCJwcmVyb2xsVmFzdFF1ZXVlNiI6Inx8IiwicHJlcm9sbFZhc3RUaW1lQnJlYWs2IjoiMCIsInByZXJvbGxWYXN0Rmlyc3RWaXNpdEJyZWFrNiI6ZmFsc2UsInBhdXNlcm9sbEVuYWJsZSI6ZmFsc2UsInBhdXNlcm9sbENvdW50IjoiMSIsInBhdXNlcm9sbFNraXBEZWxheSI6IjAiLCJwYXVzZXJvbGxUaW1lTGltaXRFbmFibGUiOmZhbHNlLCJwYXVzZXJvbGxUaW1lTGltaXQiOiIxIiwicGF1c2Vyb2xsVmFzdDEiOiIiLCJwYXVzZXJvbGxWYXN0UXVldWUxIjoifHwiLCJwYXVzZXJvbGxWYXN0VGltZUJyZWFrMSI6IjAiLCJwYXVzZXJvbGxWYXN0Rmlyc3RWaXNpdEJyZWFrMSI6ZmFsc2UsInBhdXNlcm9sbFZhc3QyIjoiIiwicGF1c2Vyb2xsVmFzdFF1ZXVlMiI6Inx8IiwicGF1c2Vyb2xsVmFzdFRpbWVCcmVhazIiOiIwIiwicGF1c2Vyb2xsVmFzdEZpcnN0VmlzaXRCcmVhazIiOmZhbHNlLCJwYXVzZXJvbGxWYXN0MyI6IiIsInBhdXNlcm9sbFZhc3RRdWV1ZTMiOiJ8fCIsInBhdXNlcm9sbFZhc3RUaW1lQnJlYWszIjoiMCIsInBhdXNlcm9sbFZhc3RGaXJzdFZpc2l0QnJlYWszIjpmYWxzZSwicGF1c2Vyb2xsVmFzdDQiOiIiLCJwYXVzZXJvbGxWYXN0UXVldWU0IjoifHwiLCJwYXVzZXJvbGxWYXN0VGltZUJyZWFrNCI6IjAiLCJwYXVzZXJvbGxWYXN0Rmlyc3RWaXNpdEJyZWFrNCI6ZmFsc2UsInBhdXNlcm9sbFZhc3Q1IjoiIiwicGF1c2Vyb2xsVmFzdFF1ZXVlNSI6Inx8IiwicGF1c2Vyb2xsVmFzdFRpbWVCcmVhazUiOiIwIiwicGF1c2Vyb2xsVmFzdEZpcnN0VmlzaXRCcmVhazUiOmZhbHNlLCJwYXVzZXJvbGxWYXN0NiI6IiIsInBhdXNlcm9sbFZhc3RRdWV1ZTYiOiJ8fCIsInBhdXNlcm9sbFZhc3RUaW1lQnJlYWs2IjoiMCIsInBhdXNlcm9sbFZhc3RGaXJzdFZpc2l0QnJlYWs2IjpmYWxzZSwibWlkcm9sbEVuYWJsZSI6ZmFsc2UsIm1pZHJvbGxDb3VudCI6IjEiLCJtaWRyb2xsU2tpcERlbGF5IjoiMCIsIm1pZHJvbGxUaW1lTGltaXRFbmFibGUiOmZhbHNlLCJtaWRyb2xsVGltZUxpbWl0IjoiMSIsIm1pZHJvbGxWYXN0MSI6IiIsIm1pZHJvbGxWYXN0UXVldWUxIjoifHwiLCJtaWRyb2xsVmFzdFRpbWVCcmVhazEiOiIwIiwibWlkcm9sbFZhc3RGaXJzdFZpc2l0QnJlYWsxIjpmYWxzZSwibWlkcm9sbFZhc3QyIjoiIiwibWlkcm9sbFZhc3RRdWV1ZTIiOiJ8fCIsIm1pZHJvbGxWYXN0VGltZUJyZWFrMiI6IjAiLCJtaWRyb2xsVmFzdEZpcnN0VmlzaXRCcmVhazIiOmZhbHNlLCJtaWRyb2xsVmFzdDMiOiIiLCJtaWRyb2xsVmFzdFF1ZXVlMyI6Inx8IiwibWlkcm9sbFZhc3RUaW1lQnJlYWszIjoiMCIsIm1pZHJvbGxWYXN0Rmlyc3RWaXNpdEJyZWFrMyI6ZmFsc2UsIm1pZHJvbGxWYXN0NCI6IiIsIm1pZHJvbGxWYXN0UXVldWU0IjoifHwiLCJtaWRyb2xsVmFzdFRpbWVCcmVhazQiOiIwIiwibWlkcm9sbFZhc3RGaXJzdFZpc2l0QnJlYWs0IjpmYWxzZSwibWlkcm9sbFZhc3Q1IjoiIiwibWlkcm9sbFZhc3RRdWV1ZTUiOiJ8fCIsIm1pZHJvbGxWYXN0VGltZUJyZWFrNSI6IjAiLCJtaWRyb2xsVmFzdEZpcnN0VmlzaXRCcmVhazUiOmZhbHNlLCJtaWRyb2xsVmFzdDYiOiIiLCJtaWRyb2xsVmFzdFF1ZXVlNiI6Inx8IiwibWlkcm9sbFZhc3RUaW1lQnJlYWs2IjoiMCIsIm1pZHJvbGxWYXN0Rmlyc3RWaXNpdEJyZWFrNiI6ZmFsc2UsInBvc3Ryb2xsRW5hYmxlIjpmYWxzZSwicG9zdHJvbGxDb3VudCI6IjEiLCJwb3N0cm9sbFNraXBEZWxheSI6IjAiLCJwb3N0cm9sbFRpbWVMaW1pdEVuYWJsZSI6ZmFsc2UsInBvc3Ryb2xsVGltZUxpbWl0IjoiMSIsInBvc3Ryb2xsVmFzdDEiOiIiLCJwb3N0cm9sbFZhc3RRdWV1ZTEiOiJ8fCIsInBvc3Ryb2xsVmFzdFRpbWVCcmVhazEiOiIwIiwicG9zdHJvbGxWYXN0Rmlyc3RWaXNpdEJyZWFrMSI6ZmFsc2UsInBvc3Ryb2xsVmFzdDIiOiIiLCJwb3N0cm9sbFZhc3RRdWV1ZTIiOiJ8fCIsInBvc3Ryb2xsVmFzdFRpbWVCcmVhazIiOiIwIiwicG9zdHJvbGxWYXN0Rmlyc3RWaXNpdEJyZWFrMiI6ZmFsc2UsInBvc3Ryb2xsVmFzdDMiOiIiLCJwb3N0cm9sbFZhc3RRdWV1ZTMiOiJ8fCIsInBvc3Ryb2xsVmFzdFRpbWVCcmVhazMiOiIwIiwicG9zdHJvbGxWYXN0Rmlyc3RWaXNpdEJyZWFrMyI6ZmFsc2UsInBvc3Ryb2xsVmFzdDQiOiIiLCJwb3N0cm9sbFZhc3RRdWV1ZTQiOiJ8fCIsInBvc3Ryb2xsVmFzdFRpbWVCcmVhazQiOiIwIiwicG9zdHJvbGxWYXN0Rmlyc3RWaXNpdEJyZWFrNCI6ZmFsc2UsInBvc3Ryb2xsVmFzdDUiOiIiLCJwb3N0cm9sbFZhc3RRdWV1ZTUiOiJ8fCIsInBvc3Ryb2xsVmFzdFRpbWVCcmVhazUiOiIwIiwicG9zdHJvbGxWYXN0Rmlyc3RWaXNpdEJyZWFrNSI6ZmFsc2UsInBvc3Ryb2xsVmFzdDYiOiIiLCJwb3N0cm9sbFZhc3RRdWV1ZTYiOiJ8fCIsInBvc3Ryb2xsVmFzdFRpbWVCcmVhazYiOiIwIiwicG9zdHJvbGxWYXN0Rmlyc3RWaXNpdEJyZWFrNiI6ZmFsc2UsInZhc3RTdHlsZSI6eyJjbG9zZSI6eyJjb2xvciI6IiNmZmYiLCJiYWNrZ3JvdW5kIjoiIzAwMCJ9LCJza2lwIjp7ImNvbG9yIjoiI2ZmZiIsImJhY2tncm91bmQiOiIjMDAwMDAwQzQifSwidGV4dCI6eyJ0ZXh0IjoiIiwiY29sb3IiOiIjZmZmIiwiYmFja2dyb3VuZCI6IiMwMDAwMDBDNCJ9fX0sInNlY3VyaXR5Ijp7ImVuYWJsZSI6dHJ1ZSwia2V5IjoiYnJ0X2thaXNlcnhwdXJvX2Zvcl9iY2YifX19",is="2022-11-20 17:42:15",ns="1.1";const de="update-ui";class Pi extends Tt{static definePlugin(){return Mo}static getVersion(){return ns}static getLastBuild(){return is}static setConfig(t){es=t}static getConfig(){try{let t=atob(es);return JSON.parse(t)}catch{}return{}}constructor(t){super(),this.el=null,this.elements={},this.requestId=null,this.isReady=!1,this.plugins={},this.controls={};const e={debug:!1,file:"",poster:"",thumb:"",vast:"",id:null,uid:null,volume:.75,title:"",ratio:null};let i={},s=Pi.getConfig();s!==void 0&&(i=Object.assign({},s.config,{elements:s.elements,modules:s.modules})),this.options=Object.assign({},e,i,t),this.storage=new vo}update(t){return this.options=Object.assign(this.options,t),this.ready()}setStorageValue(t,e){this.storage&&this.storage.set(O+"_"+t,e)}getStorageValue(t){return this.storage?this.storage.get(O+"_"+t):null}async ready(){if(this.isReady=!1,this.stageFirst=!0,this.initDebug(),this.debug.log("WMPlayer version:"+ns+" Last build:"+is),!this.init()){const t=`container id "${this.options.id}" not found`;return this.debug.log(t),Promise.reject(t)}return this.initI18n(),this.initTemplate(),this.initNotify(),this.initTracker(),this.initVastNetwork(),this.initSubtitle(),await this.initPlaylist(),await this.initMedia(),this.initContainerSize(),this.initStyles(),this.initComposer(),this.initUiControls(),this.initFullscreen(),this.initResizeManager(),this.initMenu(),this.initPreviewThumb(),this.initScreenSeek(),this.initEvents(),this.updateUi(),this.iteratePlugins(async t=>{await t.ready()}),this.toggleControls(!0,!0),new Promise((t,e)=>{t(this.isReady=!0)})}init(){if(this.el===null&&this.options.id!==null){let t=document.getElementById(this.options.id);if(t||(t=document.querySelector(this.options.id)),t instanceof HTMLElement)return this.el=t,!0}return this.el!==null}toggleControls(t,e){let i=this.getMedia();if(this.controls.panel,i.paused&&(t=!0),!(!e&&this.stageShowControl===t)){this.stageShowControl=t;for(let s in this.controls){let r=this.controls[s];if(r instanceof Kt){if(!r.isEnable()){r.hide();continue}if(["playLarge","buffer"].indexOf(s)!==-1)continue;r.isEnable()&&(W.remove(r.container),W(t?{targets:r.container,opacity:1,duration:100,easing:"easeInOutQuad",begin:()=>{r.container.style.display="block"}}:{targets:r.container,opacity:0,duration:100,easing:"easeInOutQuad",complete:()=>{r.container.style.display="none"}}))}}this.playlist&&this.controls.playlist&&!this.controls.playlist.isEnable()&&(t?this.playlist.toggle(t):!this.playlist.ui.isUserActive()&&this.playlist.toggle(t))}}initEvents(){this.listners||(this.listners=new To(this)),this.debug.log("Init listeners")}initStyles(){let t=this.options.uid,e="wmstyle-"+t,i=[];i.push(uo(this.options)),Is(this.el,e,i.join(`
`),!0),this.debug.log("Init styles")}getElContainerPoster(){return this.elements.poster}getElContainer(){return this.elements.container}getElContainerWrapper(){return this.elements.wrapper}getElContainerPanel(){return this.elements.panel}getElContainerUi(){return this.elements.ui}initTemplate(){if(!this.elements.container){let e=S("div",{class:O}),i=S("div",{class:O+"-wrapper"}),s=S("div",{class:O+"-poster"}),r=S("div",{class:O+"-ui"});w(e,i),w(i,s),w(i,r),this.elements.container=e,this.elements.wrapper=i,this.elements.poster=s,this.elements.ui=r,w(this.el,e),this.ui=new Lt(this.getElContainerWrapper(),{enableActive:!0})}let t=x(this.options.elements,"screen.color",null);t&&A(this.getElContainerWrapper(),{background:t}),this.debug.log("Init template")}initVastNetwork(){this.vastNetwork?this.vastNetwork.init():this.vastNetwork=new ua(this),this.debug.log("Init vast network")}initTracker(){this.tracker||(this.tracker=new dr(this)),this.debug.log("Init tracker")}initDebug(){this.debug=new co(this.options.debug)}initNotify(){this.notify?this.notify.init():this.notify=new bo(this),this.debug.log("Init notify")}initComposer(){this.composer||(this.composer=new ar(this)),this.debug.log("Init composer")}initFullscreen(){this.fullscreen||(this.fullscreen=new cr(this)),this.debug.log("Init fullscreen")}async initPlaylist(){this.playlist||(this.playlist=new No(this));let t=this.options.playlist;typeof t=="string"&&t.indexOf("//")!==-1?this.playlist.listUrl=t:Array.isArray(t)&&(this.playlist.listData=t),await this.playlist.init(),this.debug.log("Init playlist")}initResizeManager(){this.resizeManager||(this.resizeManager=new lr(this)),this.debug.log("Init resize manager")}initMenu(){this.menu?this.menu.init():this.menu=new to(this),this.debug.log("Init menu")}initPreviewThumb(){this.thumbPreview?this.thumbPreview.init():this.thumbPreview=new ba(this),this.debug.log("Init thumb preview")}initScreenSeek(){this.screenSeek||(this.screenSeek=new ko(this)),this.debug.log("Init screen seek")}initI18n(){let t=x(this.options,"language",null);t||(t=window.navigator.language||window.navigator.userLanguage,t=t.split("-")[0].toLowerCase()),xt.setLocale(t),this.debug.log("Init I18n"),this.debug.log("Set language",t)}initContainerSize(){let t=this.getElContainer(),e=x(this.options,"size.type","16:9"),i=x(this.options,"size.width",0),s=x(this.options,"size.height",0);if(A(t,{width:i==="0"?"100%":i}),A(t,{height:s==="0"?"100%":s}),this.containerAspect=0,this.containerWidth=t.offsetWidth,this.containertHeight=t.offsetHeight,e!=="cover"){if(e!=="auto"){if(Bo(e)){let[r,o]=Uo(e);this.containerAspect=r/o,this.changeContainerAspect()}}}}changeContainerAspect(){let t=this.getElContainer();this.containerWidth=t.offsetWidth,this.containertHeight=t.offsetHeight,this.containerAspect>0&&(this.containertHeight=this.containerWidth/this.containerAspect,A(t,{height:this.containertHeight}))}initSubtitle(){this.subtitle?this.subtitle.init():this.subtitle=new yo(this),this.debug.log("Init subtitle")}setMedia(t){this.controls.media=t}getMedia(){return this.controls.media}getPlayerUID(){return this.options.uid}async getPreloadFormat(){let t=x(this.options,"preload",!1);if(t||(t="metadata"),x(this.options,"preloaderOffLowBattery",!1)&&"getBattery"in navigator)try{let i=await navigator.getBattery();i.level&&i.level<.15&&(this.getMedia().options.lowBattery=!0,t="none")}catch(i){this.debug.error("get battery level",i)}return t}async initMedia(){let t=this.getStorageValue("volume"),e=this.getStorageValue("muted"),i=this.getStorageValue("speed");this.controls.media||this.setMedia(new rr(this,{}));let s=await this.getPreloadFormat();this.getMedia().options.dashOptions=x(this.options,"dashOptions",{}),this.getMedia().options.blobLoader=x(this.options,"blobLoader",!1),this.getMedia().options.blobLoaderCache=x(this.options,"blobLoaderCache",!1),this.getMedia().options.preload=s,this.getMedia().options.volume=x(this.options,"volume",.7),this.getMedia().options.loop=x(this.options,"loop",!1);let r=x(this.options,"file",""),o=x(this.options,"poster","");return x(this.options,"playlist",[]).length&&this.playlist.listData.length&&(r=this.playlist.listData[0].file,o=this.playlist.listData[0].poster,this.stageFirst=!0),this.getMedia().setSrc(r),this.getMedia().setPoster(o),this.getMedia().updateMediaOptions(),this.getMedia().muted=typeof e=="boolean"?e:!1,isFinite(t)&&t!==null&&t!==void 0&&(t=wt(t,0,1),this.getMedia().volume=t),isFinite(i)&&(this.getMedia().speed=i),this.debug.log("Init media provider"),Promise.resolve()}initUiControls(){this.composer.clearComposition(),this.composer.initComposition();let t=this.options.elements.panel;if(this.controls.panel)this.controls.panel.update(t);else{let i=new ca(t,{});this.controls.panel=i,this.elements.panel=i.container,w(this.getElContainerUi(),i.container)}let{composition:e}=this.composer;for(let i in e){let s=e[i].controls.length;if(!!s)for(let r=0;r<s;r++){let o=e[i].controls[r],u=this.options.elements[o.name];o.name==="name"&&this.options.title.length&&(u.text=this.options.title),o.name==="buffer"&&(u.width=50,u.height=50),o.name==="volume"&&et.isIos&&(u.enable=!1),this.controls[o.name]?this.controls[o.name].update(u):this.createControl(o.name,u),this.composer.registerControl(o.name,i)}}this.composer.updateComposingPosition(),this.debug.log("Init ui controls")}api(t,e){return fa.call(this,t,e)}createControl(t,e){let i=null;Fo.includes(t)?i=new wn(e,{componentName:t}):_o.includes(t)?i=new Ta(e,{componentName:t}):Do.includes(t)?i=new ya(e,{componentName:t}):Vo.includes(t)&&(i=new hi(e,{componentName:t})),i!==null&&(i.isEnable()||i.hide(),this.controls[t]=i,Qt(i.container,`${O}-control-${t}`),w(this.getElContainerUi(),i.container))}updateUiDuration(){this.controls.duration&&this.controls.duration.updateTime(this.getMedia().duration)}updateUiTime(){this.controls.time&&this.controls.time.updateTime(this.getMedia().currentTime)}updateUiPlay(){let t=null;this.controls.play&&(this.getMedia().playing&&(t="pause"),(this.getMedia().paused||this.getMedia().stopped)&&(t="play"),this.controls.play.updateIconStage(t))}updateUiSettings(){let t="settings";this.controls.settings&&this.controls.settings.updateIconStage(t)}updateUiFullscreen(){let t="fullscreen";this.controls.fullscreen&&(this.fullscreen.getActive()&&(t="fullscreen-press"),this.controls.fullscreen.updateIconStage(t))}updateUiPip(){let t="pip";this.controls.pip&&this.controls.pip.updateIconStage(t)}updateUiFastForward(){let t="fastforward";this.controls.fastForward&&this.controls.fastForward.updateIconStage(t)}updateUiBuffer(){let t="loader";if(this.controls.buffer){let e=this.getMedia().waiting;this.controls.buffer.updateIconStage(t),e&&this.controls.buffer.isEnable()?this.controls.buffer.show():this.controls.buffer.hide()}}updateUiName(){let t=this.controls.name;if(t&&t.isEnable()){if(t.isTextEmpty()){t.hide();return}t.show()}}updateUiStop(){let t="stop";this.controls.stop&&this.controls.stop.updateIconStage(t)}updateUiPrev(){let t="prev";this.controls.prev&&this.controls.prev.updateIconStage(t)}updateUiShare(){let t="share";this.controls.share&&this.controls.share.updateIconStage(t)}updateUiPlaylist(){let t="playlist";this.controls.playlist&&this.controls.playlist.updateIconStage(t)}updateUiPlayLarge(){let t="play";if(this.controls.playLarge){this.controls.playLarge.updateIconStage(t);let e=this.getMedia().paused||this.getMedia().stopped;this.controls.playLarge.toggleVisible(e)}}updateUiSeek(){if(this.controls.seek){let t=this.getMedia().duration,e=po(this.getMedia().currentTime,t);this.controls.seek.updateProgress(e);let i=this.getMedia().buffered;this.controls.seek.updateBuffer(i*100)}}updateUiMute(){let t="volume",e=this.getMedia().volume,i=this.getMedia().muted;if((i||e===0)&&(t="mute",e=0),this.controls.mute){let s=[],r=[],o=this.controls.mute.icons;i||(e<=.2&&(s=[],r=[ue,ce]),e>.2&&e<.5&&(s=[ce],r=[ue],o[ce]&&(t=ce)),e>.5&&(s=[ce,ue],r=[],o[ue]&&(t=ue))),this.controls.mute.updateIconStageSprites(t,s,r)}this.controls.volume&&this.controls.volume.updateProgress(e*100)}updateUi(t){let e=de;t&&(e=t.type);let i=["time","timeupdate","loadedmetadata"].includes(e);this.getMedia().updateUiStage(),(e===de||i)&&(this.updateUiSeek(),this.updateUiTime(),this.updateUiDuration());let s=this.getMedia().currentTime,r=this.getMedia().duration;i&&e!=="loadedmetadata"&&s>0&&r>0&&(this.vastNetwork.runCue(),this.playlist.runSplashNext(r,s)),this.getMedia().waiting=["stalled","waiting"].indexOf(e)!==-1,this.updateUiBuffer(),(e===de||e==="play"||e==="pause")&&(this.updateUiPlay(),this.updateUiPlayLarge()),(e===de||e==="volumechange")&&this.updateUiMute(),e===de&&(this.updateUiSettings(),this.updateUiFullscreen(),this.updateUiPlaylist(),this.updateUiShare(),this.updateUiPip(),this.updateUiPrev(),this.updateUiFastForward(),this.updateUiStop(),this.updateUiName())}destroy(){this.debug.log("destroy call"),Z(this.controls.container),this.el=null}use(t,e){if(typeof t!="function")throw new TypeError(`Expected a plugin class, but ${t===null?"null":typeof t} got .`);const i=new t(this,e),s=i.id;if(this.plugins[i.type]=this.plugins[i.type]||[],!s)throw new Error("Your plugin must have an id");if(!i.type)throw new Error("Your plugin must have a type");if(!i.install)throw new Error("Your plugin not call method install");let r=this.getPlugin(s);if(r){let o="Already found a plugin named "+r.id+" Tried to use: "+s+`.
`;throw new Error(o)}return this.plugins[i.type].push(i),i.install(),this}iteratePlugins(t){Object.keys(this.plugins).forEach(e=>{this.plugins[e].forEach(t)})}removePlugin(t){t.uninstall&&t.uninstall();const e=this.plugins[t.type].slice(),i=e.indexOf(t);i!==-1&&(e.splice(i,1),this.plugins[t.type]=e)}getPlugin(t){let e=null;return this.iteratePlugins(i=>{if(i.id===t)return e=i,!1}),e}}return Pi});
